(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-806e0400"],{1927:function(e,a,t){"use strict";var r=t("a972"),o=t.n(r);o.a},a972:function(e,a,t){},b012:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("PageView",[t("SplitLayout",{staticClass:"layout"},[t("a-form-model",{ref:"ruleForm",attrs:{rules:e.rules,model:e.form,"label-col":{span:5},"wrapper-col":{span:18}}},[t("a-form-model-item",{attrs:{label:"流程节点名称",prop:"phaseName"}},[t("a-input",{attrs:{placeholder:"请选择流程节点名称"},model:{value:e.form.phaseName,callback:function(a){e.$set(e.form,"phaseName",a)},expression:"form.phaseName"}})],1),t("a-form-model-item",{attrs:{label:"审批类型",prop:"approveType"}},[t("a-radio-group",{model:{value:e.form.approveType,callback:function(a){e.$set(e.form,"approveType",a)},expression:"form.approveType"}},[t("a-radio",{style:e.radioStyle,attrs:{value:"01"}},[e._v("普通")]),t("span",{staticClass:"text"},[e._v("只能设置一人作为审批人")]),t("a-radio",{style:e.radioStyle,attrs:{value:"02"}},[e._v("会签")]),t("span",{staticClass:"text"},[e._v("可设置多人。所有人同意时，流转到下一个审批节点；任一人不同意时，退回指定节点")]),t("a-radio",{style:e.radioStyle,attrs:{value:"03"}},[e._v("或签")]),t("span",{staticClass:"text"},[e._v("可设置多人。任一人同意时，流转到下一个审批节点；任一人不同意时，退回指定节点 ")])],1)],1),t("a-form-model-item",{attrs:{label:"审批人",prop:"childNode"}},[t("a-input",{attrs:{placeholder:"请选择审批人"},on:{click:function(a){return e.seeDetails()}},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1),t("a-form-model-item",{attrs:{label:"流程期限"}},[t("a-select",{staticStyle:{width:"400px"},attrs:{allowClear:"",placeholder:"请选择流程期限"},model:{value:e.form.timeLimit,callback:function(a){e.$set(e.form,"timeLimit",a)},expression:"form.timeLimit"}},e._l(e.times,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.value}},[e._v(" "+e._s(a.name)+" ")])})),1),t("br"),t("span",[e._v("流程超过时期后，每 "),t("a-select",{staticStyle:{width:"100px"},attrs:{disabled:""==e.form.timeLimit},model:{value:e.form.timeoutReminder,callback:function(a){e.$set(e.form,"timeoutReminder",a)},expression:"form.timeoutReminder"}},e._l(e.overdueTimes,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.value}},[e._v(" "+e._s(a.name)+" ")])})),1),e._v("提醒一次(当前处理人)")],1)],1),t("a-form-model-item",{attrs:{label:"到期提醒方式"}},[t("a-checkbox-group",{model:{value:e.form.expireAction,callback:function(a){e.$set(e.form,"expireAction",a)},expression:"form.expireAction"}},[t("a-checkbox",{attrs:{value:"0",name:"type",disabled:""}},[e._v(" 短信通知 ")]),t("a-checkbox",{attrs:{value:"1",name:"type",defaultChecked:""}},[e._v(" 系统通知 ")])],1)],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[t("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 确定 ")]),t("a-button",{staticStyle:{"margin-left":"10px"},on:{click:e.back}},[e._v(" 返回 ")])],1)],1),e.childNodeBool?t("Selection",{ref:"selection",on:{func:e.getMsgFormSon}}):e._e()],1)],1)},o=[],n=(t("4160"),t("b0c0"),t("a9e3"),t("159b"),t("5530")),l=(t("96cf"),t("1da1")),i=t("2f62"),s=t("7aea"),u={components:{Selection:s["a"]},data:function(){return{form:{childNode:[]},times:[{value:"",name:"无"},{value:"1小时",name:"1小时"},{value:"2小时",name:"2小时"},{value:"3小时",name:"3小时"},{value:"4小时",name:"4小时"},{value:"5小时",name:"5小时"},{value:"6小时",name:"6小时"},{value:"7小时",name:"7小时"},{value:"1天",name:"1天"},{value:"2天",name:"2天"},{value:"3天",name:"3天"},{value:"一周",name:"一周"},{value:"10天",name:"10天"},{value:"1个月",name:"1个月"}],overdueTimes:[{value:"",name:"无"},{value:"5分钟",name:"5分钟"},{value:"10分钟",name:"10分钟"},{value:"15分钟",name:"15分钟"},{value:"30分钟",name:"30分钟"},{value:"45分钟",name:"45分钟"},{value:"1小时",name:"1小时"},{value:"2小时",name:"2小时"},{value:"3小时",name:"3小时"},{value:"5小时",name:"5小时"},{value:"8小时",name:"8小时"},{value:"12小时",name:"12小时"},{value:"1天",name:"1天"},{value:"2天",name:"2天"},{value:"3天",name:"3天"},{value:"1周",name:"1周"}],peopleLists:[],checkedList:[{label:"系统通知",value:"1"}],indeterminate:!0,checkAll:!1,childNodeBool:!1,value:1,radioStyle:{display:"block",height:"30px",lineHeight:"30px"},obj:{currerPage:1,pageSize:10,total:Number},detailData:{flowCatalogInfo:{},taskNodeInfos:[]},rules:{phaseName:[{required:!0,message:"请选择节点名称",trigger:"blur"}],approveType:[{required:!0,message:"请选择审批类型",trigger:"change"}],childNode:[{required:!0,message:"请选择审批人",trigger:"change"}]}}},props:{id:String,title:{type:String,default:"",required:!1},showFigure:{type:Boolean,default:!0,required:!1}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:(e.$route.params.flowCatalogInfo||e.$route.params.taskNodeInfos)&&(console.log(e.$route.params),e.detailData.flowCatalogInfo=e.$route.params.flowCatalogInfo,e.detailData.taskNodeInfos=e.$route.params.taskNodeInfos),e.loadPage();case 2:case"end":return a.stop()}}),a)})))()},mounted:function(){},computed:{showBool:function(){return!1}},methods:Object(n["a"])(Object(n["a"])({},Object(i["b"])({onPage:"SysUser/onPage"})),{},{loadPage:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t={pageSize:e.obj.pageSize},a.next=3,e.onPage(t);case 3:r=a.sent,r&&r.records.length>0&&(e.obj.total=Number(r.total),e.peopleLists=r.records);case 5:case"end":return a.stop()}}),a)})))()},submit:function(){var e=this;console.log(this.form),this.$refs.ruleForm.validate(function(){var a=Object(l["a"])(regeneratorRuntime.mark((function a(t){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=5;break}e.detailData.taskNodeInfos.push(e.initProcessFigureData(e.form)),e.getPush(),a.next=7;break;case 5:return console.log("error submit!!"),a.abrupt("return",!1);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getPush:function(){"processAddNode"==this.$route.name?this.$router.push({name:"processAdd",params:this.detailData}):"processEidtNode"==this.$route.name&&this.$router.push({name:"processEidt",params:this.detailData})},seeDetails:function(){var e=this;this.childNodeBool=!0,this.$nextTick((function(){e.$refs.selection.$refs.drawer.show()}))},back:function(){this.getPush()},getMsgFormSon:function(e){this.form.childNode=[],this.form.childNode.push({key:e.userId,label:e.name}),this.form.name=e.name,this.form=Object.assign({},this.form)},initProcessFigureData:function(e){var a=Object(n["a"])({},e);return a.childNode.__proto__.constructor==Array?1==a.childNode.length?(a.approveType="01",a.taskUser=a.childNode[0].key,a.taskUserName=a.childNode[0].label,a.childNode=null):(a.childNode.forEach((function(e){e.approveType="01",e.expireAction=a.expireAction,e.phaseName=a.phaseName,e.taskUser=e.key,e.taskUserName=e.label,e.timeLimit=a.timeLimit,e.timeoutReminder=a.timeoutReminder})),a.expireAction=null,a.timeLimit=null,a.timeoutReminder=null,a.taskUser=null,a.taskUserName=null):(a.approveType="01",a.taskUser=a.childNode.key,a.taskUserName=a.childNode.label,a.childNode=null),a}}),watch:{$route:function(e,a){console.log(e,a)}}},m=u,c=(t("1927"),t("2877")),p=Object(c["a"])(m,r,o,!1,null,"2cc796b4",null);a["default"]=p.exports}}]);