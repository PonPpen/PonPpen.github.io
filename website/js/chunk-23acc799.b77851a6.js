(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23acc799"],{"1d02":function(t,e,a){"use strict";var s=a("9084"),i=a.n(s);i.a},6939:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-upload",{attrs:{name:"files",multiple:!0,headers:this.token,fileList:t.fileListData,beforeUpload:t.beforeUpload,action:t.uploadService},on:{change:t.handleChange}},[t.fileListData.length<t.length?a("div",[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传 ")],1)],1):t._e()])},i=[],o=(a("b0c0"),a("a9e3"),a("d3b7"),a("b85c")),l=a("cc33");var r={props:{imgURL:{type:String,default:""},length:{type:Number,default:5}},data:function(){return{token:{token:Object(l["e"])(),loginFlag:0},uploadService:this.$globalConfig.uploadService+"/base/upload",uploadPath:this.$globalConfig.uploadPath+"/file/",previewVisible:!1,fileList:[],fileListData:[]}},methods:{beforeUpload:function(t){var e=t.size/1024/1024<50;return e||this.$message.error("文件超过50M了"),e},handleChange:function(t){var e=t.file,a=t.fileList;console.log(e.status),"removed"!==e.status&&e.response&&200!==e.response.status?this.$message.error("上传失败，检查服务是否正常或者重新上传"):("removed"===e.status&&(this.fileListData=a,this.fileList=this.fileListMap(this.fileListData)),"uploading"===e.status&&(this.fileListData=a),"done"===e.status&&200===e.response.status&&(this.fileList=this.fileListMap(this.fileListData)))},fileListMap:function(t){var e,a=[],s=Object(o["a"])(t);try{for(s.s();!(e=s.n()).done;){var i=e.value,l={};i.response&&200===i.response.status&&(l.name=i.name,l.data=i.response.data[0],a.push(l))}}catch(r){s.e(r)}finally{s.f()}return a},handleCancel:function(){this.previewVisible=!1}},created:function(){}},n=r,c=a("2877"),f=Object(c["a"])(n,s,i,!1,null,"38dac04e",null);e["a"]=f.exports},9084:function(t,e,a){},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");var s=a("06c5");function i(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=Object(s["a"])(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,n=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,l=t},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(n)throw l}}}}},cf95:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PageView",[a("SplitLayout",[a("div",{staticClass:"header-top",attrs:{slot:"top"},slot:"top"},[a("div",{staticClass:"info"},[a("h2",[t._v("标题："+t._s(t.infoObj.title))]),a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:2}},[a("div",{staticClass:"gutter-box"},[t._v("级别："+t._s(t.infoObj.level))])]),a("a-col",{staticClass:"gutter-row",attrs:{span:3}},[a("div",{staticClass:"gutter-box"},[t._v("平台："+t._s(t.infoObj.platform))])]),a("a-col",{staticClass:"gutter-row",attrs:{span:4}},[a("div",{staticClass:"gutter-box"},[t._v("功能："+t._s(t.infoObj.function))])]),a("a-col",{staticClass:"gutter-row",attrs:{span:3}},[a("div",{staticClass:"gutter-box"},[t._v("创建人："+t._s(t.infoObj.cueateUserName))])]),a("a-col",{staticClass:"gutter-row",attrs:{span:3}},[a("div",{staticClass:"gutter-box"},[t._v("状态："+t._s(t.statusName))])]),a("a-col",{staticClass:"gutter-row",attrs:{span:5}},[a("div",{staticClass:"gutter-box"},[t._v("创建日期："+t._s(t.infoObj.createTime))])]),a("OperationPermission",{attrs:{check:"privs.item1090000005"}},["2"===t.infoObj.status?a("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSubmit1}},[t._v(" 确认结果 ")]):t._e()],1),a("OperationPermission",{attrs:{check:"privs.item1090000006"}},["3"===t.infoObj.status?a("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.clickEvaluate}},[t._v(" 评价 ")]):t._e()],1)],1)],1)]),a("div",{staticClass:"con-content"},[a("div",{staticClass:"step-box"},[a("a-steps",{attrs:{current:t.current,size:"small"}},[a("a-step",{attrs:{title:"已提交"}}),a("a-step",{attrs:{title:"已受理"}}),a("a-step",{attrs:{title:"已确认结果"}}),a("a-step",{attrs:{title:"已评价"}}),a("a-step",{attrs:{title:"已关闭"}})],1)],1),a("div",{staticClass:"record-box"},[a("div",{staticClass:"record-box-top"},[t._v("沟通记录")]),a("div",{staticClass:"enclosure"},[t._v(" 描述："+t._s(t.infoObj.description)+" "),t.infoObj.src?a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.infoObj.src}})]):t._e()]),""!==t.infoObj.fileCode&&null!==t.infoObj.fileCode&&void 0!==t.infoObj.fileCode?a("div",{staticClass:"enclosure"},[a("p",{staticClass:"p1"},[t._v("附件：")]),a("p",{staticClass:"p2"},[t._l(t.infoObj.fileCode.split(","),(function(e,s){return[a("a",{key:s,attrs:{href:t.getUrl(e),download:"",target:"_blank"}},[a("img",{key:s,attrs:{src:t.getUrl(e),download:"",target:"_blank"}})])]}))],2)]):t._e(),a("div",{staticClass:"time",staticStyle:{"margin-bottom":"20px"}},[t._v(" "+t._s(t.infoObj.createTime)+" ")]),t.listData.length>0?a("div",[a("a-list",{staticStyle:{"border-top":"1px solid #e8e8e8"},attrs:{"item-layout":"horizontal","data-source":t.listData},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{staticStyle:{display:"block"}},[a("a-list-item-meta",{attrs:{description:""}},[a("P",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.jobName)+"："+t._s(e.createUser))]),a("a-avatar",{attrs:{slot:"avatar",src:t.getImg(e.headImg)},slot:"avatar"})],1),a("p",{staticStyle:{"margin-left":"50px"}},[t._v("描述："+t._s(e.decription))]),""!==e.fileCode&&null!==e.fileCode&&void 0!==e.fileCode?a("div",{staticClass:"enclosure",staticStyle:{"margin-left":"50px"}},[a("p",{staticClass:"p1"},[t._v("附件：")]),a("p",{staticClass:"p2"},[t._l(e.fileCode.split(","),(function(e,s){return[a("a",{key:s,attrs:{href:t.getUrl(e),download:"",target:"_blank"}},[a("img",{key:s,attrs:{src:t.getUrl(e),download:"",target:"_blank"}})])]}))],2)]):t._e(),a("p",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(e.createTime))])],1)}}],null,!1,1231828249)})],1):t._e(),"1"===t.infoObj.status||"2"===t.infoObj.status?a("div",[a("div",{staticClass:"record-box-feedback"},[t._v("我要反馈")]),a("div",{staticClass:"record-box-textarea"},[a("a-textarea",{attrs:{placeholder:"请输入反馈内容",maxLength:500,rows:5},model:{value:t.form1.dec,callback:function(e){t.$set(t.form1,"dec",e)},expression:"form1.dec"}}),a("div",{staticClass:"add-attachment",staticStyle:{display:"flex"}},[a("span",[t._v("附件：")]),a("UploadFiles",{ref:"UploadFiles"}),a("span",[t._v("（不超过50M）")])],1),a("OperationPermission",{attrs:{check:"privs.item1090000004"}},[a("div",{staticClass:"record-box-bnt"},[a("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSubmit2}},[t._v(" 提交 ")])],1)])],1)]):t._e(),"4"===t.infoObj.status||"5"===t.infoObj.status?a("div",[a("div",{staticClass:"record-box-top"},[t._v("评价结果")]),a("div",{staticClass:"evaluation-results"},[a("a-row",{attrs:{gutter:20}},[a("a-col",{staticClass:"item-col",attrs:{span:3}},[t._v(" 功能体验 ")]),a("a-col",{attrs:{span:20}},[a("a-rate",{attrs:{disabled:""},model:{value:t.infoObj.experience,callback:function(e){t.$set(t.infoObj,"experience",e)},expression:"infoObj.experience"}})],1)],1),a("a-row",{attrs:{gutter:20}},[a("a-col",{staticClass:"item-col",attrs:{span:3}},[t._v(" 解决能力 ")]),a("a-col",{attrs:{span:20}},[a("a-rate",{attrs:{disabled:""},model:{value:t.infoObj.solveAbility,callback:function(e){t.$set(t.infoObj,"solveAbility",e)},expression:"infoObj.solveAbility"}})],1)],1),a("a-row",{attrs:{gutter:20}},[a("a-col",{staticClass:"item-col",attrs:{span:3}},[t._v(" 解决速度 ")]),a("a-col",{attrs:{span:20}},[a("a-rate",{attrs:{disabled:""},model:{value:t.infoObj.solveSpeed,callback:function(e){t.$set(t.infoObj,"solveSpeed",e)},expression:"infoObj.solveSpeed"}})],1)],1),a("a-row",{attrs:{gutter:20}},[a("a-col",{staticClass:"item-col item-col4",attrs:{span:3}},[t._v(" 评价描述 ")]),a("a-col",{attrs:{span:20}},[t._v(" "+t._s(t.infoObj.evaluate)+" ")])],1)],1)]):t._e()])])]),a("Modal",{ref:"modal",attrs:{title:"评价",width:500},on:{ok:t.okHandler}},[a("a-form-model",{ref:"ruleForm",attrs:{form:t.form2,model:t.form2,rules:t.rules2,labelCol:{span:5},wrapperCol:{span:19}}},[a("a-form-model-item",{attrs:{label:"功能体验"}},[a("a-rate",{model:{value:t.form2.experience,callback:function(e){t.$set(t.form2,"experience",e)},expression:"form2.experience"}})],1),a("a-form-model-item",{attrs:{label:"解决能力"}},[a("a-rate",{model:{value:t.form2.solveAbility,callback:function(e){t.$set(t.form2,"solveAbility",e)},expression:"form2.solveAbility"}})],1),a("a-form-model-item",{attrs:{label:"解决速度"}},[a("a-rate",{model:{value:t.form2.solveSpeed,callback:function(e){t.$set(t.form2,"solveSpeed",e)},expression:"form2.solveSpeed"}})],1),a("a-form-model-item",{attrs:{label:"评价描述："}},[a("a-textarea",{attrs:{placeholder:"请输入描述",rows:3},model:{value:t.form2.evaluate,callback:function(e){t.$set(t.form2,"evaluate",e)},expression:"form2.evaluate"}})],1)],1)],1)],1)},i=[],o=(a("4160"),a("caad"),a("a9e3"),a("d3b7"),a("ac1f"),a("2532"),a("5319"),a("159b"),a("86da")),l=a("c443"),r=a("6939"),n={components:{Modal:o["a"],UploadFiles:r["a"]},data:function(){return{form1:{dec:"",feedbackId:"",fileCode:""},loading:!1,form2:{experience:0,solveAbility:0,solveSpeed:0,evaluate:"",id:this.$route.params.id},rules2:{},infoObj:{},listData:[],id:"",statusName:"",current:0}},created:function(){this.id=this.$route.params.id,this.getDetail(this.id)},methods:{getUrl:function(t){return this.$globalConfig.uploadPath+"/file/"+t},getImg:function(t){return null===t?"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png":this.$globalConfig.uploadPath+"/file/"+t},getDetail:function(t){var e=this;l["a"].feedbackDetail(t).then((function(t){e.infoObj=t.sjskFeedbackInfoVO;var a=t.sjskFeedbackInfoVO.fileCode;if(a.includes("[")){e.infoObj.fileCode=a.replaceAll('"',"").replace("[","").replace("]","")}null!==t.sjskFeedbackTalkVOList&&(e.listData=t.sjskFeedbackTalkVOList),e.getValue()}))},getValue:function(){this.infoObj.level=0===this.infoObj.level?"普通":"紧急","1"===this.infoObj.platform&&(this.infoObj.platform="PC管理端"),"2"===this.infoObj.platform&&(this.infoObj.platform="椰风送暖"),"3"===this.infoObj.platform&&(this.infoObj.platform="智慧禁毒"),"1"===this.infoObj.status&&(this.statusName="已提交"),"2"===this.infoObj.status&&(this.statusName="已受理"),"3"===this.infoObj.status&&(this.statusName="已确认结果"),"4"===this.infoObj.status&&(this.statusName="已评价"),"5"===this.infoObj.status&&(this.statusName="已关闭"),this.current=Number(this.infoObj.status)-1},clickEvaluate:function(){this.$refs.modal.show()},onSubmit1:function(){var t=this,e={feedbackId:this.id,status:this.infoObj.status};this.loading=!0,l["a"].feedbackOperation(e).then((function(e){t.loading=!1,t.$message.success("确认成功"),t.getDetail(t.id)})).catch((function(e){t.loading=!1}))},onSubmit2:function(){var t=this,e=this.$refs.UploadFiles.fileList,a=[];e.length>0&&e.forEach((function(t){a.push(t.data)})),this.form1.fileCode=a.toString(),this.form1.feedbackId=this.id,this.loading=!0,l["a"].feedbackReply(this.form1).then((function(e){t.loading=!1,t.form1.dec="",t.getDetail(t.id)})).catch((function(e){t.loading=!1}))},okHandler:function(){var t=this;this.form2.status=this.infoObj.status,l["a"].feedbackEvaluate(this.form2).then((function(e){t.$message.success("评价成功"),t.$refs.modal.close(),t.getDetail(t.id)}))}}},c=n,f=(a("1d02"),a("2877")),d=Object(f["a"])(c,s,i,!1,null,"177b4a2c",null);e["default"]=d.exports}}]);