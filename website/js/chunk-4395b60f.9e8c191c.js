(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4395b60f"],{"0544":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SplitLayout",[n("div",{staticClass:"con-content"},[n("OperationPermission",{attrs:{check:"privs.item1100010000"}},[n("div",{staticClass:"con-content-top"},[n("a-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新建")])],1)]),n("div",{staticClass:"con-content-list"},[n("CustomTable",{ref:"table",attrs:{onRowClick:e.to_detail,showAlert:!1,showSelection:!1,columns:e.columns,loading:e.load,dataSource:e.pageData},on:{change:e.onTableChange},scopedSlots:e._u([{key:"pushPlatform",fn:function(t){return[1==t?n("span",[e._v("智慧禁毒")]):e._e(),2==t?n("span",[e._v("椰风送暖")]):e._e()]}},{key:"action",fn:function(t){return[n("OperationPermission",{attrs:{check:"privs.item1100010002"}},[n("a",{staticStyle:{"z-index":"999"},on:{click:function(n){return e.edit(n,t)}}},[e._v("编辑")])])]}},{key:"open",fn:function(t){return[n("OperationPermission",{attrs:{check:"privs.item1100010001"}},[n("a-switch",{staticStyle:{"z-index":"999"},attrs:{defaultChecked:1==t.isSend},nativeOn:{click:function(n){return e.onChange(n,t)}}})],1)]}}])})],1)],1)])},s=[],i=n("5530"),o=n("c443"),r={name:"system_message_center",components:{},data:function(){return{load:!1,columns:[{title:"标题",dataIndex:"title",align:"center"},{title:"模板名称",dataIndex:"templateName",align:"center"},{title:"一级分类",align:"center",dataIndex:"oneLevelTypeName"},{title:"二级分类",align:"center",dataIndex:"twoLevelTypeName"},{title:"推送平台",align:"center",dataIndex:"pushPlatform",scopedSlots:{customRender:"pushPlatform"}},{title:"操作",align:"center",scopedSlots:{customRender:"action"}},{title:"发送开关",align:"center",scopedSlots:{customRender:"open"}}],pageData:[],pageFilter:{pageSize:10,currentPage:1}}},created:function(){this.load=!0,this.refreshTable()},methods:{to_detail:function(e){var t=this;setTimeout((function(){t.$router.push({name:"system_message_detail",query:{type:"detail",id:e.id}})}),100)},refreshTable:function(){var e=this;this.load=!0,o["a"].get_system_list(this.pageFilter).then((function(t){console.log(t);var n=t.current,a=t.size,s=t.records,o=t.total;e.pageData=Object(i["a"])(Object(i["a"])({},e.pageData),{},{currentPage:n,pageSize:a,records:s,total:o}),e.load=!1}))},onTableChange:function(e){this.pageFilter=e,this.refreshTable()},edit:function(e,t){console.log(1),this.$router.push({name:"edit_system_message",query:{type:"edit",id:t.id}}),e.stopPropagation()},onChange:function(e,t){var n=this;this.load=!0,console.log(e),e.stopPropagation(),o["a"].send({id:t.id,sendState:1==t.isSend?2:1}).then((function(e){n.$message.success("状态更新成功"),n.refreshTable()}))},add:function(){this.$router.push({name:"new_system_message",query:{type:"add"}})}}},c=r,l=(n("4017"),n("2877")),d=Object(l["a"])(c,a,s,!1,null,"37eb8fa6",null);t["default"]=d.exports},4017:function(e,t,n){"use strict";var a=n("d243"),s=n.n(a);s.a},d243:function(e,t,n){}}]);