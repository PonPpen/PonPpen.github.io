(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c0d2070"],{"0bb4":function(e,t,n){"use strict";var a=n("b775");t["a"]={getList:function(e){return Object(a["a"])({url:"notice-help-service/sjsk/notice/getList",method:"POST",data:e})},add_notice:function(e){return Object(a["a"])({url:"notice-help-service/sjsk/notice/add",method:"POST",data:e})},edit_notice:function(e){return Object(a["a"])({url:"notice-help-service/sjsk/notice/update",method:"POST",data:e})},del_notice:function(e){return Object(a["a"])({url:"notice-help-service/sjsk/notice/delete",method:"POST",params:e})}}},"0d21":function(e,t,n){"use strict";function a(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return a}))},3835:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("0d21");n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function r(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0)if(n.push(o.value),t&&n.length===t)break}catch(s){r=!0,i=s}finally{try{a||null==c["return"]||c["return"]()}finally{if(r)throw i}}return n}}var i=n("06c5"),o=n("3d8c");function c(e,t){return Object(a["a"])(e)||r(e,t)||Object(i["a"])(e,t)||Object(o["a"])()}},"3d8c":function(e,t,n){"use strict";function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return a}))},"8cc5":function(e,t,n){"use strict";var a=n("d41e"),r=n.n(a);r.a},d249:function(e,t,n){"use strict";var a=n("e6d1"),r=n.n(a);r.a},d41e:function(e,t,n){},d99e:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-wrapper"},[n("div",[n("a-row",{attrs:{gutter:56}},[e._t("default"),n("buttonBox",{style:e.advanced?{float:"right"}:{},on:{toggleAdvanced:e.toggleAdvanced,query:e.query,reset:e.reset}})],2)],1)])},r=[],i=(n("a9e3"),n("5530")),o={name:"SearchListItem",props:{label:{type:String,default:"",required:!1}},inject:{col:{type:Number}},render:function(){var e=arguments[0];return e("a-col",{class:"item-box",props:Object(i["a"])({},s[this.col])},[e("div",{class:"y-search-item"},[e("div",{class:"y-search-label"},[this.$props.label]),e("div",{class:"y-search-content"},[this.$slots.default])])])}},c={name:"buttonBox",data:function(){return{advanced:!1}},inject:{col:{type:Number}},methods:{toggleAdvanced:function(){this.advanced=!this.advanced,this.$emit("toggleAdvanced")},query:function(){this.$emit("query")},reset:function(){this.$emit("reset")}},render:function(){var e=arguments[0];return e("a-col",{props:Object(i["a"])({},s[this.col])},[e("span",{class:"table-page-search-submitButtons",style:"float: 'left', overflow: 'hidden'"},[e("a-button",{attrs:{type:"primary"},on:{click:this.query}},["查询"]),e("a-button",{style:"margin-left: 8px",on:{click:this.reset}},["重置"]),e("a",{attrs:{id:"advance-btn"},style:"margin-left: 8px",on:{click:this.toggleAdvanced}},[this.advanced?"收起":"展开",e("a-icon",{props:Object(i["a"])({},{type:this.advanced?"up":"down"})})])])])}},s={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{md:24,lg:12,xl:8,xxl:6}},l={name:"SearchForm",Item:o,components:{buttonBox:c},props:{col:{type:Number,required:!1,default:6}},provide:function(){return{col:this.col>4?4:this.col}},data:function(){return{advanced:!1,toplist:[],bottomList:[]}},methods:{toggleAdvanced:function(){this.advanced=!this.advanced,this.displayItem()},query:function(){this.$emit("query")},reset:function(){this.$emit("reset")},displayItem:function(){var e=this.$slots.default,t=this.col,n=e.length;if(n<t)document.getElementById("advance-btn").style.display="none";else for(var a=t-1;a<n;a++)e[a].elm.style.display=this.advanced?"":"none"}},mounted:function(){this.displayItem()}},d=l,u=(n("8cc5"),n("2877")),m=Object(u["a"])(d,a,r,!1,null,"359e9f37",null),p=m.exports;t["a"]=p},e6d1:function(e,t,n){},f4fd:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SplitLayout",[n("div",{staticClass:"header-top",attrs:{slot:"top"},slot:"top"},[n("SearchForm",{on:{query:e.onQuery,reset:e.onResetForm}},[n("SearchFormItem",{attrs:{label:"通告标题："}},[n("a-input",{attrs:{placeholder:"请输入文档名称"},model:{value:e.pageFilter.title,callback:function(t){e.$set(e.pageFilter,"title",t)},expression:"pageFilter.title"}})],1),n("SearchFormItem",{attrs:{label:"起始日期："}},[n("a-range-picker",{attrs:{size:"default",format:"YYYY-MM-DD ",valueFormat:"YYYY-MM-DD"},model:{value:e.updateTime,callback:function(t){e.updateTime=t},expression:"updateTime"}})],1)],1)],1),n("div",{staticClass:"con-content"},[n("OperationPermission",{attrs:{check:"privs.item1150000002"}},[n("div",{staticClass:"con-content-top"},[n("a-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新建")])],1)]),n("div",{staticClass:"con-content-list"},[n("CustomTable",{ref:"table",attrs:{showAlert:!1,showSelection:!1,columns:e.columns,loading:e.load,dataSource:e.pageData},on:{change:e.onTableChange},scopedSlots:e._u([{key:"createTime",fn:function(t){return[e._v(" "+e._s(e.moment(t).format("YYYY-MM-DD"))+" ")]}},{key:"validTime",fn:function(t){return[n("span",[e._v(e._s(e.moment(t.startTime).format("YYYY-MM-DD"))+"-"+e._s(e.moment(t.endTime).format("YYYY-MM-DD")))])]}},{key:"action",fn:function(t){return[n("OperationPermission",{attrs:{check:"privs.item1150000003"}},[n("a",{staticStyle:{"margin-right":"16px"},on:{click:function(n){return n.stopPropagation(),e.edit(t)}}},[e._v("编辑")])]),n("OperationPermission",{attrs:{check:"privs.item1150000004"}},[n("a-popconfirm",{attrs:{title:"确定要删除吗？","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(n){return e.del(t)}}},[n("a",{staticStyle:{"margin-right":"16px"}},[e._v("删除")])])],1)]}}])})],1)],1)])},r=[],i=n("5530"),o=n("3835"),c=n("0bb4"),s=n("d99e"),l=s["a"].Item,d={name:"notice_center",components:{SearchForm:s["a"],SearchFormItem:l},data:function(){return{updateTime:[],pageFilter:{currentPage:1,pageSize:10},pageData:[],load:!1,columns:[{title:"通告标题",dataIndex:"title",align:"center"},{title:"排序值",dataIndex:"sort",align:"center"},{title:"有效时间",align:"center",scopedSlots:{customRender:"validTime"}},{title:"创建时间",dataIndex:"createTime",align:"center",scopedSlots:{customRender:"createTime"}},{title:"操作",width:"150px",align:"center",scopedSlots:{customRender:"action"}}]}},watch:{updateTime:function(e){console.log(e);var t=Object(o["a"])(e,2),n=t[0],a=t[1];this.pageFilter=Object(i["a"])(Object(i["a"])({},this.pageFilter),{},{startTime:n,endTime:a})}},methods:{refreshTable:function(){var e=this;this.load=!0,c["a"].getList(this.pageFilter).then((function(t){console.log(t);t.pages;var n=t.current,a=t.records,r=t.size,o=t.total,c=n,s=r;e.pageData=Object(i["a"])(Object(i["a"])({},e.form),{},{currentPage:c,records:a,pageSize:s,total:o}),console.log(e.pageData),e.load=!1}))},del:function(e){var t=this,n=e.id;c["a"].del_notice({id:n}).then((function(e){e&&(t.$message.success("删除成功"),t.refreshTable())}))},edit:function(e){console.log(e),this.$router.push({name:"edit_notice",query:{type:"edit",res:JSON.stringify(e)}})},onQuery:function(){this.pageFilter.currentPage=1,console.log(this.pageFilter),this.refreshTable()},onTableChange:function(e){this.pageFilter=Object(i["a"])(Object(i["a"])({},this.pageFilter),e),console.log(this.pageFilter),this.refreshTable()},onResetForm:function(){this.pageFilter={pageSize:10,currentPage:1},this.refreshTable()},add:function(){this.$router.push({name:"new_notice",query:{type:"add"}})}},created:function(){this.refreshTable()}},u=d,m=(n("d249"),n("2877")),p=Object(m["a"])(u,a,r,!1,null,"3f0e0200",null);t["default"]=p.exports}}]);