(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f48888e"],{"0bb4":function(t,e,r){"use strict";var o=r("b775");e["a"]={getList:function(t){return Object(o["a"])({url:"notice-help-service/sjsk/notice/getList",method:"POST",data:t})},add_notice:function(t){return Object(o["a"])({url:"notice-help-service/sjsk/notice/add",method:"POST",data:t})},edit_notice:function(t){return Object(o["a"])({url:"notice-help-service/sjsk/notice/update",method:"POST",data:t})},del_notice:function(t){return Object(o["a"])({url:"notice-help-service/sjsk/notice/delete",method:"POST",params:t})}}},"0d21":function(t,e,r){"use strict";function o(t){if(Array.isArray(t))return t}r.d(e,"a",(function(){return o}))},3835:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var o=r("0d21");r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function i(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],o=!0,i=!1,a=void 0;try{for(var n,s=t[Symbol.iterator]();!(o=(n=s.next()).done);o=!0)if(r.push(n.value),e&&r.length===e)break}catch(c){i=!0,a=c}finally{try{o||null==s["return"]||s["return"]()}finally{if(i)throw a}}return r}}var a=r("06c5"),n=r("3d8c");function s(t,e){return Object(o["a"])(t)||i(t,e)||Object(a["a"])(t,e)||Object(n["a"])()}},"3d8c":function(t,e,r){"use strict";function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(e,"a",(function(){return o}))},"67a9":function(t,e,r){},"6e03":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("SplitLayout",[r("div",{staticClass:"con-content"},[r("div",{staticClass:"con-content-top"},[r("a-form-model",{ref:"formModal",attrs:{model:t.form,rules:t.rules}},[r("a-row",{attrs:{gutter:20}},[r("a-col",{attrs:{span:8}},[r("a-form-model-item",{attrs:{label:"文档名称",prop:"title"}},[r("a-input",{attrs:{placeholder:"请输入文档名称"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),r("a-col",{attrs:{span:8}},[r("a-form-model-item",{attrs:{label:"有效时间",prop:"updateTime"}},[r("a-range-picker",{staticStyle:{width:"100%"},attrs:{size:"default",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD "},model:{value:t.form.updateTime,callback:function(e){t.$set(t.form,"updateTime",e)},expression:"form.updateTime"}})],1)],1),r("a-col",{attrs:{span:8}},[r("a-form-model-item",{attrs:{label:"排序值",prop:"sort"}},[r("a-input",{attrs:{type:"number",placeholder:"请输入排序值"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1)],1),r("a-form-model-item",[r("UEditor",{ref:"ueditor",attrs:{ToolbarsType:2,content:t.form.content,menuObj:t.menuObj}})],1),r("a-form-model-item",{attrs:{prop:"img"}},[r("UploadAvatar",{ref:"UploadAvatar",staticStyle:{width:"160px",height:"160px",float:"left"},attrs:{avatarType:1,imgURL:t.form.img}}),r("div",{staticClass:"noticeText"},[r("p",[t._v("格式：jpg/png格式图片")]),r("p",[t._v("尺寸：800*650(或按此比例)")]),r("p",[t._v("大小：不超过2M")])])],1),r("a-row",[r("a-col",{attrs:{span:6}},[r("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.save}},[t._v(" 保存 ")]),r("a-button",{on:{click:t.preview}},[t._v(" 预览 ")])],1)],1)],1)],1)])])},i=[],a=(r("b0c0"),r("3835")),n=r("f45a"),s=r("418e"),c=r("0bb4"),u={components:{UEditor:n["a"],UploadAvatar:s["a"]},data:function(){return{menuObj:{},type:"",isKeep:!1,rules:{title:[{required:!0,message:"请输入文档名称",trigger:"blur"}],createTime:[{required:!0,message:"请选择时间",trigger:"blur"}],sort:[{required:!0,message:"请输入排序值"},{validator:function(t,e,r){var o=/^[0-9]*$/;o.test(e)?r():r("排序值应该为数字")}}]},content:"",visible:!0,form:{}}},created:function(){this.type=this.$route.query.type,"edit"==this.type&&(this.form=Object.assign({},JSON.parse(this.$route.query.res)),this.form.updateTime=[],this.form.updateTime.push(this.form.startTime,this.form.endTime),console.log(this.form.updateTime))},activated:function(){var t=this;setTimeout((function(){console.log(t.isKeep),1==t.isKeep&&(t.form={},t.$refs.ueditor.message="",t.$refs.UploadAvatar.imageUrl="",t.$refs.UploadAvatar.fileList[0]=[])}),0)},methods:{preview:function(){this.form.content=this.$refs.ueditor.message,this.$router.push({name:"preview_notice",query:{res:JSON.stringify(this.form)}})},save:function(){var t=this;this.$refs.formModal.validate((function(e){e&&("edit"==t.type&&t.editNotice(),"add"==t.type&&t.addNotice())}))},addNotice:function(){var t=this;try{console.log(this.$refs.ueditor.message);var e={},r=this.$refs.ueditor.message,o=this.form,i=o.title,n=o.sort,s=Object(a["a"])(this.form.updateTime,2),u=s[0],l=s[1];u=this.moment(u).format("YYYY-MM-DD"),l=this.moment(l).format("YYYY-MM-DD"),e={title:i,sort:n,startTime:u,endTime:l},e.content=r,console.log(this.$refs.UploadAvatar),e.img=this.$refs.UploadAvatar.fileList[0].data,c["a"].add_notice(e).then((function(e){t.$message.success("提交成功"),window.history.go(-1)}))}catch(m){console.log(m),this.$message.warning("提交失败，请检查表单")}},editNotice:function(){var t=this;try{var e={},r=this.$refs.ueditor.message,o=Object(a["a"])(this.form.updateTime,2),i=o[0],n=o[1],s=this.form,u=s.id,l=s.sort,m=s.title,d=s.img;e={id:u,sort:l,title:m,img:d,content:r,endTime:n,startTime:i},console.log(e),c["a"].edit_notice(e).then((function(e){e&&(t.$message.success("提交成功"),window.history.go(-1))}))}catch(f){this.$message.warning("提交失败，请检查表单")}}},beforeRouteEnter:function(t,e,r){console.log(t.name,e.name),"notice_center"==e.name?r((function(t){t.isKeep=!0})):r((function(t){t.isKeep=!1}))}},l=u,m=(r("bcfa"),r("2877")),d=Object(m["a"])(l,o,i,!1,null,"4a28c888",null);e["default"]=d.exports},bcfa:function(t,e,r){"use strict";var o=r("67a9"),i=r.n(o);i.a}}]);