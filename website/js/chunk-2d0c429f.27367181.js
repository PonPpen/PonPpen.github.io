(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c429f"],{"3a50":function(t,e,n){"use strict";n.r(e);n("4160"),n("b0c0"),n("a9e3"),n("159b");var a=n("cc33"),r=n("d99e"),i=n("07cc"),h=n("007b"),c=n("5b1d"),o=n("c1df"),s=n.n(o),l=n("16fe"),m=r["a"].Item;e["default"]={name:"Index",components:{SearchForm:r["a"],SearchFormItem:m,AnalysisCard:i["default"]},data:function(){return{rangePickerTime:[],areaModel:[],areaArray:[],options:[],form:{departmentId:null,endTime:"",startTime:"",sjskType:"",timeType:""},tabPosition:"top",dateFormat:"YYYY/MM/DD",abnormalNumberData:[],BreachAgreementCountData:[],SmsNumberData:[],SmsTimeIntervalData:[]}},created:function(){var t={deptKey:1};this.getArea(t),this.initParam(),this.getAbnormalNumber(this.form),this.getSmsNumber(this.form),this.getBreachAgreementCount(this.form),this.getSmsTimeInterval(this.form)},mounted:function(){},methods:{initParam:function(){this.form.departmentId=Object(a["f"])().mainDeptId,this.areaModel=[this.form.departmentId],this.form.sjskType="",this.form.timeType=4;var t=Object(l["getTime"])();this.form.startTime=t,this.form.endTime=t,this.rangePickerTime=[s()(t,this.dateFormat),s()(t,this.dateFormat)],console.log("默认参数",this.form)},getArea:function(t){var e=this;h["a"].getDepartmentTree(t).then((function(t){null!==t&&(e.areaArray=t.data,e.areaArray.forEach((function(t,n){e.options.push({value:t.key,label:t.title,children:[]}),console.log("地址",e.areaArray,e.options),t.children&&0!==t.children.length&&t.children.forEach((function(t,a){e.options[n].children.push({value:t.key,label:t.title,children:[]}),t.children&&0!==t.children.length&&t.children.forEach((function(t,r){e.options[n].children[a].children.push({value:t.key,label:t.title,children:[]}),t.children&&t.children.length&&t.children.forEach((function(i,h){e.options[n].children[a].children[r].children.push({value:i.key,label:i.title,children:[]}),i.children&&i.children.length&&i.children.forEach((function(i,c){e.options[n].children[a].children[r].children[h].children.push({value:i.key,label:i.title,children:[]}),i.children&&i.children.length&&t.children.forEach((function(t){e.options[n].children[a].children[r].children[h].children[c].children.push({value:t.key,label:t.title,children:[]})}))}))}))}))}))})))})).catch((function(){}))},onAreaChange:function(t){this.form.departmentId=Number(t[0]),console.log(t[0],this.form.departmentId)},rangePickerChange:function(t){var e=t[0]["_d"].getMonth()+1>=10?t[0]["_d"].getMonth()+1:"0"+(t[0]["_d"].getMonth()+1),n=t[1]["_d"].getMonth()+1>=10?t[1]["_d"].getMonth()+1:"0"+(t[1]["_d"].getMonth()+1),a=t[0]["_d"].getDate()>=10?t[0]["_d"].getDate():"0"+t[0]["_d"].getDate(),r=t[1]["_d"].getDate()>=10?t[1]["_d"].getDate():"0"+t[1]["_d"].getDate();this.form.startTime=t[0]["_d"].getFullYear()+"-"+e+"-"+a,this.form.endTime=t[1]["_d"].getFullYear()+"-"+n+"-"+r},getAbnormalNumber:function(t){var e=this,n=[],a=[],r=Object.assign({},t);c["a"].getCallCount(r).then((function(t){if(null!==t){var r=t.data;e.abnormalNumberData=t.data,0!==r.length&&(r.forEach((function(t){n.push({value:t.count,name:t.name}),a.push({ratio:t.ratio})})),e.Charts1(n,a))}})).catch((function(){}))},getSmsNumber:function(t){var e=this,n=[],a=[],r=Object.assign({},t);c["a"].getSmsNumber(r).then((function(t){if(null!==t){var r=t.data;e.SmsNumberData=t.data,0!==r.length&&(r.forEach((function(t){n.push({value:t.count,name:t.name}),a.push({ratio:t.ratio})})),e.Charts2(n,a))}})).catch((function(){}))},getBreachAgreementCount:function(t){var e=this,n=[],a=[],r=Object.assign({},t);c["a"].getCallTimeInterval(r).then((function(t){if(null!==t){var r=t.data;e.BreachAgreementCountData=t.data,0!==r.length&&(r.forEach((function(t){n.push(t.timeInterval),a.push(t.number)})),e.Charts3(n,a))}})).catch((function(){}))},getSmsTimeInterval:function(t){var e=this,n=[],a=[],r=Object.assign({},t);c["a"].getSmsTimeInterval(r).then((function(t){if(null!==t){var r=t.data;e.SmsTimeIntervalData=t.data,0!==r.length&&(r.forEach((function(t){n.push(t.timeInterval),a.push(t.number)})),e.Charts4(n,a))}})).catch((function(){}))},onQuery:function(){this.getAbnormalNumber(this.form),this.getSmsNumber(this.form),this.getBreachAgreementCount(this.form),this.getSmsTimeInterval(this.form)},onResetForm:function(){this.initParam()},radioOnChange:function(t){console.log(t.target.value)},Charts1:function(t,e){var n=this.$echarts.init(document.getElementById("echarts1")),a=["25%","53%"],r=[0,100],i="middle";Object(l["drawPieEcharts"])(n,a,r,i,t,e,160,"人")},Charts2:function(t,e){var n=this.$echarts.init(document.getElementById("echarts2")),a=["25%","53%"],r=[0,100],i="middle";Object(l["drawPieEcharts"])(n,a,r,i,t,e,160,"人")},Charts3:function(t,e){var n=this.$echarts.init(document.getElementById("echarts3")),a=[""];Object(l["drawLine2Echarts"])(n,a,t,e)},Charts4:function(t,e){var n=this.$echarts.init(document.getElementById("echarts4")),a=[""];Object(l["drawLine2Echarts"])(n,a,t,e)}}}}}]);