(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8fcb2ba2"],{"8cc5":function(e,t,o){"use strict";var s=o("d41e"),a=o.n(s);a.a},bb3f:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("PageView",[o("SplitLayout",[o("div",{attrs:{slot:"top"},slot:"top"},[o("SearchForm",{on:{query:e.onQuery,reset:e.onResetForm}},[o("SearchFormItem",{attrs:{label:"流程名称："}},[o("a-input",{attrs:{placeholder:"请输入流程名称"},model:{value:e.form.flowName,callback:function(t){e.$set(e.form,"flowName",t)},expression:"form.flowName"}})],1),o("SearchFormItem",{attrs:{label:"流程类型："}},[o("a-select",{staticStyle:{width:"100%"},attrs:{defaultValue:""},model:{value:e.form.flowType,callback:function(t){e.$set(e.form,"flowType",t)},expression:"form.flowType"}},[o("a-select-option",{attrs:{value:""}},[e._v("全部")]),o("a-select-option",{attrs:{value:"01"}},[e._v("业务流程")]),o("a-select-option",{attrs:{value:"02"}},[e._v("表单流程")])],1)],1),o("SearchFormItem",{attrs:{label:"状态"}},[o("a-select",{staticStyle:{width:"100%"},attrs:{defaultValue:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[o("a-select-option",{attrs:{value:""}},[e._v("全部")]),o("a-select-option",{attrs:{value:"1"}},[e._v("使用中")]),o("a-select-option",{attrs:{value:"2"}},[e._v("停用")]),o("a-select-option",{attrs:{value:"0"}},[e._v("草稿")])],1)],1)],1)],1),o("div",[o("OperationPermission",{attrs:{check:"privs.item1040000002"}},[o("div",{staticClass:"tool-bar",staticStyle:{"text-align":"left"}},[o("a-button",{attrs:{type:"primary"},on:{click:e.addProcess}},[e._v("新建")])],1)]),o("CustomTable",{ref:"table",attrs:{rowKey:"id",showAlert:!1,showSelection:!1,loading:e.loading.getLists,columns:e.columns,dataSource:e.listData,onChange:e.onTableChange},scopedSlots:e._u([{key:"order",fn:function(t,o,s){return[e._v(" "+e._s(s+1)+" ")]}},{key:"flowType",fn:function(t){return[e._v(" "+e._s("01"==t?"业务类型":"表单类型")+" ")]}},{key:"supervise",fn:function(t){return[e._v(" "+e._s("01"==t?"是":"否")+" ")]}},{key:"status",fn:function(t){return[e._v(" "+e._s(0==t?"草稿":1==t?"使用中":"停用")+" ")]}},{key:"action",fn:function(t){return[o("OperationPermission",{attrs:{check:"privs.item1040000003"}},[t.operationOption.edit?o("a",{on:{click:function(o){return e.edit(t.id)}}},[e._v("编辑")]):e._e()]),o("OperationPermission",{attrs:{check:"privs.item1040000006"}},[t.operationOption.edit?o("a-divider",{attrs:{type:"vertical"}}):e._e(),t.operationOption.view?o("a",{on:{click:function(o){return e.seeDetails(t)}}},[e._v("查看")]):e._e(),t.operationOption.view?o("a-divider",{attrs:{type:"vertical"}}):e._e(),t.operationOption.useRecord?o("a",{on:{click:function(o){return e.serviceCondition(t.id,o)}}},[e._v("使用情况")]):e._e()],1),o("OperationPermission",{attrs:{check:"privs.item1040000005"}},[t.operationOption.useRecord?o("a-divider",{attrs:{type:"vertical"}}):e._e(),t.operationOption.stop?o("a",{on:{click:function(o){return e.stopUsing(t.id,o)}}},[e._v("停用")]):e._e()],1),o("OperationPermission",{attrs:{check:"privs.item1040000004"}},[t.operationOption.stop?o("a-divider",{attrs:{type:"vertical"}}):e._e(),o("a-popconfirm",{attrs:{placement:"topLeft",okText:"是",cancelText:"否"},on:{confirm:function(o){return e.confirm(t.id,o)}}},[o("template",{slot:"title"},[o("p",[e._v(e._s(e.text))])]),t.operationOption.delete?o("a",[e._v("删除")]):e._e(),t.operationOption.delete?o("a-divider",{attrs:{type:"vertical"}}):e._e()],2),t.operationOption.copy?o("a",{on:{click:function(o){return e.copy(t.id)}}},[e._v("复制")]):e._e()],1)]}}])}),o("SeeDrawer",{ref:"seeDetails"})],1)])],1)},a=[],n=(o("b0c0"),o("5530")),r=o("cc33"),i=o("2f62"),c=o("bf11"),l=o("d99e"),u=o("8dab"),d=o("f64c"),p=l["a"].Item,f={name:"Index",components:{SearchForm:l["a"],SearchFormItem:p,CustomTable:c["a"],SeeDrawer:u["default"]},data:function(){var e=this;return{text:"确定删除该流程吗？",columns:[{title:"序号",dataIndex:"order",scopedSlots:{customRender:"order"},customRender:function(t,o,s){return"".concat((e.form.currentPage-1)*e.form.pageSize+(s+1))}},{title:"流程名称",dataIndex:"flowName"},{title:"所属租户",dataIndex:"tenantName"},{title:"流程类型",dataIndex:"flowType",scopedSlots:{customRender:"flowType"}},{title:"生效时间",dataIndex:"effectiveTime"},{title:"失效时间",dataIndex:"failureTime"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",width:"300px",align:"center",scopedSlots:{customRender:"action"}}],form:{currentPage:1,flowName:"",flowType:"",pageSize:10,sortField:"",sortOrder:"",status:"",tenantId:Object(r["f"])().tenantId},formItemLayout:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}}},activated:function(){},beforeRouteEnter:function(e,t,o){o()},created:function(){},mounted:function(){this.refreshTable()},computed:Object(n["a"])({},Object(i["d"])({loading:function(e){return e.SysProcess.loading},listData:function(e){return e.SysProcess.pageData}})),watch:{$route:function(e){"Process"===e.name&&this.refreshTable()}},methods:Object(n["a"])(Object(n["a"])({},Object(i["b"])({getLists:"SysProcess/getLists",stopFrow:"SysProcess/stopUsing",delFlowInfo:"SysProcess/delFlowInfo",copyFrow:"SysProcess/copyFrow"})),{},{seeDetails:function(e){this.$refs.seeDetails.$refs.drawer.show(),this.$refs.seeDetails.initFrom(e)},stopUsing:function(e,t){var o=this;this.stopFrow(e).then((function(e){d["a"].success(e),o.refreshTable()}))},edit:function(e){this.$router.push({path:"/process/eidt/".concat(e)})},serviceCondition:function(e){this.$router.push({path:"/processUsage/".concat(e)})},confirm:function(e){var t=this;this.delFlowInfo(e).then((function(e){d["a"].success(e),t.refreshTable()}))},copy:function(e){var t=this,o={createUser:Object(r["f"])().userId,createUserName:Object(r["f"])().name,id:e,tenantId:Object(r["f"])().tenantId,tenantName:Object(r["f"])().tenantName};this.copyFrow(o).then((function(e){t.$message.success("复制成功"),t.refreshTable()}))},refreshTable:function(){this.getLists(this.form)},onTableChange:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.form),e),this.refreshTable()},onQuery:function(){this.form.currentPage=1,this.refreshTable()},onResetForm:function(){this.form={currentPage:1,flowName:"",flowType:"",pageSize:10,sortField:"",sortOrder:"",status:"",tenantId:Object(r["f"])().tenantId},this.refreshTable()},addProcess:function(){this.$router.push({name:"processAdd"})},processUsage:function(e){this.$router.push({path:"processUsage/".concat(e)})}})},m=f,h=o("2877"),v=Object(h["a"])(m,s,a,!1,null,"6d410502",null);t["default"]=v.exports},d41e:function(e,t,o){},d99e:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"search-wrapper"},[o("div",[o("a-row",{attrs:{gutter:56}},[e._t("default"),o("buttonBox",{style:e.advanced?{float:"right"}:{},on:{toggleAdvanced:e.toggleAdvanced,query:e.query,reset:e.reset}})],2)],1)])},a=[],n=(o("a9e3"),o("5530")),r={name:"SearchListItem",props:{label:{type:String,default:"",required:!1}},inject:{col:{type:Number}},render:function(){var e=arguments[0];return e("a-col",{class:"item-box",props:Object(n["a"])({},c[this.col])},[e("div",{class:"y-search-item"},[e("div",{class:"y-search-label"},[this.$props.label]),e("div",{class:"y-search-content"},[this.$slots.default])])])}},i={name:"buttonBox",data:function(){return{advanced:!1}},inject:{col:{type:Number}},methods:{toggleAdvanced:function(){this.advanced=!this.advanced,this.$emit("toggleAdvanced")},query:function(){this.$emit("query")},reset:function(){this.$emit("reset")}},render:function(){var e=arguments[0];return e("a-col",{props:Object(n["a"])({},c[this.col])},[e("span",{class:"table-page-search-submitButtons",style:"float: 'left', overflow: 'hidden'"},[e("a-button",{attrs:{type:"primary"},on:{click:this.query}},["查询"]),e("a-button",{style:"margin-left: 8px",on:{click:this.reset}},["重置"]),e("a",{attrs:{id:"advance-btn"},style:"margin-left: 8px",on:{click:this.toggleAdvanced}},[this.advanced?"收起":"展开",e("a-icon",{props:Object(n["a"])({},{type:this.advanced?"up":"down"})})])])])}},c={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{md:24,lg:12,xl:8,xxl:6}},l={name:"SearchForm",Item:r,components:{buttonBox:i},props:{col:{type:Number,required:!1,default:6}},provide:function(){return{col:this.col>4?4:this.col}},data:function(){return{advanced:!1,toplist:[],bottomList:[]}},methods:{toggleAdvanced:function(){this.advanced=!this.advanced,this.displayItem()},query:function(){this.$emit("query")},reset:function(){this.$emit("reset")},displayItem:function(){var e=this.$slots.default,t=this.col,o=e.length;if(o<t)document.getElementById("advance-btn").style.display="none";else for(var s=t-1;s<o;s++)e[s].elm.style.display=this.advanced?"":"none"}},mounted:function(){this.displayItem()}},u=l,d=(o("8cc5"),o("2877")),p=Object(d["a"])(u,s,a,!1,null,"359e9f37",null),f=p.exports;t["a"]=f}}]);