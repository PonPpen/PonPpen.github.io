(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45b8f10a"],{"095b":function(t,a,e){"use strict";e("4160"),e("159b");var r=e("cc33"),n=e("d99e"),i=e("07cc"),s=e("007b"),o=e("1f84"),c=e("c1df"),l=e.n(c),u=e("16fe"),h=n["a"].Item,d={name:"Index",components:{SearchForm:n["a"],SearchFormItem:h,AnalysisCard:i["default"]},data:function(){return{rangePickerTime:[],areaModel:[],areaArray:[],options:[],form:{departmentId:null,endTime:"",startTime:"",sjskType:"",timeType:""},tabPosition1:"1",tabPosition:"1",dateFormat:"YYYY/MM/DD",PersonNumber1:"--",PersonNumber2:"--",PersonNumber3:"--",PersonNumber4:"--",PersonNumber5:"--",UrinalysisStatisticsData:[],TreatmentStatisticsData:[],BreachAgreementCountData:[],AbnormalNumberCountData:[],DrugTreatmentRehabilitationSQData:[]}},created:function(){var t={deptKey:1};this.getArea(t),this.initParam(),this.getPersonNumber(this.form),this.getUrinalysisStatistics(this.form),this.getTreatmentStatistics(this.form),this.getBreachAgreementCount(this.form),this.getAbnormalNumberCount(this.form),this.getDrugTreatmentRehabilitationSQ(this.form),this.getInstitutionCount1(),this.getMedicineNum1()},mounted:function(){},computed:{},methods:{initParam:function(){this.form.departmentId=Object(r["f"])().mainDeptId,this.areaModel=[this.form.departmentId],this.form.sjskType="",this.form.timeType=4;var t=Object(u["getTime"])();this.form.startTime=t,this.form.endTime=t,this.rangePickerTime=[l()(t,this.dateFormat),l()(t,this.dateFormat)],console.log("默认参数",this.form)},getArea:function(t){var a=this;s["a"].getDepartmentTree(t).then((function(t){null!==t&&(a.areaArray=t.data,a.areaArray.forEach((function(t,e){a.options.push({value:t.key,label:t.title,children:[]}),console.log("地址",a.areaArray,a.options),t.children&&0!==t.children.length&&t.children.forEach((function(t,r){a.options[e].children.push({value:t.key,label:t.title,children:[]}),t.children&&0!==t.children.length&&t.children.forEach((function(t,n){a.options[e].children[r].children.push({value:t.key,label:t.title,children:[]}),t.children&&t.children.length&&t.children.forEach((function(i,s){a.options[e].children[r].children[n].children.push({value:i.key,label:i.title,children:[]}),i.children&&i.children.length&&i.children.forEach((function(i,o){a.options[e].children[r].children[n].children[s].children.push({value:i.key,label:i.title,children:[]}),i.children&&i.children.length&&t.children.forEach((function(t){a.options[e].children[r].children[n].children[s].children[o].children.push({value:t.key,label:t.title,children:[]})}))}))}))}))}))})))})).catch((function(){}))},onAreaChange:function(t){this.form.departmentId=t[t.length-1],console.log(t[0],this.form.departmentId)},rangePickerChange:function(t){var a=t[0]["_d"].getMonth()+1>=10?t[0]["_d"].getMonth()+1:"0"+(t[0]["_d"].getMonth()+1),e=t[1]["_d"].getMonth()+1>=10?t[1]["_d"].getMonth()+1:"0"+(t[1]["_d"].getMonth()+1),r=t[0]["_d"].getDate()>=10?t[0]["_d"].getDate():"0"+t[0]["_d"].getDate(),n=t[1]["_d"].getDate()>=10?t[1]["_d"].getDate():"0"+t[1]["_d"].getDate();this.form.startTime=t[0]["_d"].getFullYear()+"-"+a+"-"+r,this.form.endTime=t[1]["_d"].getFullYear()+"-"+e+"-"+n},getPersonNumber:function(t){var a=this,e=Object.assign({},t);o["a"].getPersonNumber(e).then((function(t){if(null!==t){var e=t.data;console.log("各种人数统计",e),e.forEach((function(t){switch(t.typeName){case"今日尿检人数":a.PersonNumber1=null!=t.data?t.data:"--";break;case"终止/中止人数":a.PersonNumber4=null!=t.data?t.data:"--";break;case"超/严人数":a.PersonNumber5=null!=t.data?t.data:"--";break}}))}})).catch((function(){}))},getInstitutionCount1:function(){var t=this;o["a"].getInstitutionCount().then((function(a){if(null!==a){var e=a.data;t.PersonNumber3=null!=e?e:"--"}})).catch((function(){}))},getMedicineNum1:function(){var t=this,a=new Date,e=a.getMonth()+1,r=a.getFullYear()+"-"+e+"-"+a.getDate();console.log("时间",r),o["a"].getMedicineNum(r).then((function(a){if(null!==a){var e=a.data[0];t.PersonNumber2=null!=e?e:"--"}})).catch((function(){}))},getUrinalysisStatistics:function(t){var a=this,e=Object.assign({},t);o["a"].getUrinalysisStatistics(e).then((function(t){var e=[],r=[],n=[],i=[];if(null!==t){var s=t.data;a.UrinalysisStatisticsData=t.data,0!==s.length&&(s.forEach((function(t){e.push(a.getRealLength(t.urinalysisLocation,5)),i.push(t.urinalysisLocation),r.push(t.actualUrinalysisNum),n.push(t.shouldUrinalysisNum)})),a.Charts1(e,r,n,i))}}))},getTreatmentStatistics:function(t){var a=this,e=Object.assign({},t),r=[],n=[];this.TreatmentStatisticsData=[],o["a"].getTreatmentStatistics(e).then((function(t){if(null!==t){var e=t.data;a.TreatmentStatisticsData=t.data,0!==e.length&&(e.forEach((function(t){r.push(t.areaName),n.push(t.ratio)})),a.Charts2(r,n))}}))},getpsychotherapyRate:function(t){var a=this,e=Object.assign({},t),r=[],n=[];this.TreatmentStatisticsData=[],o["a"].getTreatmentStatistics(e).then((function(t){if(null!==t){var e=t.data;a.TreatmentStatisticsData=t.data,0!==e.length&&(e.forEach((function(t){r.push(t.areaName),n.push(t.ratio)})),a.Charts2(r,n))}}))},onRadioChange:function(t){"1"===this.tabPosition?this.getTreatmentStatistics(this.form):this.getpsychotherapyRate(this.form)},getBreachAgreementCount:function(t){var a=this,e=Object.assign({},t),r=[],n=[],i=[],s=[],c=[],l=[],u=[],h=[],d=[];this.BreachAgreementCountData=[],o["a"].getBreachAgreementCount(e).then((function(t){if(null!==t){var e=t.data;a.BreachAgreementCountData=t.data,0!==a.BreachAgreementCountData.length&&(e.forEach((function(t){switch(n.push(t.date),r.push(t.typeName),t.type){case 1:i.push(t.count);break;case 2:s.push(t.count);break;case 3:c.push(t.count);break;case 4:l.push(t.count);break;case 5:u.push(t.count);break;case 6:h.push(t.count);break}})),r.forEach((function(t,e){a.data.push({name:t,type:"line",data:d+e})})),a.Charts3(r,n,d))}}))},getAbnormalNumberCount:function(t){var a=this,e=[],r=[],n=[];this.AbnormalNumberCountData=[];var i=Object.assign({},t);i.abnormalType=this.tabPosition1,o["a"].getAbnormalNumber(i).then((function(t){if(null!==t){var i=t.data;a.AbnormalNumberCountData=t.data,0!==a.AbnormalNumberCountData.length&&(i.forEach((function(t){e.push(a.getRealLength(t.areaName,5)),n.push(t.areaName),r.push(t.count)})),a.Charts4(e,r,n))}}))},onRadioChange1:function(t){this.getAbnormalNumberCount(this.form)},getDrugTreatmentRehabilitationSQ:function(t){var a=this,e=Object.assign({},t);this.DrugTreatmentRehabilitationSQData=[];var r=[],n=[];o["a"].getDrugTreatmentRehabilitationSQ(e).then((function(t){if(null!==t){var e=t.data;a.DrugTreatmentRehabilitationSQData=t.data,0!==a.DrugTreatmentRehabilitationSQData.length&&(e.forEach((function(t){r.push(t.date),n.push(t.count)})),a.Charts5(r,n))}}))},onQuery:function(){this.getPersonNumber(this.form),this.getUrinalysisStatistics(this.form),this.getTreatmentStatistics(this.form),this.getBreachAgreementCount(this.form),this.getAbnormalNumberCount(this.form),this.getDrugTreatmentRehabilitationSQ(this.form),this.getInstitutionCount1(),this.getMedicineNum1()},onResetForm:function(){this.initParam()},radioOnChange:function(t){console.log(t.target.value)},getRealLength:function(t,a){var e,r=t.length,n=0,i="";if(r<=a)return t;for(var s=0;s<r;s++)if(e=t.charCodeAt(s),n+=e>=0&&e<=128?.5:1,n>=a){i=t.substring(0,s-1)+"...";break}return n<a&&(i=t),i},Charts1:function(t,a,e,r){var n=this.$echarts.init(document.getElementById("echarts1")),i=["应尿检人数","实际尿检人数"],s=[{name:"应尿检人数",type:"bar",barWidth:25,barCategoryGap:0,data:e,label:{normal:{show:!0,position:"top",fontSize:10,color:"#000"}}},{name:"实际尿检人数",type:"bar",barWidth:25,barGap:"-3%",barCategoryGap:0,data:a,label:{normal:{show:!0,position:"top",fontSize:10,color:"#000"}}}];Object(u["drawBar2Echarts"])(n,i,t,s,r)},Charts2:function(t,a){var e=this.$echarts.init(document.getElementById("echarts2"));Object(u["drawBarEcharts"])(e,t,a)},Charts3:function(t,a,e){var r=this.$echarts.init(document.getElementById("echarts3"));Object(u["drawLineEcharts"])(r,t,a,e)},Charts4:function(t,a,e){var r=this.$echarts.init(document.getElementById("echarts4"));Object(u["drawBarEcharts_xdata_format"])(r,t,a,"",e)},Charts5:function(t,a){var e=this.$echarts.init(document.getElementById("echarts5")),r=[""];Object(u["drawLine2Echarts"])(e,r,t,a)}}};a["a"]=d},3328:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("SplitLayout",{attrs:{contentBg:"#f0f2f5",contentPadding:"20PX 0"}},[e("div",{attrs:{slot:"top"},slot:"top"},[e("SearchForm",{on:{query:t.onQuery,reset:t.onResetForm}},[e("SearchFormItem",{staticStyle:{width:"50%"},attrs:{label:"选择地区:"}},[e("a-cascader",{attrs:{options:t.options,"change-on-select":"",placeholder:"请选择地区"},on:{change:t.onAreaChange},model:{value:t.areaModel,callback:function(a){t.areaModel=a},expression:"areaModel"}})],1),e("SearchFormItem",{staticStyle:{width:"50%"},attrs:{label:"选择人员类型:"}},[e("a-select",{staticStyle:{width:"100%"},attrs:{defaulValue:""},model:{value:t.form.sjskType,callback:function(a){t.$set(t.form,"sjskType",a)},expression:"form.sjskType"}},[e("a-select-option",{attrs:{value:""}},[t._v("全部")]),e("a-select-option",{attrs:{value:"1"}},[t._v("社戒人员")]),e("a-select-option",{attrs:{value:"2"}},[t._v("社康人员")])],1)],1),e("SearchFormItem",{staticStyle:{width:"100%"},attrs:{label:"选择统计时间:"}},[e("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:t.form.timeType,callback:function(a){t.$set(t.form,"timeType",a)},expression:"form.timeType"}},[e("a-radio",{attrs:{value:1}},[t._v(" 年 ")]),e("a-radio",{attrs:{value:2}},[t._v(" 季度 ")]),e("a-radio",{attrs:{value:3}},[t._v(" 月 ")]),e("a-radio",{attrs:{value:4}},[t._v(" 自定义 ")])],1),e("a-range-picker",{attrs:{"default-value":[t.moment("2020/01/01",t.dateFormat),t.moment("2020/01/01",t.dateFormat)],format:t.dateFormat},on:{change:t.rangePickerChange},model:{value:t.rangePickerTime,callback:function(a){t.rangePickerTime=a},expression:"rangePickerTime"}})],1)],1)],1),e("div",[e("a-row",{attrs:{gutter:[16,16]}},[e("a-col",{staticClass:"gutter-row",attrs:{span:24}},[e("div",{staticClass:"gutter-box"},[e("AnalysisCard",{attrs:{label:"新增社戒社康人员情况"}},[e("div",{staticClass:"echarts",attrs:{id:"person-echarts"}},[0===t.drugFundsSourceData.length?e("div",{staticClass:"no-data"},[t._v("暂无数据")]):t._e()])])],1)])],1),e("a-row",{attrs:{gutter:[16,16]}},[e("a-col",{staticClass:"gutter-row",attrs:{span:12}},[e("div",{staticClass:"gutter-box"},[e("AnalysisCard",{attrs:{label:"人员地域分布情况"}},[e("div",{staticClass:"echarts",attrs:{id:"age-echarts"}},[0===t.drugFundsSourceData.length?e("div",{staticClass:"no-data"},[t._v("暂无数据")]):t._e()])])],1)]),e("a-col",{staticClass:"gutter-row",attrs:{span:12}},[e("div",{staticClass:"gutter-box"},[e("AnalysisCard",{attrs:{label:"人员分布情况"}},[e("div",{staticClass:"echarts",attrs:{id:"sex-echarts"}},[0===t.drugFundsSourceData.length?e("div",{staticClass:"no-data"},[t._v("暂无数据")]):t._e()])])],1)])],1),e("a-row",{attrs:{gutter:[16,16]}},[e("a-col",{staticClass:"gutter-row",attrs:{span:24}},[e("div",{staticClass:"gutter-box gutter-box-wrap"},[e("div",{staticClass:"radio-wrap"},[e("a-radio-group",{staticStyle:{margin:"8px"},model:{value:t.tabPosition,callback:function(a){t.tabPosition=a},expression:"tabPosition"}},[e("a-radio-button",{attrs:{value:"top"}},[t._v(" 社区戒毒/康复 ")]),e("a-radio-button",{attrs:{value:"bottom"}},[t._v(" 戒毒康复场所 ")])],1)],1),e("AnalysisCard",{attrs:{label:"戒毒/康复情况统计"}},[e("div",{staticClass:"echarts",attrs:{id:"recovery-echarts"}},[0===t.drugFundsSourceData.length?e("div",{staticClass:"no-data"},[t._v("暂无数据")]):t._e()])])],1)])],1),e("a-row",{attrs:{gutter:[16,16]}},[e("a-col",{staticClass:"gutter-row",attrs:{span:12}},[e("div",{staticClass:"gutter-box gutter-box-wrap"},[e("div",{staticClass:"radio-wrap"},[e("a-radio-group",{staticStyle:{margin:"8px"},model:{value:t.tabPosition,callback:function(a){t.tabPosition=a},expression:"tabPosition"}},[e("a-radio-button",{attrs:{value:"top"}},[t._v(" 助业安置机构/康复站 ")]),e("a-radio-button",{attrs:{value:"bottom"}},[t._v(" 社会面 ")])],1)],1),e("AnalysisCard",{attrs:{label:"安置恢复情况统计"}},[e("div",{staticClass:"echarts",attrs:{id:"culture-echarts"}},[0===t.drugFundsSourceData.length?e("div",{staticClass:"no-data"},[t._v("暂无数据")]):t._e()])])],1)]),e("a-col",{staticClass:"gutter-row",attrs:{span:12}},[e("div",{staticClass:"gutter-box gutter-box-wrap"},[e("div",{staticClass:"radio-wrap"},[e("a-radio-group",{staticStyle:{margin:"8px"},model:{value:t.tabPosition,callback:function(a){t.tabPosition=a},expression:"tabPosition"}},[e("a-radio-button",{attrs:{value:"top"}},[t._v(" 药物维持治疗点 ")]),e("a-radio-button",{attrs:{value:"bottom"}},[t._v(" 特殊病区 ")])],1)],1),e("AnalysisCard",{attrs:{label:"治疗情况统计"}},[e("div",{staticClass:"echarts",attrs:{id:"dangerous-echarts"}})])],1)])],1)],1)])},n=[],i=e("095b"),s=(e("af25"),e("2877")),o=Object(s["a"])(i["a"],r,n,!1,null,"2a29d9c8",null);a["default"]=o.exports},af25:function(t,a,e){"use strict";var r=e("e103"),n=e.n(r);n.a},e103:function(t,a,e){}}]);