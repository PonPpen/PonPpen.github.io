(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14bdab88"],{7174:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tree-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",treeCheckable:e.mulSelect,treeData:e.treeData,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:"请选择",allowClear:"",disabled:e.disabled,treeDefaultExpandAll:e.treeDefaultExpandAll,treeDefaultExpandedKeys:e.defaultExpandedKeys},on:{change:e.change},model:{value:e.selectDep,callback:function(t){e.selectDep=t},expression:"selectDep"}})},n=[],i=(a("4160"),a("c975"),a("a9e3"),a("159b"),function e(t){for(var a=0;a<t.length;a++)t[a].value=t[a].key,t[a].status&&(t[a].disabled=!0),t[a].children.length>0&&e(t[a].children,t[a].key,t[a].title);return t}),s={name:"depTreeSelect",data:function(){return{treeData:[],selectDep:"",defaultExpandedKeys:[]}},props:{mulSelect:{type:Boolean,default:!1,required:!1},disabledList:{type:Array,default:function(){return[]},required:!1},selectDepData:{type:[Number,String,Array],default:null,required:!1},disabled:{type:Boolean,default:!1,required:!1},treeDefaultExpandAll:{type:Boolean,default:!1}},watch:{selectDepData:{handler:function(e,t){e&&(this.selectDep=e,this.defaultExpandedKeys.push(e))},immediate:!0}},methods:{change:function(e){this.$emit("getValue",e)},clear:function(){}},created:function(){var e=this,t=this.$store.state.SysDepartment.treeData;t=i(t),t.length>0&&t.forEach((function(t){t.children&&t.children.length>0&&e.defaultExpandedKeys.push(t.children[0].key)})),this.treeData=t}},l=s,u=a("2877"),o=Object(u["a"])(l,r,n,!1,null,null,null);t["a"]=o.exports},ad0b:function(e,t,a){},c1ee:function(e,t,a){"use strict";var r=a("ad0b"),n=a.n(r);n.a},c6f6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("PageView",[a("a-card",{attrs:{bordered:!1}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formItemLayout,!1),[a("a-spin",{attrs:{spinning:e.spinning,delay:500}},[a("div",{staticClass:"form-title"},[e._v("个人基本信息")]),a("a-form-item",{attrs:{label:"上传头像：",extra:"图片格式为jpg、png，图片大小不超过2M"}},[a("UploadAvatar",{directives:[{name:"decorator",rawName:"v-decorator",value:["headImg",{initialValue:e.userInfo.headImg,rules:e.rules.headImg}],expression:"[ 'headImg', { initialValue: userInfo.headImg, rules: rules.headImg } ]"}],attrs:{imgURL:e.userInfo.headImg,disabled:e.isDetailed},on:{getAvatar:e.getAvatar}})],1),a("a-form-item",{attrs:{label:"姓名","has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.userInfo.name,rules:e.rules.name}],expression:"[ 'name', { initialValue: userInfo.name, rules: rules.name } ]"}],attrs:{disabled:e.isDetailed,placeholder:"请输入姓名"}})],1),a("a-form-item",{attrs:{label:"身份证","has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["idCard",{initialValue:e.userInfo.idCard,rules:e.rules.idCard}],expression:"[ 'idCard', { initialValue: userInfo.idCard, rules: rules.idCard } ]"}],attrs:{disabled:e.isDetailed,placeholder:"请输入身份证"}})],1),a("a-form-item",{attrs:{label:"性别","has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sex",{initialValue:e.userInfo.sex,rules:e.rules.sex}],expression:"[ 'sex', { initialValue: userInfo.sex, rules: rules.sex } ]"}],attrs:{disabled:e.isDetailed,placeholder:"请选择性别"}},e._l(e.sexDictionary,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"出生日期","has-feedback":""}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["birthday",{initialValue:e.userInfo.birthday,rules:e.rules.birthday}],expression:"[ 'birthday', { initialValue: userInfo.birthday, rules: rules.birthday }, ]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD","disabled-date":e.disabledDate,"disabled-time":e.disabledDateTime,disabled:e.isDetailed}})],1),a("a-form-item",{attrs:{label:"民族","has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["nation",{initialValue:e.userInfo.nation,rules:e.rules.nation}],expression:"[ 'nation', { initialValue: userInfo.nation, rules: rules.nation } ]"}],attrs:{disabled:e.isDetailed,placeholder:"请选择民族"}},e._l(e.nationDictionary,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"联系方式","has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{initialValue:e.userInfo.phone,rules:e.rules.phone}],expression:"[ 'phone', { initialValue: userInfo.phone, rules: rules.phone } ]"}],attrs:{disabled:e.isDetailed,placeholder:"请输入用户联系方式"}})],1),a("a-form-item",{attrs:{label:"毕业院校","has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["school",{initialValue:e.userInfo.school,rules:e.rules.school}],expression:"[ 'school', { initialValue: userInfo.school, rules: rules.school } ]"}],attrs:{disabled:e.isDetailed,placeholder:"请输入毕业院校"}})],1),a("a-form-item",{attrs:{label:"学历","has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["education",{initialValue:e.userInfo.education,rules:e.rules.education}],expression:"[ 'education', { initialValue: userInfo.education, rules: rules.education } ]"}],attrs:{disabled:e.isDetailed,placeholder:"请选择学历"}},e._l(e.eduDictionary,(function(t,r){return a("a-select-option",{key:r,attrs:{value:Number(t.value)}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"专业","has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["major",{initialValue:e.userInfo.major,rules:e.rules.major}],expression:"[ 'major', { initialValue: userInfo.major, rules: rules.major } ]"}],attrs:{disabled:e.isDetailed,placeholder:"请输入专业"}})],1),a("a-form-item",{attrs:{label:"现在居住地","has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{initialValue:e.userInfo.address,rules:e.rules.address}],expression:"[ 'address', { initialValue: userInfo.address, rules: rules.address } ]"}],attrs:{disabled:e.isDetailed,placeholder:"请输入现在居住地"}})],1),a("div",{staticClass:"form-title"},[e._v("账号信息")]),a("a-form-item",{attrs:{label:"用户编号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userCode",{initialValue:e.userInfo.userCode,rules:e.rules.userCode}],expression:"['userCode', { initialValue: userInfo.userCode, rules: rules.userCode }]"}],attrs:{disabled:!0,placeholder:"请输入用户编号"}})],1),a("div",{staticClass:"form-title"},[e._v("组织关系")]),a("a-form-item",{attrs:{label:"主属部门","has-feedback":""}},[e.loadingData?a("DepTreeSelect",{directives:[{name:"decorator",rawName:"v-decorator",value:["mainDeptId",{initialValue:e.currentDep,rules:e.rules.currentDep}],expression:"[ 'mainDeptId', { initialValue: currentDep, rules: rules.currentDep } ]"}],ref:"mainDep",attrs:{selectDepData:e.currentDep,disabled:!0},on:{getValue:e.getMainDep}}):e._e()],1),a("a-form-item",{attrs:{label:"附属部门","has-feedback":""}},[e.loadingData?a("DepMulTreeSelect",{directives:[{name:"decorator",rawName:"v-decorator",value:["deptIds"],expression:"['deptIds']"}],ref:"subDep",attrs:{disabled:!0},on:{getValue:e.getDep}}):e._e()],1),a("a-form-item",{attrs:{label:"职位","has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["jobName",{initialValue:e.userInfo.jobName,rules:e.rules.jobName}],expression:"[ 'jobName', { initialValue: userInfo.jobName, rules: rules.jobName } ]"}],attrs:{disabled:!0,placeholder:"请选择职位"}},e._l(e.postDictionary,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[e.isDetailed?a("a-button",{attrs:{type:"primary",size:"large"},on:{click:e.subButton}},[e._v(" 编辑 ")]):e._e(),e.isDetailed?e._e():a("a-button",{staticStyle:{"margin-right":"20px"},attrs:{size:"large"},on:{click:e.subButton}},[e._v(" 返回 ")]),e.isDetailed?e._e():a("a-button",{attrs:{type:"primary",size:"large","html-type":"submit"},on:{click:e.submit}},[e._v(" 确定 ")])],1)],1)],1)],1)],1)},n=[],i=(a("a434"),a("5530")),s=(a("96cf"),a("1da1")),l=a("c1df"),u=a.n(l),o=a("2f62"),d=a("cc33"),c=a("cf45"),p=a("7174"),f=a("e4c7"),m=a("418e"),h={components:{DepTreeSelect:p["a"],DepMulTreeSelect:f["a"],UploadAvatar:m["a"]},data:function(){return{currentDep:"",mainDep:"",dep:"",visible:!1,autoCompleteResult:[],form:this.$form.createForm(this),formItemLayout:{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:13}}},fileList:[],eduDictionary:[],sexDictionary:[],nationDictionary:[],postDictionary:[],spinning:!1,userId:"",userInfo:{},isDetailed:!1,loadingData:!1,rules:{headImg:[{required:!1,message:"请上传照片"}],name:[{required:!0,message:"请输入姓名"},{validator:c["g"]}],idCard:[{required:!1,message:"请输入身份证"},{validator:c["f"]}],sex:[{required:!0,message:"请选择性别"}],birthday:[{required:!1,message:"请选择出生日期"}],nation:[{required:!1,message:"请选择民族"}],phone:[{required:!0,message:"请输入用户联系方式"},{validator:c["h"]}],school:[{required:!1,message:"请输入毕业院校"},{validator:c["j"]}],education:[{required:!1,message:"请选择学历"}],major:[{required:!1,message:"请输入专业"},{validator:c["i"]}],address:[{required:!1,message:"请输入现在居住地"},{validator:c["a"]}],userCode:[{required:!1,message:"请输入用户编号"}],password:[{required:!0,message:"请输入密码"}],passwordNews:[{required:!0,message:"请输入确认新密码"}],currentDep:[{required:!0,message:"请输入用户主属部门"}],jobName:[{required:!0,message:"请选择职位"}]}}},props:{title:{type:String,default:"",required:!1}},watch:{visible:function(e){this.$refs.modal.visible=e},currentDep:function(e){this.$refs.mainDep.selectDep=e}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(d["f"])().tenantId,t.next=3,e.onChildDictionary({parentId:"149"});case 3:return e.sexDictionary=t.sent,t.next=6,e.onChildDictionary({parentId:"147"});case 6:return e.nationDictionary=t.sent,t.next=9,e.onChildDictionary({parentId:"152"});case 9:return e.eduDictionary=t.sent,t.next=12,e.onChildDictionary({majorKey:a+"_POSITION"});case 12:e.postDictionary=t.sent,e.initialize();case 14:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({moment:u.a},Object(o["b"])({addUser:"SysUser/onAdd",onChildDictionary:"SysDictionary/onChildDictionary",onGetDetail:"SysUser/onDetail",onUpdate:"SysUser/onUpdate",getDepTree:"SysDepartment/getTree"})),{},{disabledDate:function(e){return e&&e>u()().endOf("day")},disabledDateTime:function(){var e=this;return{disabledHours:function(){return e.range(0,24).splice(4,20)},disabledMinutes:function(){return e.range(30,60)},disabledSeconds:function(){return[55,56]}}},getMainDep:function(e){this.mainDep=e},getDep:function(e){this.dep=e},initialize:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.query.userId){t.next=7;break}return e.isDetailed=!0,e.userId=e.$route.query.userId,t.next=5,e.getDepTree();case 5:return t.next=7,e.getDetail();case 7:case"end":return t.stop()}}),t)})))()},getDetail:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingData=!0,e.spinning=!0,t.next=4,e.onGetDetail(e.userId);case 4:a=t.sent,a&&(e.userInfo=a,e.mainDep=a.mainDeptId,e.currentDep=e.mainDep,e.dep=a.deptIds,e.$refs.mainDep.selectDep=e.mainDep,e.$refs.subDep.selectDep=e.dep,e.spinning=!1);case 6:case"end":return t.stop()}}),t)})))()},handOnUpdate:function(e){var t=this;e.userId=this.userId,this.onUpdate(e).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===a){e.next=4;break}return e.next=3,t.$message.success("用户修改成功");case 3:t.isDetailed=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},submit:function(){var e=this,t=this.form.getFieldsValue();t.mainDeptId=this.mainDep;for(var a=this.dep,r=[],n=0;n<a.length;n++)""!=a[n]&&void 0!=a&&r.push(a[n]);t.deptIds=r,e.form.setFieldsValue(t),e.form.validateFieldsAndScroll((function(t,a){t?e.pop.loading=!1:e.handOnUpdate(a)}))},subButton:function(){this.isDetailed=!this.isDetailed,this.$route.meta.title=this.isDetailed?"用户详情":"编辑用户详情"},getAvatar:function(e){var t=this.form.getFieldsValue();t.headImg=e,this.form.setFieldsValue(t)}})},D=h,v=(a("c1ee"),a("2877")),g=Object(v["a"])(D,r,n,!1,null,"152e5a6c",null);t["default"]=g.exports},cf45:function(e,t,a){"use strict";a.d(t,"h",(function(){return r})),a.d(t,"l",(function(){return n})),a.d(t,"f",(function(){return i})),a.d(t,"g",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"j",(function(){return u})),a.d(t,"i",(function(){return o})),a.d(t,"k",(function(){return d})),a.d(t,"m",(function(){return c})),a.d(t,"o",(function(){return p})),a.d(t,"p",(function(){return f})),a.d(t,"n",(function(){return m})),a.d(t,"q",(function(){return h})),a.d(t,"c",(function(){return D})),a.d(t,"b",(function(){return v})),a.d(t,"d",(function(){return g})),a.d(t,"e",(function(){return b}));a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("1276");function r(e,t,a){var r=new RegExp(/^((\+?86)|(\(\+86\)))?1[3456789]\d{9}$/);t&&!r.test(t)?a("当前联系方式不符合规范!"):a()}function n(e,t,a){var r=new RegExp(/^([0-9]{3,4}-)?[0-9]{7,8}$/);t&&!r.test(t)?a("当前联系方式不符合规范!"):a()}function i(e,t,a){var r=new RegExp(/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/);t&&!r.test(t)?a("当前身份证不符合规范!"):a()}function s(e,t,a){var r=new RegExp(/^[\u0391-\uFFE5A-Za-z]+$/);t&&!r.test(t)?a("姓名不符合规范，只允许输入汉字和英文!"):t&&t.length<2?a("姓名长度不能小于1个字符"):t&&t.length>20?a("输入长度不能大于20个字符"):a()}function l(e,t,a){var r=new RegExp(/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]|[()（）{}]){1,20}$/);t&&!r.test(t)?a("现在居住地不符合规范，包含中英文字母数字或下划线!"):t&&t.length<2?a("现在居住地长度不能小于1个字符"):a()}function u(e,t,a){var r=new RegExp(/^[\u0391-\uFFE5A-Za-z]+$/);t&&!r.test(t)?a("毕业院校不符合规范，只允许输入汉字和英文!"):t&&t.length<2?a("毕业院校长度不能小于1个字符"):a()}function o(e,t,a){var r=new RegExp(/^[\u0391-\uFFE5A-Za-z]+$/);t&&!r.test(t)?a("专业不符合规范，只允许输入汉字和英文!"):t&&t.length<2?a("专业长度不能小于1个字符"):a()}function d(e,t,a){var r=new RegExp(/^([a-zA-Z0-9_-]){1,999}$/);t&&!r.test(t)?a("输入不规范，只允许输入字母、数字以及符号_-"):t&&t.length<2?a("输入长度不能小于1个字符"):a()}function c(e,t,a){var r=new RegExp(/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]|[()（）{}]){1,999}$/);t&&!r.test(t)?a("输入不规范，不允许输入特殊字符！"):t&&t.length<2?a("输入长度不能小于1个字符"):a()}function p(e,t,a){var r=new RegExp(/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]|[()（）{},.，。/+]){1,999}$/);t&&!r.test(t)?a("输入不规范，不允许输入特殊字符！"):t&&t.length<2?a("输入长度不能小于1个字符"):t&&t.length>20?a("输入长度不能大于20个字符"):a()}function f(e,t,a){var r=new RegExp(/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]|[()（）{},.，。/+]){1,999}$/);t&&!r.test(t)?a("输入不规范，不允许输入特殊字符！"):t&&t.length<2?a("输入长度不能小于1个字符"):t&&t.length>50?a("输入长度不能大于50个字符"):a()}function m(e,t,a){var r=new RegExp(/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]|[()（）{},.，。/+]){1,999}$/);t&&!r.test(t)?a("输入不规范，不允许输入特殊字符！"):t&&t.length<2?a("输入长度不能小于1个字符"):t&&t.length>100?a("输入长度不能大于100个字符"):a()}function h(e,t,a){var r=new RegExp(/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]|[()（）{},.，。/+]){1,999}$/);t&&!r.test(t)?a("输入不规范，不允许输入特殊字符！"):t&&t.length<2?a("输入长度不能小于1个字符"):t&&t.length>500?a("输入长度不能大于500个字符"):a()}function D(e,t){if(""!=e&&""!=t&&void 0!=e&&void 0!=t&&null!=e&&null!=t){var a=e.split("-"),r=t.split("-"),n=a[0]+"/"+a[1]+"/"+a[2],i=r[0]+"/"+r[1]+"/"+r[2];return n>=i}}function v(e,t){var a=new Date,r="";return r=e.replace(/-/g,"/"),r=new Date(r),r.valueOf()>a.valueOf()}function g(e,t,a){return Date.parse(e)>=Date.parse(t)||Date.parse(e)>=Date.parse(a)||Date.parse(t)>Date.parse(a)||Date.parse(a)==Date.parse(t)&&Date.parse(a)<Date.parse(e)||Date.parse(a)==Date.parse(t)&&Date.parse(t)<Date.parse(e)||Date.parse(a)>Date.parse(e)&&Date.parse(a)<Date.parse(t)}function b(e,t){var a=Date.parse(e),r=Date.parse(t);if(a>r)return 0;if(a==r)return 1;var n=(r-a)/864e5;return n}},e4c7:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tree-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",treeCheckable:!0,treeData:e.treeData,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:"请选择",allowClear:"",disabled:e.disabled,treeDefaultExpandAll:e.treeDefaultExpandAll,treeDefaultExpandedKeys:e.defaultExpandedKeys},on:{change:e.change},model:{value:e.selectDep,callback:function(t){e.selectDep=t},expression:"selectDep"}})},n=[],i=(a("4160"),a("c975"),a("159b"),function e(t){for(var a=0;a<t.length;a++)t[a].value=t[a].key,t[a].children.length>0&&e(t[a].children,t[a].key,t[a].title);return t}),s={name:"depTreeSelect",data:function(){return{treeData:[],selectDep:[],defaultExpandedKeys:[]}},props:{disabledList:{type:Array,default:function(){return[]},required:!1},disabled:{type:Boolean,default:!1,required:!1},treeDefaultExpandAll:{type:Boolean,default:!1}},watch:{selectDep:function(e){var t=this.$store.state.SysDepartment.treeData;t=i(t),t.length>0&&t.forEach((function(e){return e.disabled=!0})),this.treeData=t,0===e&&(this.selectDep=t[0].key)}},methods:{change:function(e){this.$emit("getValue",e)},clear:function(){this.selectDep=null}},created:function(){var e=this,t=this.$store.state.SysDepartment.treeData;console.log(t),t=i(t),t.length>0&&t.forEach((function(t){t.children&&t.children.length>0&&(t.disabled=!0,e.defaultExpandedKeys.push(t.children[0].key))})),this.treeData=t}},l=s,u=a("2877"),o=Object(u["a"])(l,r,n,!1,null,null,null);t["a"]=o.exports}}]);