(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da50035e"],{"51d5":function(t,e,a){"use strict";var r=a("ad2f"),n=a.n(r);n.a},ad2f:function(t,e,a){},ffbd:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PageView",[a("SplitLayout",{attrs:{contentBg:"#f0f2f5",contentPadding:"10PX 0"}},[a("div",{attrs:{slot:"top"},slot:"top"},[a("SearchForm",{on:{query:t.onQuery,reset:t.onResetForm}},[a("SearchFormItem",{staticStyle:{width:"40%"},attrs:{label:"选择地区:"}},[a("a-cascader",{staticStyle:{width:"100%"},attrs:{options:t.options,"change-on-select":"",placeholder:"请选择地区"},on:{change:t.onAreaChange},model:{value:t.areaModel,callback:function(e){t.areaModel=e},expression:"areaModel"}})],1),a("SearchFormItem",{staticStyle:{width:"41.5%"},attrs:{label:"选择人员类型:"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{defaulValue:""},model:{value:t.form.sjskType,callback:function(e){t.$set(t.form,"sjskType",e)},expression:"form.sjskType"}},[a("a-select-option",{attrs:{value:""}},[t._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[t._v("社戒人员")]),a("a-select-option",{attrs:{value:"2"}},[t._v("社康人员")])],1)],1),a("SearchFormItem",{staticStyle:{width:"100%"},attrs:{label:"选择统计时间:"}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:t.form.timeType,callback:function(e){t.$set(t.form,"timeType",e)},expression:"form.timeType"}},[a("a-radio",{attrs:{value:1}},[t._v(" 年 ")]),a("a-radio",{attrs:{value:2}},[t._v(" 季度 ")]),a("a-radio",{attrs:{value:3}},[t._v(" 月 ")]),a("a-radio",{attrs:{value:4}},[t._v(" 自定义 ")])],1),a("a-range-picker",{attrs:{"default-value":[t.moment("2020/01/01",t.dateFormat),t.moment("2020/01/01",t.dateFormat)],format:t.dateFormat},on:{change:t.rangePickerChange},model:{value:t.rangePickerTime,callback:function(e){t.rangePickerTime=e},expression:"rangePickerTime"}})],1)],1)],1),a("div",[a("a-row",{attrs:{gutter:[16,16]}},[a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("div",{staticClass:"gutter-box"},[a("AnalysisCard",{attrs:{label:"通话量分析"}},[a("div",{staticClass:"echarts",attrs:{id:"echarts1"}},[0===t.abnormalNumberData.length?a("div",{staticClass:"no-data"},[t._v("暂无数据")]):t._e()])])],1)]),a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("div",{staticClass:"gutter-box"},[a("AnalysisCard",{attrs:{label:"短信量分析"}},[a("div",{staticClass:"echarts",attrs:{id:"echarts2"}},[0===t.SmsNumberData.length?a("div",{staticClass:"no-data"},[t._v("暂无数据")]):t._e()])])],1)])],1),a("a-row",{attrs:{gutter:[16,16]}},[a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("div",{staticClass:"gutter-box"},[a("AnalysisCard",{attrs:{label:"通话时段分析"}},[a("div",{staticClass:"echarts",attrs:{id:"echarts3"}},[0===t.BreachAgreementCountData.length?a("div",{staticClass:"no-data"},[t._v("暂无数据")]):t._e()])])],1)]),a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("div",{staticClass:"gutter-box"},[a("AnalysisCard",{attrs:{label:"短信时段分析"}},[a("div",{staticClass:"echarts",attrs:{id:"echarts4"}},[0===t.SmsTimeIntervalData.length?a("div",{staticClass:"no-data"},[t._v("暂无数据")]):t._e()])])],1)])],1)],1)])],1)},n=[],i=(a("4160"),a("b0c0"),a("a9e3"),a("159b"),a("cc33")),s=a("d99e"),o=a("07cc"),c=a("007b"),l=a("5b1d"),h=a("c1df"),d=a.n(h),m=a("16fe"),u=s["a"].Item,f={name:"Index",components:{SearchForm:s["a"],SearchFormItem:u,AnalysisCard:o["default"]},data:function(){return{rangePickerTime:[],areaModel:[],areaArray:[],options:[],form:{departmentId:null,endTime:"",startTime:"",sjskType:"",timeType:""},tabPosition:"top",dateFormat:"YYYY/MM/DD",abnormalNumberData:[],BreachAgreementCountData:[],SmsNumberData:[],SmsTimeIntervalData:[]}},created:function(){var t={deptKey:1};this.getArea(t),this.initParam(),this.getAbnormalNumber(this.form),this.getSmsNumber(this.form),this.getBreachAgreementCount(this.form),this.getSmsTimeInterval(this.form)},mounted:function(){},methods:{initParam:function(){this.form.departmentId=Object(i["f"])().mainDeptId,this.areaModel=[this.form.departmentId],this.form.sjskType="",this.form.timeType=4;var t=Object(m["getTime"])();this.form.startTime=t,this.form.endTime=t,this.rangePickerTime=[d()(t,this.dateFormat),d()(t,this.dateFormat)],console.log("默认参数",this.form)},getArea:function(t){var e=this;c["a"].getDepartmentTree(t).then((function(t){null!==t&&(e.areaArray=t.data,e.areaArray.forEach((function(t,a){e.options.push({value:t.key,label:t.title,children:[]}),console.log("地址",e.areaArray,e.options),t.children&&0!==t.children.length&&t.children.forEach((function(t,r){e.options[a].children.push({value:t.key,label:t.title,children:[]}),t.children&&0!==t.children.length&&t.children.forEach((function(t,n){e.options[a].children[r].children.push({value:t.key,label:t.title,children:[]}),t.children&&t.children.length&&t.children.forEach((function(i,s){e.options[a].children[r].children[n].children.push({value:i.key,label:i.title,children:[]}),i.children&&i.children.length&&i.children.forEach((function(i,o){e.options[a].children[r].children[n].children[s].children.push({value:i.key,label:i.title,children:[]}),i.children&&i.children.length&&t.children.forEach((function(t){e.options[a].children[r].children[n].children[s].children[o].children.push({value:t.key,label:t.title,children:[]})}))}))}))}))}))})))})).catch((function(){}))},onAreaChange:function(t){this.form.departmentId=Number(t[0]),console.log(t[0],this.form.departmentId)},rangePickerChange:function(t){var e=t[0]["_d"].getMonth()+1>=10?t[0]["_d"].getMonth()+1:"0"+(t[0]["_d"].getMonth()+1),a=t[1]["_d"].getMonth()+1>=10?t[1]["_d"].getMonth()+1:"0"+(t[1]["_d"].getMonth()+1),r=t[0]["_d"].getDate()>=10?t[0]["_d"].getDate():"0"+t[0]["_d"].getDate(),n=t[1]["_d"].getDate()>=10?t[1]["_d"].getDate():"0"+t[1]["_d"].getDate();this.form.startTime=t[0]["_d"].getFullYear()+"-"+e+"-"+r,this.form.endTime=t[1]["_d"].getFullYear()+"-"+a+"-"+n},getAbnormalNumber:function(t){var e=this,a=[],r=[],n=Object.assign({},t);l["a"].getCallCount(n).then((function(t){if(null!==t){var n=t.data;e.abnormalNumberData=t.data,0!==n.length&&(n.forEach((function(t){a.push({value:t.count,name:t.name}),r.push({ratio:t.ratio})})),e.Charts1(a,r))}})).catch((function(){}))},getSmsNumber:function(t){var e=this,a=[],r=[],n=Object.assign({},t);l["a"].getSmsNumber(n).then((function(t){if(null!==t){var n=t.data;e.SmsNumberData=t.data,0!==n.length&&(n.forEach((function(t){a.push({value:t.count,name:t.name}),r.push({ratio:t.ratio})})),e.Charts2(a,r))}})).catch((function(){}))},getBreachAgreementCount:function(t){var e=this,a=[],r=[],n=Object.assign({},t);l["a"].getCallTimeInterval(n).then((function(t){if(null!==t){var n=t.data;e.BreachAgreementCountData=t.data,0!==n.length&&(n.forEach((function(t){a.push(t.timeInterval),r.push(t.number)})),e.Charts3(a,r))}})).catch((function(){}))},getSmsTimeInterval:function(t){var e=this,a=[],r=[],n=Object.assign({},t);l["a"].getSmsTimeInterval(n).then((function(t){if(null!==t){var n=t.data;e.SmsTimeIntervalData=t.data,0!==n.length&&(n.forEach((function(t){a.push(t.timeInterval),r.push(t.number)})),e.Charts4(a,r))}})).catch((function(){}))},onQuery:function(){this.getAbnormalNumber(this.form),this.getSmsNumber(this.form),this.getBreachAgreementCount(this.form),this.getSmsTimeInterval(this.form)},onResetForm:function(){this.initParam()},radioOnChange:function(t){console.log(t.target.value)},Charts1:function(t,e){var a=this.$echarts.init(document.getElementById("echarts1")),r=["25%","53%"],n=[0,100],i="middle";Object(m["drawPieEcharts"])(a,r,n,i,t,e,160,"人")},Charts2:function(t,e){var a=this.$echarts.init(document.getElementById("echarts2")),r=["25%","53%"],n=[0,100],i="middle";Object(m["drawPieEcharts"])(a,r,n,i,t,e,160,"人")},Charts3:function(t,e){var a=this.$echarts.init(document.getElementById("echarts3")),r=[""];Object(m["drawLine2Echarts"])(a,r,t,e)},Charts4:function(t,e){var a=this.$echarts.init(document.getElementById("echarts4")),r=[""];Object(m["drawLine2Echarts"])(a,r,t,e)}}},g=f,v=(a("51d5"),a("2877")),p=Object(v["a"])(g,r,n,!1,null,"0ef5d485",null);e["default"]=p.exports}}]);