(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-196d733a"],{a774:function(t,e,a){"use strict";var r=a("b4d8"),o=a.n(r);o.a},b4d8:function(t,e,a){},cf54:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("SplitLayout",[a("a-spin",{attrs:{spinning:!1}},[a("div",{staticClass:"container"},[a("div",{staticClass:"top",staticStyle:{margin:"0 0 25px 30px"},attrs:{slot:"top"},slot:"top"},[t._v(" 人员基本信息 ")]),a("a-form-model",{ref:"formModal",staticStyle:{"margin-left":"30px"},attrs:{model:t.form,rules:t.rules,labelCol:{span:24},wrapperCol:{span:16}}},[a("a-form-model-item",[a("UploadAvatar",{attrs:{avatarType:2,imgURL:t.form.avatar,disabled:t.disabledObj.avatar},on:{getAvatar:t.getAvatar}})],1),a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"certificateType",label:"证件类型"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isEdit},model:{value:t.form.certificateType,callback:function(e){t.$set(t.form,"certificateType",e)},expression:"form.certificateType"}},[a("a-select-option",{attrs:{value:1}},[t._v("居民身份证")]),a("a-select-option",{attrs:{value:2}},[t._v("侨胞证")]),a("a-select-option",{attrs:{value:3}},[t._v("港澳通行证")]),a("a-select-option",{attrs:{value:4}},[t._v("驾驶证")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"btn",staticStyle:{position:"relative"},attrs:{prop:"identityCard",label:"证件号"}},[a("a-input",{attrs:{disabled:t.isEdit},model:{value:t.form.identityCard,callback:function(e){t.$set(t.form,"identityCard",e)},expression:"form.identityCard"}}),a("a-spin",{staticStyle:{position:"absolute",right:"-85px",top:"-10px"},attrs:{spinning:t.btnLoading}},[a("a-button",{attrs:{disabled:t.isEdit,type:"primary"},on:{click:t.get_info}},[t._v("查询")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"realName",label:"姓名"}},[a("a-input",{attrs:{disabled:t.disabledObj.realName},model:{value:t.form.realName,callback:function(e){t.$set(t.form,"realName",e)},expression:"form.realName"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"nickName",label:"别名:绰号"}},[a("a-input",{attrs:{disabled:t.disabledObj.nickName},model:{value:t.form.nickName,callback:function(e){t.$set(t.form,"nickName",e)},expression:"form.nickName"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"sex",label:"性别"}},[a("a-select",{attrs:{disabled:t.disabledObj.sex},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("a-select-option",{attrs:{value:1}},[t._v("男")]),a("a-select-option",{attrs:{value:2}},[t._v("女")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"nationality",label:"国籍"}},[a("a-select",{attrs:{disabled:t.disabledObj.nationality,"show-search":""},model:{value:t.form.nationality,callback:function(e){t.$set(t.form,"nationality",e)},expression:"form.nationality"}},[a("a-select-option",{attrs:{value:"中国"}},[t._v("中国")]),a("a-select-option",{attrs:{value:"其他"}},[t._v("其他")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"nation",label:"民族"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{disabled:t.disabledObj.nation},model:{value:t.form.nation,callback:function(e){t.$set(t.form,"nation",e)},expression:"form.nation"}},t._l(t.nationData,(function(e,r){return a("a-select-option",{key:r,attrs:{value:e.name}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"birthday",label:"出生日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:t.disabledObj.birthday,format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",placeholder:"请选择","show-time":"",type:"date"},model:{value:t.form.birthday,callback:function(e){t.$set(t.form,"birthday",e)},expression:"form.birthday"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"height",label:"身高"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.disabledObj.height},model:{value:t.form.height,callback:function(e){t.$set(t.form,"height",e)},expression:"form.height"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"marriage",label:"婚姻状况"}},[a("a-select",{attrs:{disabled:t.disabledObj.marriage},model:{value:t.form.marriage,callback:function(e){t.$set(t.form,"marriage",e)},expression:"form.marriage"}},[a("a-select-option",{attrs:{value:2}},[t._v("已婚")]),a("a-select-option",{attrs:{value:1}},[t._v("未婚")]),a("a-select-option",{attrs:{value:3}},[t._v("离婚")]),a("a-select-option",{attrs:{value:4}},[t._v("丧偶")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"education",label:"文化程度"}},[a("a-select",{attrs:{disabled:t.disabledObj.education},model:{value:t.form.education,callback:function(e){t.$set(t.form,"education",e)},expression:"form.education"}},[a("a-select-option",{attrs:{value:1}},[t._v("小学")]),a("a-select-option",{attrs:{value:2}},[t._v("初中")]),a("a-select-option",{attrs:{value:3}},[t._v("高中")]),a("a-select-option",{attrs:{value:4}},[t._v("中专")]),a("a-select-option",{attrs:{value:5}},[t._v("大专")]),a("a-select-option",{attrs:{value:6}},[t._v("本科")]),a("a-select-option",{attrs:{value:7}},[t._v("本科以上")]),a("a-select-option",{attrs:{value:8}},[t._v("文盲或半文盲")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"background",label:"从业情况"}},[a("a-select",{attrs:{disabled:t.disabledObj.background},model:{value:t.form.background,callback:function(e){t.$set(t.form,"background",e)},expression:"form.background"}},[a("a-select-option",{attrs:{value:1}},[t._v("无业")]),a("a-select-option",{attrs:{value:2}},[t._v("在职")]),a("a-select-option",{attrs:{value:3}},[t._v("自由职业")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"householdTown",label:"户籍地"}},[a("a-input",{attrs:{disabled:t.disabledObj.householdTown},model:{value:t.form.householdTown,callback:function(e){t.$set(t.form,"householdTown",e)},expression:"form.householdTown"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"householdAddress",label:"户籍详情地址"}},[a("a-input",{attrs:{disabled:t.disabledObj.householdAddress},model:{value:t.form.householdAddress,callback:function(e){t.$set(t.form,"householdAddress",e)},expression:"form.householdAddress"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"householdPoliceStation",label:"户籍地派出所"}},[a("a-input",{attrs:{disabled:t.disabledObj.householdPoliceStation},model:{value:t.form.householdPoliceStation,callback:function(e){t.$set(t.form,"householdPoliceStation",e)},expression:"form.householdPoliceStation"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"currentTown",label:"居住地"}},[a("a-input",{attrs:{disabled:t.disabledObj.currentTown},model:{value:t.form.currentTown,callback:function(e){t.$set(t.form,"currentTown",e)},expression:"form.currentTown"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"currentAddress",label:"居住详情地址"}},[a("a-input",{attrs:{disabled:t.disabledObj.currentAddress},model:{value:t.form.currentAddress,callback:function(e){t.$set(t.form,"currentAddress",e)},expression:"form.currentAddress"}})],1)],1)],1),a("div",{staticClass:"top"},[t._v(" 人员入所信息 ")]),a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"drugRehabilitationName",label:"戒毒所名称"}},[a("a-input",{attrs:{disabled:!0},model:{value:t.form.drugRehabilitationName,callback:function(e){t.$set(t.form,"drugRehabilitationName",e)},expression:"form.drugRehabilitationName"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"firstDrugTimeStr",label:"初次吸毒日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",placeholder:"请选择","show-time":"",type:"date"},model:{value:t.form.firstDrugTimeStr,callback:function(e){t.$set(t.form,"firstDrugTimeStr",e)},expression:"form.firstDrugTimeStr"}})],1)],1)],1),a("a-form-model-item",{attrs:{label:"滥用毒品类型",prop:"drugPersonTypeStr"}},[a("a-checkbox-group",{model:{value:t.form.drugPersonTypeStr,callback:function(e){t.$set(t.form,"drugPersonTypeStr",e)},expression:"form.drugPersonTypeStr"}},[a("div",{staticClass:"check_group"},[t._l(t.drug_type,(function(e){return[a("a-checkbox",{key:e.value,attrs:{value:1*e.value,checked:""}},[t._v(t._s(e.label))])]}))],2)])],1),a("a-form-model-item",{attrs:{label:"吸毒方式",prop:"drugPersonWayStr"}},[a("a-checkbox-group",{model:{value:t.form.drugPersonWayStr,callback:function(e){t.$set(t.form,"drugPersonWayStr",e)},expression:"form.drugPersonWayStr"}},[a("div",{staticClass:"check_group"},[t._l(t.drug_way,(function(e){return[a("a-checkbox",{key:e.value,attrs:{value:1*e.value}},[t._v(t._s(e.label))])]}))],2)])],1),a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"drugTreatmentTimeLimit",label:"戒毒期限"}},[a("a-select",{on:{change:t.onDateChange1},model:{value:t.form.drugTreatmentTimeLimit,callback:function(e){t.$set(t.form,"drugTreatmentTimeLimit",e)},expression:"form.drugTreatmentTimeLimit"}},[a("a-select-option",{attrs:{value:"小于一年"}},[t._v("小于一年")]),a("a-select-option",{attrs:{value:"一年"}},[t._v("一年")]),a("a-select-option",{attrs:{value:"两年"}},[t._v("两年")]),a("a-select-option",{attrs:{value:"三年"}},[t._v("三年")]),a("a-select-option",{attrs:{value:"三年以上"}},[t._v("三年以上")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"drugTreatmentBeginTimeStr",label:"起始日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",placeholder:"请选择","show-time":"",type:"date"},on:{change:t.onDateChange1},model:{value:t.form.drugTreatmentBeginTimeStr,callback:function(e){t.$set(t.form,"drugTreatmentBeginTimeStr",e)},expression:"form.drugTreatmentBeginTimeStr"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"drugTreatmentEndTimeStr",label:"截止日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",placeholder:"请选择","show-time":"",type:"date",disabled:t.isDisabled},model:{value:t.form.drugTreatmentEndTimeStr,callback:function(e){t.$set(t.form,"drugTreatmentEndTimeStr",e)},expression:"form.drugTreatmentEndTimeStr"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"actionCause",label:"案由/罪名"}},[a("a-input",{model:{value:t.form.actionCause,callback:function(e){t.$set(t.form,"actionCause",e)},expression:"form.actionCause"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"insertReason",label:"入所原因"}},[a("a-input",{model:{value:t.form.insertReason,callback:function(e){t.$set(t.form,"insertReason",e)},expression:"form.insertReason"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"insertTimeStr",label:"入所日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",placeholder:"请选择","show-time":"",type:"date"},model:{value:t.form.insertTimeStr,callback:function(e){t.$set(t.form,"insertTimeStr",e)},expression:"form.insertTimeStr"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"decisionMakingOrgan",label:"决定机关"}},[a("a-input",{model:{value:t.form.decisionMakingOrgan,callback:function(e){t.$set(t.form,"decisionMakingOrgan",e)},expression:"form.decisionMakingOrgan"}})],1)],1)],1),a("a-form-model-item",[a("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1)])],1)},o=[],i=(a("99af"),a("a15b"),a("4ec9"),a("4fad"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("3ca3"),a("ddb0"),a("96cf"),a("1da1")),s=a("3835"),n=a("5530"),l=a("418e"),d=a("0867"),m=a("dba5"),c=a("2f62"),u=a("551c"),f={name:"modify_abstainDetail",components:{UploadAvatar:l["a"]},data:function(){return{isEdit:!1,reg:new RegExp(/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/),loading:!1,a:[1,2,3],rules:d["default"].rules,drug_type:[],drug_way:[],form:{certificateType:1,identityCard:"",avatar:"",birthday:"",currentAddress:"",currentTown:"",education:"",householdAddress:"",householdPoliceStation:"",householdTown:"",marriage:"",nation:"",height:"",nationality:"",nickName:"",realName:"",sex:"",background:""},disabledObj:{},id:"",departmentId:"",level:"",btnLoading:!1,nationData:[],fileList:[],isDisabled:!1}},created:function(){var t=this;if(this.departmentId=this.$route.query.departmentId,this.level=this.$route.query.level,this.isEdit="add"!=this.$route.query.type,this.isEdit){this.initDisabledObj(!1);var e=this.$route.query.id;this.id=e,u["a"].get_abstain_info(e).then((function(e){var a=e.insertOutPerson,r=a.drugPersonTypeStr,o=a.drugPersonWayStr;for(var i in t.form=Object(n["a"])(Object(n["a"])(Object(n["a"])({},e.createBasePersonVO),e.insertOutPerson),{drugPersonTypeStr:r,drugPersonWayStr:o}),e.createBasePersonVO)null!==e.createBasePersonVO[i]&&""!==e.createBasePersonVO[i]&&void 0!==e.createBasePersonVO[i]&&(t.disabledObj[i]=!0)}))}else this.initDisabledObj(!0);this.form.drugRehabilitationName=this.$route.query.areaName;var a=[];a.push(u["a"].get_dictionary("DRUG_TYPE")),a.push(u["a"].get_dictionary("DRUG_WAY")),Promise.all([].concat(a)).then((function(e){var a=Object(s["a"])(e,2),r=a[0],o=a[1];t.drug_type=r,t.drug_way=o})),this.initialize()},methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])({onChildDictionary:"SysDictionary/onChildDictionary"})),{},{initialize:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.onChildDictionary({parentId:"147"});case 2:t.nationData=e.sent;case 3:case"end":return e.stop()}}),e)})))()},initDisabledObj:function(t){for(var e in this.form)this.disabledObj[e]=t},onDateChange1:function(){var t=new Date(this.form.drugTreatmentBeginTimeStr);void 0!=this.form.drugTreatmentBeginTimeStr&&("一年"==this.form.drugTreatmentTimeLimit?(t.setFullYear(t.getFullYear()+1),t.setDate(t.getDate()-1),this.form.drugTreatmentEndTimeStr=this.moment(t).format("YYYY-MM-DD"),this.isDisabled=!0):"两年"==this.form.drugTreatmentTimeLimit?(t.setFullYear(t.getFullYear()+2),t.setDate(t.getDate()-1),this.form.drugTreatmentEndTimeStr=this.moment(t).format("YYYY-MM-DD"),this.isDisabled=!0):"三年"==this.form.drugTreatmentTimeLimit?(t.setFullYear(t.getFullYear()+3),t.setDate(t.getDate()-1),this.form.drugTreatmentEndTimeStr=this.moment(t).format("YYYY-MM-DD"),this.isDisabled=!0):(this.moment(this.form.drugTreatmentEndTimeStr).format("YYYY-MM-DD"),this.isDisabled=!1))},submit:function(){var t=this;this.$refs.formModal.validate((function(e){if(e)if("add"==t.$route.query.type){if(void 0===t.form.avatar||""===t.form.avatar)return t.$message.warning("请上传图片"),!1;t.new_abstain()}else t.edit_abstain_outReason()}))},new_abstain:function(){var t=this,e={certificateType:this.form.certificateType,identityCard:this.form.identityCard,avatar:this.form.avatar,birthday:this.form.birthday,currentAddress:this.form.currentAddress,currentTown:this.form.currentTown,education:this.form.education,householdAddress:this.form.householdAddress,householdPoliceStation:this.form.householdPoliceStation,householdTown:this.form.householdTown,marriage:this.form.marriage,nation:this.form.nation,height:this.form.height,nationality:this.form.nationality,nickName:this.form.nickName,realName:this.form.realName,sex:this.form.sex,background:this.form.background};this.form.drugPersonWayStr=this.form.drugPersonWayStr.join(),this.form.drugPersonTypeStr=this.form.drugPersonTypeStr.join();var a=Object.assign({createBasePersonVO:e},{departmentId:this.departmentId},{level:this.level},this.form);u["a"].add_abstain(a).then((function(e){e&&(t.$message.success("新增成功"),window.history.go(-1))}))},edit_abstain_outReason:function(){var t=this,e={},a=this.form,r=a.actionCause,o=a.decisionMakingOrgan,i=a.drugPersonTypeStr,s=a.drugPersonWayStr,n=a.drugTreatmentBeginTimeStr,l=a.drugTreatmentEndTimeStr,d=a.drugTreatmentTimeLimit,m=a.firstDrugTimeStr,c=a.insertReason,f=a.insertTimeStr,p=a.otherDrugTypeName;e={actionCause:r,decisionMakingOrgan:o,drugPersonTypeStr:i,drugPersonWayStr:s,drugTreatmentBeginTimeStr:n,drugTreatmentEndTimeStr:l,drugTreatmentTimeLimit:d,firstDrugTimeStr:m,insertReason:c,insertTimeStr:f,otherDrugTypeName:p},e.id=this.id,e.drugPersonWayStr=e.drugPersonWayStr.join(),e.drugPersonTypeStr=e.drugPersonTypeStr.join(),u["a"].edit_abstain(e).then((function(e){e&&(t.$message.success("修改成功"),window.history.go(-1))}))},get_info:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.form.identityCard){e.next=3;break}return t.$message.warning("请输入证件号"),e.abrupt("return");case 3:t.btnLoading=!0,m["a"].getPersonInfoByIdCardJg({identityCard:t.form.identityCard}).then((function(e){if(e){if(t.btnLoading=!1,t.initDisabledObj(!1),""===e.realName)t.$message.warning("人员库中没有该人员数据，请手动录入"),t.isEdit=!1;else{for(var a in t.form=e,t.form)null!==t.form[a]&&""!==t.form[a]&&void 0!==t.form[a]&&(t.disabledObj[a]=!0);t.isEdit=!0}t.form.drugRehabilitationName=t.$route.query.areaName}})).catch((function(){t.btnLoading=!1}));case 5:case"end":return e.stop()}}),e)})))()},confirm:function(t){this.$message.success("提交成功"),window.history.go(-1)},getBaseInfo:function(){var t={},e={},a=new Map(Object.entries(this.form));for(var r in this.form)a.has(r)?e["".concat(r)]=this.form["".concat(r)]:t["".concat(r)]=this.form["".concat(r)];return t.createBasePersonVO=e,t},getAvatar:function(t){this.form.avatar=t}})},p=f,h=(a("a774"),a("2877")),b=Object(h["a"])(p,r,o,!1,null,"5f746f72",null);e["default"]=b.exports}}]);