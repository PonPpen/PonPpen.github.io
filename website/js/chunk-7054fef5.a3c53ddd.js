(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7054fef5"],{2114:function(t,e,n){var o=n("313e"),a=n("6d8b"),i=a.clone,r=o.extendComponentView({type:"bmap",render:function(t,e,n){var o=!0,a=t.getBMap(),r=n.getZr().painter.getViewportRoot(),s=t.coordinateSystem,p=function(e,a){if(!o){var i=r.parentNode.parentNode.parentNode,p=[-parseInt(i.style.left,10)||0,-parseInt(i.style.top,10)||0];r.style.left=p[0]+"px",r.style.top=p[1]+"px",s.setMapOffset(p),t.__mapOffset=p,n.dispatchAction({type:"bmapRoam"})}};function c(){o||n.dispatchAction({type:"bmapRoam"})}a.removeEventListener("moving",this._oldMoveHandler),a.removeEventListener("zoomend",this._oldZoomEndHandler),a.addEventListener("moving",p),a.addEventListener("zoomend",c),this._oldMoveHandler=p,this._oldZoomEndHandler=c;var d=t.get("roam");d&&"scale"!==d?a.enableDragging():a.disableDragging(),d&&"move"!==d?(a.enableScrollWheelZoom(),a.enableDoubleClickZoom(),a.enablePinchToZoom()):(a.disableScrollWheelZoom(),a.disableDoubleClickZoom(),a.disablePinchToZoom());var l=t.__mapStyle,m=t.get("mapStyle")||{},u=JSON.stringify(m);JSON.stringify(l)!==u&&(Object.keys(m).length&&a.setMapStyle(i(m)),t.__mapStyle=JSON.parse(u));var h=t.__mapStyle2,f=t.get("mapStyleV2")||{},y=JSON.stringify(f);JSON.stringify(h)!==y&&(Object.keys(f).length&&a.setMapStyleV2(i(f)),t.__mapStyle2=JSON.parse(y)),o=!1}});t.exports=r},"4ae9":function(t,e,n){var o,a=n("313e"),i=a.util,r=a.graphic,s=a.matrix;function p(t,e){this._bmap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e,this._projection=new BMap.MercatorProjection}function c(t,e){return e=e||[0,0],i.map([0,1],(function(n){var o=e[n],a=t[n]/2,i=[],r=[];return i[n]=o-a,r[n]=o+a,i[1-n]=r[1-n]=e[1-n],Math.abs(this.dataToPoint(i)[n]-this.dataToPoint(r)[n])}),this)}function d(){function t(t){this._root=t}return t.prototype=new BMap.Overlay,t.prototype.initialize=function(t){return t.getPanes().labelPane.appendChild(this._root),this._root},t.prototype.draw=function(){},t}p.prototype.dimensions=["lng","lat"],p.prototype.setZoom=function(t){this._zoom=t},p.prototype.setCenter=function(t){this._center=this._projection.lngLatToPoint(new BMap.Point(t[0],t[1]))},p.prototype.setMapOffset=function(t){this._mapOffset=t},p.prototype.getBMap=function(){return this._bmap},p.prototype.dataToPoint=function(t){var e=new BMap.Point(t[0],t[1]),n=this._bmap.pointToOverlayPixel(e),o=this._mapOffset;return[n.x-o[0],n.y-o[1]]},p.prototype.pointToData=function(t){var e=this._mapOffset;t=this._bmap.overlayPixelToPoint({x:t[0]+e[0],y:t[1]+e[1]});return[t.lng,t.lat]},p.prototype.getViewRect=function(){var t=this._api;return new r.BoundingRect(0,0,t.getWidth(),t.getHeight())},p.prototype.getRoamTransform=function(){return s.create()},p.prototype.prepareCustoms=function(t){var e=this.getViewRect();return{coordSys:{type:"bmap",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:i.bind(this.dataToPoint,this),size:i.bind(c,this)}}},p.dimensions=p.prototype.dimensions,p.create=function(t,e){var n,a=e.getDom();t.eachComponent("bmap",(function(t){var i=e.getZr().painter,r=i.getViewportRoot();if("undefined"===typeof BMap)throw new Error("BMap api is not loaded");if(o=o||d(),n)throw new Error("Only one bmap component can exist");if(!t.__bmap){var s=a.querySelector(".ec-extension-bmap");s&&(r.style.left="0px",r.style.top="0px",a.removeChild(s)),s=document.createElement("div"),s.style.cssText="width:100%;height:100%",s.classList.add("ec-extension-bmap"),a.appendChild(s);var c=t.__bmap=new BMap.Map(s),l=new o(r);c.addOverlay(l),i.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}c=t.__bmap;var m=t.get("center"),u=t.get("zoom");if(m&&u){var h=new BMap.Point(m[0],m[1]);c.centerAndZoom(h,u)}n=new p(c,e),n.setMapOffset(t.__mapOffset||[0,0]),n.setZoom(u),n.setCenter(m),t.coordinateSystem=n})),t.eachSeries((function(t){"bmap"===t.get("coordinateSystem")&&(t.coordinateSystem=n)}))};var l=p;t.exports=l},"57c9":function(t,e,n){},"5d99":function(t,e,n){var o=n("313e");function a(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}var i=o.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(t,e){this.option.center=t,this.option.zoom=e},centerOrZoomChanged:function(t,e){var n=this.option;return!(a(t,n.center)&&e===n.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},roam:!1}});t.exports=i},a00a:function(t,e,n){var o=n("313e"),a=n("4ae9");n("5d99"),n("2114"),o.registerCoordinateSystem("bmap",a),o.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},(function(t,e){e.eachComponent("bmap",(function(t){var e=t.getBMap(),n=e.getCenter();t.setCenterAndZoom([n.lng,n.lat],e.getZoom())}))}));var i="1.0.0";e.version=i},b759:function(t,e,n){},bf0e:function(t,e,n){"use strict";var o=n("57c9"),a=n.n(o);a.a},c8ec:function(t,e,n){"use strict";var o=n("b759"),a=n.n(o);a.a},e025:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"bdMap",attrs:{id:"bdMap",data:t.data,area:t.area,legend:t.legend,mapCenter:t.mapCenter}})])},a=[],i=(n("cb29"),n("d81d"),n("a00a"),{name:"home",props:{data:{type:Array,default:function(){return[]}},customData:{type:Array,default:function(){return[]}},area:{type:Boolean,default:!1},legend:{type:Boolean,default:!1},roam:{type:Boolean,default:!0},mapCenter:{type:Array,default:function(){return[]}}},data:function(){return{map:void 0,overView:void 0,marker:void 0}},mounted:function(){var t=this;this.$nextTick((function(){t.drawMap()}))},updated:function(){var t=this;this.$nextTick((function(){t.drawMap()}))},methods:{renderItem:function(t,e){for(var n=[],o=0;o<this.customData.length;o++)n.push(e.coord(this.customData[o]));var a=e.visual("color");return{type:"polygon",shape:{points:this.$echarts.graphic.clipPointsByRect(n,{x:t.coordSys.x,y:t.coordSys.y,width:t.coordSys.width,height:t.coordSys.height})},style:e.style({fill:"rgb(0, 0, 255)",stroke:this.$echarts.color.lift(a)})}},drawMap:function(){var t=this.$echarts.init(document.getElementById("bdMap")),e=[];if(this.area)for(var n in this.data)for(var o=0;o<this.data[n].length;o++)for(var a=0;a<this.data[n][o].length;a++){var i=""==this.data[n][o][a].radius?5:this.data[n][o][a].radius;e.push([this.data[n][o][a].longtitude,this.data[n][o][a].latitude,i])}else e=this.data;var r=0;this.data.map((function(t){t[2]>r&&(r=t[2])})),t.setOption({animation:!1,bmap:{roam:this.roam},visualMap:{show:this.legend,type:"piecewise",bottom:20,right:20,max:r,splitNumber:4,itemWidth:17,itemHeight:17,align:"left",seriesIndex:0,calculable:!0,formatter:function(t,e){return parseInt(t)+"-"+parseInt(e)},inRange:{color:["#499A6F","#0E6DE9","#FDD030","#FF1B00"]}},series:[{type:"heatmap",coordinateSystem:"bmap",data:e,pointSize:15,blurSize:15},{type:"custom",coordinateSystem:"bmap",renderItem:this.renderItem,itemStyle:{opacity:.4},data:[0],z:-10}]},!0);var s=t.getModel().getComponent("bmap").getBMap(),p=window.BMap,c=[];this.data.map((function(t){c.push(new p.Point(t[0],t[1]))}));var d=this;function l(){var t=this.canvas.getContext("2d");if(t){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.beginPath();for(var e=[],n=0;n<d.data.length;n++)e.push(new p.Point(d.data[n][0],d.data[n][1]));for(var o=0,a=e.length;o<a;o++){var i=s.pointToPixel(e[o]);t.lineTo(i.x,i.y)}t.fillStyle="rgba(50, 50, 255, 0.2)",t.strokeStyle="rgba(50, 50, 255, 0.2)",t.closePath(),t.stroke(),t.fill()}}if(this.area)var m=new p.CanvasLayer({update:l});if(s.addOverlay(m),this.mapCenter.length<=0){var u=this.$route.path;switch(u){case"/PopulationMacro/HolidayDefault":s.centerAndZoom(new p.Point(109.777091,19.031578),9);break;case"/PopulationMacro/TourismTopics":s.centerAndZoom(new p.Point(109.754095,19.075318),9);break;case"/PopulationMacro/OutProvince":s.centerAndZoom(new p.Point(109.767893,19.114672),9);break;case"/PopulationMacro/AbroadUser":s.centerAndZoom(new p.Point(109.795488,19.114672),9);break;case"/PopulationMacro/HainanUser":s.centerAndZoom(new p.Point(109.795488,19.084064),9);break;case"/asj/OutAndInIslandMonitor":s.centerAndZoom(new p.Point(109.595488,19.084064),9);break;case"/asj/OutAndInIsland":s.centerAndZoom(new p.Point(109.595488,19.084064),9);break;default:s.centerAndZoom(new p.Point(109.777091,19.193352),9);break}}else s.centerAndZoom(new p.Point(this.mapCenter[0],this.mapCenter[1]),12);s.setDefaultCursor("pointer"),window.addEventListener("resize",(function(){t.resize()}))}}}),r=i,s=(n("c8ec"),n("bf0e"),n("2877")),p=Object(s["a"])(r,o,a,!1,null,"7de01c52",null);e["default"]=p.exports}}]);