(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-367ca4d2"],{"388f":function(e,t,r){"use strict";r.d(t,"i",(function(){return a})),r.d(t,"j",(function(){return i})),r.d(t,"n",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"k",(function(){return f})),r.d(t,"l",(function(){return s})),r.d(t,"e",(function(){return l})),r.d(t,"h",(function(){return m})),r.d(t,"d",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"m",(function(){return g})),r.d(t,"a",(function(){return w})),r.d(t,"g",(function(){return b}));var o=r("a27e"),n={formTypeList:"/flow-service/form/type/list",formTypeSave:"/flow-service/form/type/save",formTypeId:"/flow-service/form/type",formTypeStatus:"/flow-service/form/type/status",formTypeTenantType:"/flow-service/form/type/tenantType",formTypeTypeModels:"/flow-service/form/type/typeModels",formModelList:"/flow-service/form/model/list",formModelTenantModel:"/flow-service/form/model/tenantModel",formModelCreate:"/flow-service/form/model/create",formModelCopy:"/flow-service/form/model/copy",formModelSave:"/flow-service/form/model/save",formModelId:"/flow-service/form/model",formModelStatus:"/flow-service/form/model/status"};function a(e){return Object(o["a"])({url:n.formTypeList,method:"POST",data:e})}function i(e){return Object(o["a"])({url:n.formTypeSave,method:"POST",data:e})}function c(e){return Object(o["a"])({url:n.formTypeId+"/".concat(e),method:"GET"})}function u(e){return Object(o["a"])({url:n.formTypeId+"/".concat(e),method:"DELETE"})}function f(e){return Object(o["a"])({url:n.formTypeStatus,method:"POST",data:e})}function s(e){return Object(o["a"])({url:n.formTypeTenantType,method:"POST",data:e})}function l(e){return Object(o["a"])({url:n.formModelList,method:"POST",data:e})}function m(e){return Object(o["a"])({url:n.formModelTenantModel,method:"POST",data:e})}function d(e){return Object(o["a"])({url:n.formModelCreate,method:"POST",data:e})}function p(e){return Object(o["a"])({url:n.formModelCopy,method:"POST",data:e})}function h(e){return Object(o["a"])({url:n.formModelSave,method:"POST",data:e})}function g(e){return Object(o["a"])({url:n.formModelId+"/".concat(e),method:"GET"})}function w(e){return Object(o["a"])({url:n.formModelId+"/".concat(e),method:"DELETE"})}function b(e){return Object(o["a"])({url:n.formModelStatus,method:"POST",data:e})}},"7ea8":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("SplitLayout",[r("a-spin",{attrs:{tip:"努力加载表单中...",spinning:!e.widgetBool}},[r("a-form-model",{ref:"ruleForm",staticStyle:{"margin-left":"10%","margin-right":"25%"},attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{ref:"flowName",attrs:{label:"申请名称",prop:"flowName"}},[r("a-input",{attrs:{placeholder:"请填写申请名称"},on:{blur:function(){e.$refs.flowName.onFieldBlur()}},model:{value:e.form.flowName,callback:function(t){e.$set(e.form,"flowName",t)},expression:"form.flowName"}})],1),r("a-form-model-item",{ref:"receiverList",attrs:{label:"抄送人",prop:"receiverList"}},[e.rangeInfoBool?r("ScopeApplication",{ref:"SelectIndex",attrs:{allCheckedList:e.receiverList,checkedDataType:[1,5]},on:{getRangeInfo:e.getRangeInfo}}):e._e()],1),e.widgetBool?r("generate-form",{ref:"generateForm",attrs:{data:e.widgetForm,insite:"true",value:e.widgetModels,remote:e.remoteFuncs},on:{"on-change":e.handleDataChange}}):e._e(),r("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:3}}},[r("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),r("a-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)},n=[],a=(r("a4d3"),r("e01a"),r("4160"),r("b0c0"),r("b64b"),r("159b"),r("5530")),i=(r("96cf"),r("1da1")),c=r("2f62"),u=r("cc33"),f=r("82df"),s=r("388f"),l=r("e96b"),m={components:{GenerateForm:f["a"],ScopeApplication:l["a"]},props:["id"],data:function(){return{labelCol:{span:3},wrapperCol:{span:20},other:"",form:{},receiverList:[],rangeInfoBool:!0,rules:{flowName:[{required:!0,message:"请填写申请名称",trigger:"blur"}],receiverList:[{required:!0,message:"请选择抄送人",trigger:"change"}]},widgetForm:{},widgetModels:{},remoteFuncs:{func_test:function(e){setTimeout((function(){var t=[{id:"1",name:"1111"},{id:"2",name:"2222"},{id:"3",name:"3333"}];e(t)}),2e3)},upload_callback:function(e,t,r){console.log("callback",e,t,r)}},widgetBool:!1}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getFormModelId();case 2:return t.next=4,e.getflowExecution();case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){if(this.$route.query.row){var e=this.$route.query.row;this.form.applyKey=e.formModel,this.form.applyType=e.formType,this.form.description=e.description,this.form.flowType=e.flowType,this.form.modelId=e.id}},methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])({apply:"SysExamination/apply",flowExecutionListByReceiver:"SysExamination/flowExecutionListByReceiver"})),{},{getFormModelId:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["m"])(e.id);case 2:r=t.sent,200===r.status&&(console.log(r),e.$nextTick((function(){e.widgetForm=JSON.parse(r.data.formContent),e.labelCol.span=e.widgetForm.config.labelWidth,e.wrapperCol.span=22-e.widgetForm.config.labelWidth,e.widgetBool=!0})));case 4:case"end":return t.stop()}}),t)})))()},getflowExecution:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={userId:Object(u["f"])().userId},t.next=3,e.flowExecutionListByReceiver(r);case 3:o=t.sent,200===o.status&&console.log(o);case 5:case"end":return t.stop()}}),t)})))()},handleDataChange:function(e,t,r){console.log(e,t,r)},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.next=3,e.handleTest();case 3:return t.next=5,e.getApply();case 5:t.next=9;break;case 7:return console.log("error submit!!"),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getApply:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.applyUserId=Object(u["f"])().userId,e.form.applyUserName=Object(u["f"])().name,e.form.formContext=JSON.stringify(e.widgetForm),e.form.tenantId=Object(u["f"])().tenantId,t.next=6,e.apply(e.form);case 6:r=t.sent,r&&(e.$message.success("创建成功"),e.$router.push({path:"/examination/apply"}));case 8:case"end":return t.stop()}}),t)})))()},handleTest:function(){var e=this;this.$refs.generateForm.getData().then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.forwidgetForm(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},forwidgetForm:function(e){var t=this;Object.keys(e).forEach((function(r){t.widgetForm.list.forEach((function(t,o){t.model===r&&(t.options.defaultValue=e[r])}))}))},getRangeInfo:function(e){this.form.receiverList=e},resetForm:function(){var e=this;this.$refs.ruleForm.resetFields(),this.$refs.generateForm.reset(),this.rangeInfoBool=!1,this.$nextTick((function(){e.rangeInfoBool=!0}))}})},d=m,p=r("2877"),h=Object(p["a"])(d,o,n,!1,null,"c264448c",null);t["default"]=h.exports}}]);