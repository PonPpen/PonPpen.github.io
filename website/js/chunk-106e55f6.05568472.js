(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-106e55f6"],{5848:function(e,t,r){e.exports=r.p+"img/loginIcon1.3480f388.png"},"67ca8":function(e,t,r){"use strict";var a=r("86e1"),i=r.n(a);i.a},7637:function(e,t,r){"use strict";var a=r("c8b3"),i=r.n(a);i.a},"86e1":function(e,t,r){},ac2a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("p",{staticClass:"title"},[e._v("用户登录")]),a("img",{staticClass:"bg1",attrs:{src:r("5848"),alt:""}}),e.isLogin?e._e():a("div",{staticClass:"main-top"},[a("span",[e._v("忘记密码")]),a("span",{staticClass:"right right-login",on:{click:function(t){e.isLogin=!0}}},[e._v(" 已有帐号， 马上登录 "),a("i")])]),e.isLogin?a("a-form",{staticClass:"user-layout-login",attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入登录名"}],validateTrigger:"change"}],expression:"[\n          'username',\n          {\n            rules: [{ required: true, message: '请输入登录名' }],\n            validateTrigger: 'change'\n          }\n        ]"}],attrs:{size:"large",type:"text",placeholder:"请输入登录名"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"}],validateTrigger:"change"}],expression:"[\n          'password',\n          {\n            rules: [{ required: true, message: '请输入密码' }],\n            validateTrigger: 'change'\n          }\n        ]"}],attrs:{size:"large",autocomplete:"false",placeholder:"请输入密码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",{staticClass:"form-item-code"},[a("div",{staticClass:"login-input"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"change"}],expression:"['code',{rules: [{ required: true, message: '请输入验证码' }], validateTrigger: 'change'}]"}],attrs:{size:"large",placeholder:"请输入验证码"}})],1),a("div",{staticClass:"login-code",attrs:{id:"login-code",title:"点击刷新验证码"},on:{click:e.refreshCode}},[a("s-identify",{attrs:{identifyCode:e.identifyCode}})],1)]),a("a-form-item",{staticStyle:{"margin-top":"2vh"}},[a("a-button",{staticClass:"login-button",attrs:{block:"",size:"large",type:"primary",htmlType:"submit",loading:e.loading}},[e._v("确定")])],1)],1):e._e(),e.isLogin?e._e():a("a-form",{staticClass:"user-layout-login",attrs:{form:e.form1}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入手机号"}],validateTrigger:"change"}],expression:"[\n          'username',\n          {\n            rules: [{ required: true, message: '请输入手机号' }],\n            validateTrigger: 'change'\n          }\n        ]"}],attrs:{size:"large",type:"text",placeholder:"请输入手机号"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"change"}],expression:"[\n              'username',\n              {\n                rules: [{ required: true, message: '请输入验证码' }],\n                validateTrigger: 'change'\n              }\n            ]"}],attrs:{size:"large",type:"text",placeholder:"请输入验证码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-col",{staticClass:"get-code",attrs:{span:8}},[a("a-button",[e._v("获取验证码")])],1)],1)],1),a("a-form-item",[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请重新设置密码"}],validateTrigger:"blur"}],expression:"[\n          'password',\n          {\n            rules: [{ required: true, message: '请重新设置密码' }],\n            validateTrigger: 'blur'\n          }\n        ]"}],attrs:{size:"large",autocomplete:"false",placeholder:"请重新设置密码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请再次输入密码"}],validateTrigger:"blur"}],expression:"[\n          'password',\n          {\n            rules: [{ required: true, message: '请再次输入密码' }],\n            validateTrigger: 'blur'\n          }\n        ]"}],attrs:{size:"large",autocomplete:"false",placeholder:"请再次输入密码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",{staticStyle:{"margin-top":"24px"}},[a("a-button",{staticClass:"login-button",attrs:{block:"",size:"large",type:"primary",htmlType:"submit",loading:e.loading}},[e._v("确定")])],1)],1)],1)},i=[],o=r("4360"),n=r("cc33"),s=r("4712"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("canvas",{staticClass:"s-canvas",attrs:{id:"s-canvas",width:e.contentWidth,height:e.contentHeight}})},d=[],c=(r("cb29"),r("a9e3"),{name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:16},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:88},contentHeight:{type:Number,default:38}},methods:{randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor:function(e,t){var r=this.randomNum(e,t),a=this.randomNum(e,t),i=this.randomNum(e,t);return"rgb("+r+","+a+","+i+")"},drawPic:function(){var e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(var r=0;r<this.identifyCode.length;r++)this.drawText(t,this.identifyCode[r],r)},drawText:function(e,t,r){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var a=(r+1)*(this.contentWidth/(this.identifyCode.length+1)),i=this.randomNum(this.fontSizeMax,this.contentHeight-5),o=this.randomNum(-45,45);e.translate(a,i),e.rotate(o*Math.PI/180),e.fillText(t,0,0),e.rotate(-o*Math.PI/180),e.translate(-a,-i)},drawLine:function(e){for(var t=0;t<8;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot:function(e){for(var t=0;t<100;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}}),u=c,m=(r("67ca8"),r("2877")),f=Object(m["a"])(u,l,d,!1,null,"f507a906",null),h=f.exports,g={components:{SIdentify:h},data:function(){return{isLogin:!0,form:this.$form.createForm(this),form1:this.$form.createForm(this),loading:!1,identifyCodes:"1234567890",identifyCode:""}},created:function(){var e=this;this.$nextTick((function(){e.refreshCode()}))},mounted:function(){},methods:{handleSubmit:function(e){var t=this;e.preventDefault();var r=this.form.validateFields,a=this;r((function(e,r){if(!e){if(r.code!==t.identifyCode)return t.$message.error("验证码错误！"),void t.refreshCode();t.loading=!0,Object(s["g"])(r).then((function(e){400===e.data.status?t.loading=!1:(Object(n["k"])(e.data.token),Object(s["c"])().then((function(e){Object(n["l"])(e),o["a"].dispatch("SysMenu/onCurrentMenu",{}).then((function(e){Object(n["i"])(o["a"].state.SysMenu.currentMenuList),t.loading=!1,a.$router.push("/user/main")}))})).catch((function(){t.loading=!1})))})).catch((function(){t.loading=!1}))}}))},randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(e,t){for(var r=0;r<t;r++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]}}},p=g,v=(r("7637"),Object(m["a"])(p,a,i,!1,null,"26565364",null));t["default"]=v.exports},c8b3:function(e,t,r){}}]);