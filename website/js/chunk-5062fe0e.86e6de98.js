(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5062fe0e"],{"22f85":function(e,t,a){"use strict";var n=a("809f"),s=a.n(n);s.a},"809f":function(e,t,a){},f86e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tree"},[a("a-input-search",{staticStyle:{"margin-bottom":"8px"},attrs:{placeholder:"Search"},on:{change:e.onChange}}),a("a-tree",{attrs:{checkable:"",treeData:e.treeData,selectedKeys:e.selectKey,expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:!0},on:{expand:e.onExpand,select:e.selectNode,check:e.jiantingcheck},scopedSlots:e._u([{key:"custom",fn:function(t){t.title.indexOf(e.searchValue)}}],null,!0),model:{value:e.selectKey,callback:function(t){e.selectKey=t},expression:"selectKey"}})],1)])},s=[],i=(a("4de4"),a("4160"),a("c975"),a("d81d"),a("45fc"),a("159b"),a("5530")),r=a("2f62"),c=function e(t,a,n){for(var s=0;s<t.length;s++)t[s].scopedSlots={title:"custom"},a&&(t[s].parentId=a,t[s].parentName=n),t[s].children&&t[s].children.length>0&&e(t[s].children,t[s].key,t[s].title);return t},o={name:"DeptTree",props:{allKeys:{type:Array,required:!1},deptSelectKeys:{type:Array,required:!1},userOrDeptSelectObjs:{required:!1}},data:function(){return{comName:"User",expandedKeys:[],dataList:[],userTreeData:[],treeData:[],autoExpandParent:!0,selectKey:this.deptSelectKeys,selectObj:[],confirmVisible:{},itemIndex:"",searchValue:"",treeDeptData:[],depSearch:{searchName:""}}},created:function(){var e=this;this.selectKey=this.allKeys,this.getDepTree().then((function(t){t.forEach((function(e){e.children.map})),e.expandedKeys=[t[0].key],e.generateList(t),e.$emit("selectDep",t[0].key,t[0].title)}))},mounted:function(){},computed:Object(i["a"])({},Object(r["d"])({loading:function(e){return e.SysDepartment.loading},streeData:function(e){var t=e.SysDepartment.treeData,a=JSON.parse(JSON.stringify(t));return c(a)}})),methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])({getDeptTree:"SysDepartment/getTree"})),{},{change:function(e){this.$emit("change",e)},jiantingcheck:function(e,t){var a=[];t.checkedNodes.forEach((function(e){a.push(e.data.props.dataRef)}));this.selectObj=a,this.$parent},showDeptData:function(){this.treeData=this.treeDeptData},showUserData:function(){this.treeData=this.treeDeptData},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},generateList:function(e){for(var t=0;t<e.length;t++){var a=e[t];void 0===a.scopedSlots&&(a.scopedSlots={title:"title"}),this.dataList.push({key:a.key,title:a.title}),a.children&&this.generateList(a.children)}},getParentKey:function(e,t){for(var a,n=0;n<t.length;n++){var s=t[n];s.children&&(s.children.some((function(t){return t.title===e}))?a=s.key:this.getParentKey(e,s.children)&&(a=this.getParentKey(e,s.children)))}return this.treeData=c(t),a},onChange:function(e){var t,a=this,n=e.target.value;this.treeData=JSON.parse(JSON.stringify(this.$store.state.SysDepartment.treeData)),this.treeData[0].children=[],n?t=this.dataList.map((function(e){if(e.title.indexOf(n)>-1){var t=JSON.parse(JSON.stringify(a.$store.state.SysDepartment.treeData));return a.getParentKey(e.title,t)}return null})).filter((function(e,t,a){return e&&a.indexOf(e)===t})):(this.treeData=c(JSON.parse(JSON.stringify(this.$store.state.SysDepartment.treeData))),t=[this.treeData[0].key]),0===t.length&&this.$message.info("当前搜索无对应信息"),Object.assign(this,{expandedKeys:t,searchValue:n,autoExpandParent:!0})},selectNode:function(e,t){this.selectKey=e;var a=t.selectedNodes[0].data.props.dataRef.title;e&&e.length>0&&this.$emit("selectDep",e[0],a)},addDep:function(e,t,a){a&&a.indexOf("tenant")>-1||this.$emit("addDep",e,t)},editDep:function(e){this.$emit("editDep",e)},changeStatus:function(e){var t=e.key,a=e.status;this.$emit("changeStatus",t,a)},getDepTreeData:function(){var e=this;this.dataList=[],this.getDepTree(this.depSearch).then((function(t){e.generateList(t)}))},submit:function(){},close:function(){}}),watch:{selectObj:function(e){this.$emit("setdeptSelectObjs",e,this.selectKey)},streeData:function(e){this.treeData=JSON.parse(JSON.stringify(e))},allKeys:function(e){this.selectKey=e}}},l=o,h=(a("22f85"),a("2877")),d=Object(h["a"])(l,n,s,!1,null,"b10eefd8",null);t["default"]=d.exports}}]);