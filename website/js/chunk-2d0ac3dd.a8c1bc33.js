(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac3dd"],{1965:function(t,a,e){"use strict";e.r(a);e("4160"),e("ac1f"),e("5319"),e("159b");var n=e("5530"),i=e("cc33"),r=e("2f62"),s=e("d99e"),o=e("07cc"),c=e("007b"),l=e("75ad"),h=e("c1df"),d=e.n(h),u=e("16fe"),m=s["a"].Item;a["default"]={name:"Index",components:{SearchForm:s["a"],SearchFormItem:m,AnalysisCard:o["default"]},data:function(){return{rangePickerTime:[],areaModel:[],areaArray:[],options:[],form:{departmentId:null,endTime:"",startTime:"",sjskType:"",timeType:""},dateFormat:"YYYY/MM/DD",settleRateStaticsData:"--",settleTypeStaticsData:[],settleStatusStaticsData:[],topData1:"--",topData2:"--",topData3:"--",topData4:"--",topData5:"--",topData6:"--",HelpPeopleNumTrendData:[],willTrainPassRateData:[],WorkSituationAnalysisData:[]}},created:function(){var t={deptKey:1};this.getArea(t),this.initParam(),this.settleStatusStatics(this.form),this.settleTypeStatics(this.form),this.getHelpPeopleNumTrend(this.form),this.getWorkSituationAnalysis(this.form),this.willTrainPassRate(this.form),this.topData(this.form),this.settleRateStatics(this.form)},mounted:function(){},computed:Object(n["a"])({},Object(r["d"])({loading:function(t){return t.SysExamination.loading},listData:function(t){return t.SysExamination.applyIngData}})),methods:{initParam:function(){this.form.departmentId=Object(i["f"])().mainDeptId,this.areaModel=[this.form.departmentId],this.form.sjskType="",this.form.timeType=4;var t=Object(u["getTime"])();this.form.startTime=t,this.form.endTime=t,this.rangePickerTime=[d()(t,this.dateFormat),d()(t,this.dateFormat)],console.log("默认参数",this.form)},getArea:function(t){var a=this;c["a"].getDepartmentTree(t).then((function(t){null!==t&&(a.areaArray=t.data,a.areaArray.forEach((function(t,e){a.options.push({value:t.key,label:t.title,children:[]}),console.log("地址",a.areaArray,a.options),t.children&&0!==t.children.length&&t.children.forEach((function(t,n){a.options[e].children.push({value:t.key,label:t.title,children:[]}),t.children&&0!==t.children.length&&t.children.forEach((function(t,i){a.options[e].children[n].children.push({value:t.key,label:t.title,children:[]}),t.children&&t.children.length&&t.children.forEach((function(r,s){a.options[e].children[n].children[i].children.push({value:r.key,label:r.title,children:[]}),r.children&&r.children.length&&r.children.forEach((function(r,o){a.options[e].children[n].children[i].children[s].children.push({value:r.key,label:r.title,children:[]}),r.children&&r.children.length&&t.children.forEach((function(t){a.options[e].children[n].children[i].children[s].children[o].children.push({value:t.key,label:t.title,children:[]})}))}))}))}))}))})))})).catch((function(){}))},onAreaChange:function(t){console.log("选中地址",t),this.form.departmentId=t[t.length-1],console.log(t[0],this.form.departmentId)},rangePickerChange:function(t){var a=t[0]["_d"].getMonth()+1>=10?t[0]["_d"].getMonth()+1:"0"+(t[0]["_d"].getMonth()+1),e=t[1]["_d"].getMonth()+1>=10?t[1]["_d"].getMonth()+1:"0"+(t[1]["_d"].getMonth()+1),n=t[0]["_d"].getDate()>=10?t[0]["_d"].getDate():"0"+t[0]["_d"].getDate(),i=t[1]["_d"].getDate()>=10?t[1]["_d"].getDate():"0"+t[1]["_d"].getDate();this.form.startTime=t[0]["_d"].getFullYear()+"-"+a+"-"+n,this.form.endTime=t[1]["_d"].getFullYear()+"-"+e+"-"+i},settleRateStatics:function(t){var a=this,e=Object.assign({},t);l["a"].settleRateStatics(e).then((function(t){null!==t&&(a.settleRateStaticsData=null!=t.data?t.data:"--")})).catch((function(){}))},getWorkSituationAnalysis:function(t){var a=this,e=Object.assign({},t),n=[],i=[],r=[],s=[];l["a"].getWorkSituationAnalysis(e).then((function(t){null!==t&&(a.WorkSituationAnalysisData=t.data,a.WorkSituationAnalysisData.forEach((function(t){n.push(a.getRealLength(t.areaName,5)),s.push(t.areaName),i.push(t.count),r.push(t.total)})),a.Charts6(n,i,r,s))})).catch((function(){}))},topData:function(t){var a=this,e=Object.assign({},t),n={departmentId:e["departmentId"]};l["a"].topData(n).then((function(t){if(null!==t){var e=t.data;e.forEach((function(t){"就业率"===t.typeName?a.topData1=null!=t.data?t.data:"--":"安置率"===t.typeName?a.topData6=null!=t.data?t.data:"--":"社保人数"===t.typeName?a.topData2=null!=t.data?t.data:"--":"低保人数"===t.typeName?a.topData3=null!=t.data?t.data:"--":"救助人数"===t.typeName?a.topData4=null!=t.data?t.data:"--":"扶贫人数"===t.typeName&&(a.topData5=null!=t.data?t.data:"--")}))}})).catch((function(){}))},willTrainPassRate:function(t){var a=this,e=Object.assign({},t),n=[],i=[],r=[];l["a"].willTrainPassRate(e).then((function(t){null!==t&&(a.willTrainPassRateData=t.data,a.willTrainPassRateData.forEach((function(t){n.push(t.percentage.replace("%","")),i.push(a.getRealLength(t.cityName,5)),r.push(t.cityName)})),a.Charts5(i,n,r))})).catch((function(){}))},settleStatusStatics:function(t){var a=this,e=[],n=[];l["a"].settleStatusStatics(t).then((function(t){if(null!==t){var i=t.data;a.settleStatusStaticsData=t.data,i&&i.forEach((function(t){e.push({value:t.num,name:t.settleStatus}),n.push({ratio:t.percentage})})),console.log("安置状态占比",e),a.Charts1(e)}})).catch((function(){}))},settleTypeStatics:function(t){var a=this;console.log("安置类型分析");var e=[],n=[],i=Object.assign({},t);l["a"].settleTypeStatics(i).then((function(t){if(null!==t){var i=t.data;a.settleTypeStaticsData=t.data,0!==i.length&&(i.forEach((function(t){e.push({value:t.num,name:t.settleType}),n.push({ratio:t.percentage})})),console.log("安置类型分析11",e,i),a.Charts2(e,n))}})).catch((function(){}))},getHelpPeopleNumTrend:function(t){var a=this,e=[],n=[],i=Object.assign({},t);l["a"].getHelpPeopleNumTrend(i).then((function(t){if(null!==t){var i=t.data;a.HelpPeopleNumTrendData=t.data,0!==i.length&&(i.forEach((function(t){e.push(t.count),n.push(t.date)})),a.Charts4(n,e),console.log("帮扶人数变化趋势",t))}})).catch((function(){}))},onQuery:function(){this.settleRateStatics(this.form),this.settleStatusStatics(this.form),this.settleTypeStatics(this.form),this.getHelpPeopleNumTrend(this.form),this.getWorkSituationAnalysis(this.form),this.willTrainPassRate(this.form),this.topData(this.form)},onResetForm:function(){this.initParam()},radioOnChange:function(t){console.log(t.target.value)},getRealLength:function(t,a){var e,n=t.length,i=0,r="";if(n<=a)return t;for(var s=0;s<n;s++)if(e=t.charCodeAt(s),i+=e>=0&&e<=128?.5:1,i>=a){r=t.substring(0,s-1)+"...";break}return i<a&&(r=t),r},Charts1:function(t){var a=this.$echarts.init(document.getElementById("echarts1")),e=["50%","53%"],n=[0,100],i="middle";Object(u["drawPie1Echarts"])(a,e,n,i,t,"人")},Charts2:function(t,a){var e=this.$echarts.init(document.getElementById("echarts2")),n=["25%","53%"],i=[0,100],r="middle";Object(u["drawPieEcharts"])(e,n,i,r,t,a,160,"人")},Charts3:function(){var t=this.$echarts.init(document.getElementById("echarts3")),a=["25%","53%"],e=[0,100],n="middle",i=[{value:20,name:"国宝"},{value:30,name:"治安"},{value:25,name:"rose3"},{value:25,name:"rose4"},{value:20,name:"rose5"},{value:35,name:"rose6"},{value:30,name:"rose7"},{value:40,name:"rose8"}];Object(u["drawPieEcharts"])(t,a,e,n,i)},Charts4:function(t,a){var e=this.$echarts.init(document.getElementById("echarts4")),n=[""];Object(u["drawLine2Echarts"])(e,n,t,a,"单位:(人)")},Charts5:function(t,a,e){var n=this.$echarts.init(document.getElementById("echarts5"));Object(u["drawBarEcharts_per_format"])(n,t,a,"",e)},Charts6:function(t,a,e,n){var i=this.$echarts.init(document.getElementById("echarts6")),r=["社戒社康人数","实际就业人数"],s=[{name:"社戒社康人数",type:"bar",barWidth:25,barCategoryGap:0,data:e,label:{normal:{show:!0,position:"top",fontSize:10,color:"#000"}}},{name:"实际就业人数",type:"bar",barWidth:25,barGap:"-3%",barCategoryGap:0,data:a,label:{normal:{show:!0,position:"top",fontSize:10,color:"#000"}}}];Object(u["drawBar2Echarts"])(i,r,t,s,n)},Charts7:function(){var t=this.$echarts.init(document.getElementById("echarts7")),a=["琼海市","昌江县","保亭县","三沙市","三亚市","东方市","琼中县","儋州市","陵水县","屯昌县","五指山市","海口市","定安县","乐东县"],e=[120,200,150,80,70,110,130,120,200,150,80,70,110,130];Object(u["drawBarEcharts"])(t,a,e)}}}}}]);