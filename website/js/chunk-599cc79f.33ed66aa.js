(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-599cc79f"],{"4df1":function(t,e,o){"use strict";var i=o("ace9"),a=o.n(i);a.a},"6ed8":function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var i=o("78db"),a=o("9f5e"),n=o("256f"),r=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},t(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),s=function(t){function e(e){var o=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return o.matrixIds_=e.matrixIds,o}return r(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(i["a"]);function l(t,e,o){var i=[],r=[],l=[],c=[],u=[],d=void 0!==o?o:[],h="SupportedCRS",p="TileMatrix",m="Identifier",g="ScaleDenominator",f="TopLeftCorner",v="TileWidth",w="TileHeight",y=t[h],S=Object(n["g"])(y.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(n["g"])(y),_=S.getMetersPerUnit(),b="ne"==S.getAxisOrientation().substr(0,2);return t[p].sort((function(t,e){return e[g]-t[g]})),t[p].forEach((function(e){var o;if(o=!(d.length>0)||Object(a["d"])(d,(function(o){return e[m]==o[p]||-1===e[m].indexOf(":")&&t[m]+":"+e[m]===o[p]})),o){r.push(e[m]);var n=28e-5*e[g]/_,s=e[v],h=e[w];b?l.push([e[f][1],e[f][0]]):l.push(e[f]),i.push(n),c.push(s==h?s:[s,h]),u.push([e["MatrixWidth"],e["MatrixHeight"]])}})),new s({extent:e,origins:l,resolutions:i,matrixIds:r,tileSizes:c,sizes:u})}e["b"]=s},ace9:function(t,e,o){},bc90:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("PageView",[o("SplitLayout",{attrs:{leftWidth:"240px"}},[o("div",{staticClass:"con-content"},[o("div",{staticClass:"con-content-list",staticStyle:{width:"50%",display:"inline-block"}},[o("div",{staticClass:"header-top myTop",staticStyle:{width:"100%",display:"inline-block"}},[o("div",{staticClass:"topFrom"},[o("a-select",{staticStyle:{width:"35%","margin-right":"5px"},attrs:{placeholder:"选择类型"},on:{change:t.handleChangetop}},[o("a-select-option",{attrs:{value:0}},[t._v("全部区域")]),o("a-select-option",{attrs:{value:1}},[t._v("自然景区")]),o("a-select-option",{attrs:{value:2}},[t._v("休闲娱乐")]),o("a-select-option",{attrs:{value:3}},[t._v("重要区域")]),o("a-select-option",{attrs:{value:4}},[t._v("学校区域")]),o("a-select-option",{attrs:{value:5}},[t._v("交通枢纽")])],1),o("a-input",{staticStyle:{width:"35%"},attrs:{placeholder:"请输入区域名称"},model:{value:t.searchFromtop.regionName,callback:function(e){t.$set(t.searchFromtop,"regionName",e)},expression:"searchFromtop.regionName"}}),o("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.onQuery,query:t.onQuery}},[t._v("查询")])],1),o("a-button",{staticStyle:{"margin-right":"15px","margin-bottom":"15px"},attrs:{type:"primary"},on:{click:function(e){return t.addRegion({key:3})}}},[t._v("选择高危区域")]),o("a-dropdown",[o("a-button",{staticClass:"ant-dropdown-link",attrs:{type:"primary"},on:{click:function(t){return t.preventDefault()}}},[t._v(" 新增区域 ")]),o("a-menu",{attrs:{slot:"overlay"},on:{click:t.addRegion},slot:"overlay"},[o("a-menu-item",{key:"0"},[t._v(" 地图框选 ")]),o("a-menu-item",{key:"1"},[t._v(" 导入 ")]),o("a-menu-item",{key:"2"},[t._v(" 录入 ")])],1)],1)],1),o("CustomTable",{attrs:{showAlert:!1,columns:t.columns,dataSource:t.sjskRegionResultData,showSelection:!1,bordered:""},scopedSlots:t._u([{key:"num",fn:function(e,o,i){return[t._v(" "+t._s(i+1)+" ")]}},{key:"action",fn:function(e){return[o("OperationPermission",{attrs:{check:"privs.item1580050003"}},[o("a",{staticStyle:{"margin-right":"16px"},on:{click:function(o){return t.viewEdit(e)}}},[t._v("编辑")]),o("a",{staticStyle:{"margin-right":"16px"},on:{click:function(o){return t.delData(e)}}},[t._v("删除")])])]}}])})],1),o("div",{staticStyle:{width:"50%",height:"600px",float:"right"},attrs:{id:"viewDiv"}})])]),o("a-modal",{class:{active:t.modalShowactive,noActive:!t.modalShowactive},attrs:{title:t.mapTitle,centered:"",width:"70%"},on:{ok:t.saveMap},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[o("div",{},[t._v(" 区域名称 "),o("a-input",{staticStyle:{width:"20%","margin-right":"20px"},attrs:{placeholder:"请输入区域名称"},model:{value:t.queryForm.regionName,callback:function(e){t.$set(t.queryForm,"regionName",e)},expression:"queryForm.regionName"}}),t._v(" 区域类型 "),o("a-select",{staticStyle:{width:"20%","margin-right":"5px"},attrs:{placeholder:"选择类型"},on:{change:t.handleChange},model:{value:t.queryForm.regionType,callback:function(e){t.$set(t.queryForm,"regionType",e)},expression:"queryForm.regionType"}},[o("a-select-option",{attrs:{value:0}},[t._v("全部区域")]),o("a-select-option",{attrs:{value:1}},[t._v("自然景区")]),o("a-select-option",{attrs:{value:2}},[t._v("休闲娱乐")]),o("a-select-option",{attrs:{value:3}},[t._v("重要区域")]),o("a-select-option",{attrs:{value:4}},[t._v("学校区域")]),o("a-select-option",{attrs:{value:5}},[t._v("交通枢纽")])],1),o("a-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.searchAdressDadian}},[t._v("查询")]),o("div",{staticStyle:{width:"30%",float:"right","margin-right":"10px",position:"relative"}},[o("a-input-search",{attrs:{placeholder:"地区筛选"},on:{search:t.searchAdress},model:{value:t.regionNameAdress,callback:function(e){t.regionNameAdress=e},expression:"regionNameAdress"}},[o("a-button",{attrs:{slot:"enterButton",type:"primary"},slot:"enterButton"},[t._v(" 地区筛选 ")])],1),o("ul",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticStyle:{position:"absolute",top:"20px",left:"-50px",height:"200px","overflow-y":"scroll","z-index":"11111",background:"#fff",border:"1px solid #ddd",width:"300px"}},t._l(t.searchAdressData,(function(e,i){return o("li",{key:i,on:{click:function(o){return t.changeAdress(e)}}},[t._v(" "+t._s(e.properties.NAME)+" ")])})),0)],1)],1),o("div",{staticStyle:{width:"100%",height:"600px","margin-top":"10px"},attrs:{id:"modalShow"}},[o("button",{on:{click:t.drawPolygon}},[t._v("多边形")]),o("button",{on:{click:t.drawCircle}},[t._v("园")]),o("button",{on:{click:t.clearLayer}},[t._v("清除")])]),o("a-button",{on:{click:t.clearArea}},[t._v("清除已框选的区域")])],1),o("a-modal",{attrs:{title:"位置导入",centered:"",width:"60%"},on:{ok:t.daoruBtn},model:{value:t.daoruModal,callback:function(e){t.daoruModal=e},expression:"daoruModal"}},[o("a-form",{attrs:{form:t.form}},[o("a-form-item",{attrs:{label:"区域名称"}},[o("a-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入"},model:{value:t.form.regionName,callback:function(e){t.$set(t.form,"regionName",e)},expression:"form.regionName"}})],1),o("a-form-item",{attrs:{label:"区域类型"}},[o("a-select",{staticStyle:{width:"20%","margin-right":"5px"},attrs:{placeholder:"选择类型"},on:{change:t.handleChangeD}},[o("a-select-option",{attrs:{value:0}},[t._v("全部区域")]),o("a-select-option",{attrs:{value:1}},[t._v("自然景区")]),o("a-select-option",{attrs:{value:2}},[t._v("休闲娱乐")]),o("a-select-option",{attrs:{value:3}},[t._v("重要区域")]),o("a-select-option",{attrs:{value:4}},[t._v("学校区域")]),o("a-select-option",{attrs:{value:5}},[t._v("交通枢纽")])],1)],1),o("a-form-item",{attrs:{label:"导入数据"}},[o("a-upload",{attrs:{name:"file",multiple:!0,headers:this.token,fileList:t.fileListData,beforeUpload:t.beforeUpload,action:t.uploadService},on:{change:t.handleChangeFile}},[o("a-button",[o("a-icon",{attrs:{type:"upload"}}),t._v("上传 ")],1)],1)],1),o("a-form-item",{attrs:{label:"模板下载"}},[o("a-button",{staticStyle:{width:"114px","margin-left":"12px"},attrs:{type:"primary",icon:"download"}},[o("a",{staticStyle:{"margin-left":"12px",color:"white"},attrs:{href:"downUrl"}},[t._v("模板下载")])])],1)],1)],1),o("a-modal",{attrs:{title:"位置录入",centered:"",width:"60%"},on:{ok:t.ruluBtn},model:{value:t.ruluModal,callback:function(e){t.ruluModal=e},expression:"ruluModal"}},[t._v(" 区域名称 "),o("a-input",{staticStyle:{width:"20%","margin-right":"10px"},attrs:{placeholder:"请输入区域名称"},model:{value:t.luruForm.regionName,callback:function(e){t.$set(t.luruForm,"regionName",e)},expression:"luruForm.regionName"}}),t._v("区域类型 "),o("a-select",{staticStyle:{width:"20%","margin-right":"5px"},attrs:{placeholder:"选择类型"},on:{change:t.handleChangerulu}},[o("a-select-option",{attrs:{value:0}},[t._v("全部区域")]),o("a-select-option",{attrs:{value:1}},[t._v("自然景区")]),o("a-select-option",{attrs:{value:2}},[t._v("休闲娱乐")]),o("a-select-option",{attrs:{value:3}},[t._v("重要区域")]),o("a-select-option",{attrs:{value:4}},[t._v("学校区域")]),o("a-select-option",{attrs:{value:5}},[t._v("交通枢纽")])],1),o("a-button",{attrs:{type:"primary"},on:{click:t.addPosition}},[t._v("增加位置")]),o("CustomTable",{staticStyle:{"margin-top":"10px"},attrs:{showAlert:!1,columns:t.weizhicolumns,dataSource:t.weizhiData,showSelection:!1,bordered:""},scopedSlots:t._u([{key:"num",fn:function(e,o,i){return[t._v(" "+t._s(i+1)+" ")]}},{key:"latitude",fn:function(e,i){return[o("a-input",{model:{value:i.latitude,callback:function(e){t.$set(i,"latitude",e)},expression:"record.latitude"}})]}},{key:"longitude",fn:function(e,i){return[o("a-input",{model:{value:i.longitude,callback:function(e){t.$set(i,"longitude",e)},expression:"record.longitude"}})]}},{key:"position",fn:function(e,i){return[o("a-input",{model:{value:i.position,callback:function(e){t.$set(i,"position",e)},expression:"record.position"}})]}},{key:"action",fn:function(e,i,a){return[o("a",{staticStyle:{"margin-right":"16px"},on:{click:function(e){return t.delrulu(a)}}},[t._v("删除")])]}}])})],1),o("a-modal",{class:{active:t.choseModalactive,noActive:!t.choseModalactive},attrs:{title:"预设重点区域选择",centered:"",width:"80%"},on:{ok:t.sjskRegionChoose},model:{value:t.choseModal,callback:function(e){t.choseModal=e},expression:"choseModal"}},[o("div",[o("div",{staticClass:"leftContent"},[o("a-select",{staticStyle:{width:"20%","margin-right":"5px"},attrs:{placeholder:"选择类型"},on:{change:t.handleChangechoseModal}},[o("a-select-option",{attrs:{value:0}},[t._v("全部区域")]),o("a-select-option",{attrs:{value:1}},[t._v("自然景区")]),o("a-select-option",{attrs:{value:2}},[t._v("休闲娱乐")]),o("a-select-option",{attrs:{value:3}},[t._v("重要区域")]),o("a-select-option",{attrs:{value:4}},[t._v("学校区域")]),o("a-select-option",{attrs:{value:5}},[t._v("交通枢纽")])],1),o("a-button",{attrs:{type:"primary"},on:{click:t.searchBtn}},[t._v("查询")]),o("div",{staticClass:"con-content",staticStyle:{"margin-top":"20px"}},[o("div",{staticClass:"con-content-list"},[o("CustomTable",{ref:"table",attrs:{showAlert:!1,showSelection:!0,columns:t.columns,rowKey:"id",dataSource:t.sjskRegionResultData,bordered:""},on:{selectedRow:t.onSelectedRow,change:t.onTableChange},scopedSlots:t._u([{key:"num",fn:function(e,o,i){return[t._v(" "+t._s(i+1)+" ")]}},{key:"action",fn:function(e){return[o("OperationPermission",{attrs:{check:"privs.item1580050003"}},[o("a",{staticStyle:{"margin-right":"16px"},on:{click:function(o){return t.view(e)}}},[t._v("编辑")]),o("a",{staticStyle:{"margin-right":"16px"},on:{click:function(o){return t.delData(e)}}},[t._v("删除")])])]}}])})],1)])],1),o("div",{staticClass:"rightMap"},[o("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:"rightMap"}})])])])],1)},a=[],n=(o("4160"),o("d81d"),o("fb6a"),o("a434"),o("b0c0"),o("a9e3"),o("ac1f"),o("5319"),o("1276"),o("159b"),o("b85c")),r=o("5530"),s=o("cc33"),l=o("2f62"),c=o("17b5"),u=o("a27e"),d=o("bf11"),h=(o("afaa"),o("5bc0"),o("a2c7")),p=o("5eee"),m=o("4cdf"),g=o("5831"),f=o("3e6b"),v=o("9c78"),w=o("480c"),y=o("f2f0"),S=o("f403"),_=o("6c77"),b=o("8682"),k=o("83a6"),x=o("ce2c"),L=o("d510"),P=o("0af5"),j=o("256f"),F=o("6ed8"),M=o("ac29"),C=o("5bc3"),R=o("f822"),T=o("bc3a"),O=o.n(T),D={name:"keyAreas",components:{CustomTable:d["a"]},data:function(){return{showList:!1,fetching:!1,searchAdressData:[],regionNameAdress:[],modalShowFlag:0,addFlags:0,mapTitle:"地图框选",token:{token:Object(s["e"])()},fileListData:[],idList:[],choseModal:!0,choseModalactive:!1,downUrl:this.$globalConfig.uploadPath+"/api/manage-service/sjskRegion/download",uploadService:this.$globalConfig.uploadPath+"/api/manage-service/sjskRegion/upload",adress:this.$globalConfig.uploadPath+"/hgis/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ktw:PLAPT_ZW&maxFeatures=10&outputFormat=application/json&cql_filter=NAME%20like%20'%25%E9%BE%99%E5%8D%8E%E8%B7%AF%25'",form:{regionName:""},daoruModal:!1,headers:{"Content-Type":"multipart/form-data"},modalShow:!0,modalShowactive:!1,sjskRegionResultData:{},yearInputVal:"",monthInputVal:"",autoExpandParent:!0,searchVal:"",showLine:!0,showIcon:!1,jingweidu:[],queryForm:{regionName:"",regionType:""},searchFromtop:{regionName:"",regionType:"",currentPage:1,pageSize:10},ruluModal:!1,weizhicolumns:[{title:"序号",dataIndex:"num",scopedSlots:{customRender:"num"}},{title:"经度",dataIndex:"latitude",scopedSlots:{customRender:"latitude"}},{title:"纬度",dataIndex:"longitude",scopedSlots:{customRender:"longitude"}},{title:"位置",dataIndex:"position",scopedSlots:{customRender:"position"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],weizhiData:[],luruForm:{regionName:"",regionType:"",sjskPositionParamVOList:[],source:2},columns:[{title:"序号",dataIndex:"num",scopedSlots:{customRender:"num"}},{title:"区域名称",dataIndex:"regionName"},{title:"区域类型",dataIndex:"regionType"},{title:"来源",dataIndex:"source"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],pageFilter:{currentPage:1,pageSize:10},modules:["esri/Map","esri/WebMap","esri/widgets/Locate","esri/widgets/Track","esri/layers/TileLayer","esri/views/MapView","esri/Graphic","esri/layers/GraphicsLayer","esri/layers/FeatureLayer","esri/PopupTemplate","esri/widgets/Locate","esri/widgets/Track","esri/widgets/Sketch","esri/widgets/Sketch/SketchViewModel","dojo/domReady!"],gisConstructor:{},graphicsLayer:{},coordinateList:[],sketchViewModel:{},isMarquee:!1,map:null,view:null,style:new _["c"]({stroke:new b["a"]({width:4,color:"#119aff"}),fill:new k["a"]({color:"rgba(57,160,255,0.5)"})}),vectorSource:new g["a"]({wrapX:!1}),draw:{},vector:{},map2:null,view2:null,style2:new _["c"]({stroke:new b["a"]({width:4,color:"#119aff"}),fill:new k["a"]({color:"rgba(57,160,255,0.5)"})}),vectorSource2:new g["a"]({wrapX:!1}),draw2:{},vector2:{},map3:null,view3:null,style3:new _["c"]({stroke:new b["a"]({width:4,color:"#119aff"}),fill:new k["a"]({color:"rgba(57,160,255,0.5)"})}),vectorSource3:new g["a"]({wrapX:!1}),draw3:{},vector3:{},regionNameAdressId:""}},created:function(){this.refreshTable()},computed:Object(r["a"])({},Object(l["d"])({loading:function(t){return t.SysPersonnel.loading},pageData:function(t){return t.SysPersonnel.pageData}})),methods:Object(r["a"])(Object(r["a"])({searchAdress:function(){var t=this;console.log(this.regionNameAdress);var e=this.regionNameAdress,o="http://59.212.202.61:8020/hgis/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ktw:PLAPT_ZW&maxFeatures=10&outputFormat=application/json&cql_filter=NAME%20like%20%27%25"+e+"%25%27";console.log(e),console.log(o),O.a.get(o).then((function(e){console.log(e),t.searchAdressData=e.data.features,t.showList=!0,console.log(t.searchAdressData)}))},changeAdress:function(t){this.regionNameAdress=t.properties.NAME,this.regionNameAdressId=t.id,this.showList=!1,console.log(t)},handleChangechoseModal:function(){},beforeUpload:function(t){var e=t.size/1024/1024<50;return e||this.$message.error("文件超过50M了"),e},handleChangeFile:function(t){var e=t.file,o=t.fileList;console.log(e.status),"removed"!==e.status&&e.response&&200!==e.response.status?this.$message.error("上传失败，检查服务是否正常或者重新上传"):("removed"===e.status&&(this.fileListData=o,this.fileList=this.fileListMap(this.fileListData)),"uploading"===e.status&&(this.fileListData=o),"done"===e.status&&200===e.response.status&&(this.fileList=this.fileListMap(this.fileListData)))},fileListMap:function(t){var e,o=[],i=Object(n["a"])(t);try{for(i.s();!(e=i.n()).done;){var a=e.value,r={};a.response&&200===a.response.status&&(r.name=a.name,r.data=a.response.data[0],o.push(r))}}catch(s){i.e(s)}finally{i.f()}return o}},Object(l["b"])({onPage:"SysPersonnel/onPage",del:"SysPersonnel/del"})),{},{refreshTable:function(){this.onPage(Object(r["a"])(Object(r["a"])({},this.queryForm),this.pageFilter))},viewEdit:function(t){var e=this;this.mapTitle="地图编辑",this.queryForm.regionName=t.regionName,this.queryForm.regionType=t.regionType,this.modalShow=!0,this.modalShowactive=!0,0==this.modalShowFlag&&this.loadingMapModal();var o=this;this.addFlags=1,this.queryForm.id=t.id;var i=[];c["a"].sjskRegionqueryById(t.id).then((function(t){console.log(t.sjskPositionParamVOList),t.sjskPositionParamVOList.forEach((function(t){i.push([Number(t.latitude),Number(t.longitude)])})),e.map2.removeLayer(o.drawPolygonEdit(i)),e.map2.addLayer(o.drawPolygonEdit(i))}))},onSelect:function(t){console.log(t)},onQuery:function(){this.sjskRegionResults()},onResetForm:function(){},sjskRegionResults:function(){var t=this;c["a"].sjskRegionResult(this.searchFromtop).then((function(e){t.sjskRegionResultData=e}))},handleChange:function(t){},handleChangetop:function(t){this.searchFromtop.regionType=t},addRegion:function(t){t=t.key,this.queryForm={regionName:"",regionType:""},0==t&&(this.mapTitle="地图框选",this.addFlags=0,this.modalShow=!0,this.modalShowactive=!0,0==this.modalShowFlag&&this.loadingMapModal()),1==t&&(this.daoruModal=!0,this.form={regionName:""},this.fileListData=[]),2==t&&(this.weizhiData=[],this.ruluModal=!0,this.luruForm={regionName:"",regionType:"",sjskPositionParamVOList:[],source:2}),3==t&&(this.choseModal=!0,this.choseModalactive=!0,this.loadingMapChoose())},group:function(t,e){var o=0,i=[];while(o<t.length)i.push(t.slice(o,o+=e));return i},saveMap:function(){var t=this;if(""==this.queryForm.regionName&&this.$confirm({title:"提示",content:"请填写区域名称",onOk:function(){},onCancel:function(){}}),""===this.queryForm.regionType)this.$confirm({title:"提示",content:"请填写区域类型",onOk:function(){},onCancel:function(){}});else{var e=this;this.queryForm.source=1,this.queryForm.sjskPositionParamVOList=[],this.coordinateList=this.group(this.coordinateList,2),this.coordinateList.forEach((function(e){t.queryForm.sjskPositionParamVOList.push({latitude:e[0],longitude:e[1]})})),0==this.addFlags?c["a"].sjskRegionadd(this.queryForm).then((function(o){t.modalShow=!1,e.sjskRegionResults()})):c["a"].sjskRegionedit(this.queryForm).then((function(o){t.modalShow=!1,e.sjskRegionResults()}))}},delData:function(t){var e=this;this.$confirm({title:"提示",content:"确认删除该区域吗？",onOk:function(){c["a"].sjskRegiondelete(t.id).then((function(t){e.sjskRegionResults()}))},onCancel:function(){}})},downLoadfile:function(){Object(u["a"])({method:"get",url:this.$globalConfig.uploadPath+"/api/zuul/manage-service/sjskRegion/download",responseType:"blob",data:{},headers:{"Content-Type":"multipart/form-data"}}).then((function(t){}))},handleChangeD:function(t){this.form.regionType=t},daoruBtn:function(){var t=this;c["a"].sjskRegionexcelToSave(this.form).then((function(e){t.daoruModal=!1,t.sjskRegionResults()}))},addPosition:function(){this.weizhiData.push({latitude:"",longitude:"",position:""}),console.log(this.weizhiData)},delrulu:function(t){console.log(t),this.weizhiData.splice(t,1)},handleChangerulu:function(t){this.luruForm.regionType=t},ruluBtn:function(){var t=this;this.luruForm.sjskPositionParamVOList=this.weizhiData,c["a"].sjskRegionadd(this.luruForm).then((function(e){t.ruluModal=!1,t.sjskRegionResults()}))},searchBtn:function(){},onTableChange:function(t){console.log(t)},sjskRegionChoose:function(){var t=this;c["a"].sjskRegionchoose(this.idList).then((function(e){t.$message.success("预高危区域选择成功"),t.choseModal=!1}))},onSelectedRow:function(t){console.log(t),this.idList=t},loadingMap:function(){var t=this;this.view=new h["a"]({projection:"EPSG:4326",center:[110.321533,20.036168],zoom:12,minZoom:6}),this.map=new p["a"]({target:document.getElementById("viewDiv"),view:this.view}),this.vector=new f["a"]({source:this.vectorSource,style:this.style}),this.map.addLayer(new v["a"]({layers:this.layerData()})),this.map.addLayer(this.vector),this.map.on("click",(function(e){t.map.forEachFeatureAtPixel(e.pixel,(function(t){return t}))}))},layerData:function(){for(var t=Object(j["g"])("EPSG:4326"),e=t.getExtent(),o=1.40625,i=[],a=[],n=0;n<28;n++)a[n]=n,i[n]=o/Math.pow(2,n);var r=[];return r.push(new w["a"]({source:new y["a"]({url:"http://59.212.202.61:8020/hgis/ows",params:{layers:"ktw:SJXZQH",format:"image/png",service:"WMS",styles:"PROV_ADMI_DIVI_A",request:"GetMap",srs:"EPSG:4490",bbox:[108.61269276399997,18.15920608800002,111.27315499999997,20.162938580000002],width:800,height:600}})})),r.push(new w["a"]({source:new L["a"]({style:"",wrapX:!1,url:"http://59.212.202.61:8020/hgis/wmts",format:"image/png",layer:"ktw:VEGPL_ZW1",projection:t,matrixSet:"EPSG:4490",tileGrid:new F["b"]({matrixIds:a,resolutions:i,origin:Object(P["C"])(e)}),tileLoadFunction:function(t,e){t.getImage().src=e}})})),r.push(new w["a"]({source:new y["a"]({url:"http://59.212.202.61:8020/hgis/ows",params:{layers:"ktw:HYDPL_ZW",format:"image/png",styles:"HYDPL_ZW",service:"WMS",request:"GetMap",srs:"EPSG:4490",bbox:[107.32553316000002,1.6023420000000215,121.49104052899997,21.509347741],width:800,height:600}})})),r.push(new w["a"]({source:new L["a"]({style:"",wrapX:!1,url:"http://59.212.202.61:8020/hgis/wmts",format:"image/png",layer:"ktw:RESPL_ZW1",projection:t,matrixSet:"EPSG:4490",tileGrid:new F["b"]({matrixIds:a,resolutions:i,origin:Object(P["C"])(e)}),tileLoadFunction:function(t,e){t.getImage().src=e}})})),r.push(new w["a"]({source:new L["a"]({style:"",wrapX:!1,url:"http://59.212.202.61:8020/hgis/wmts",format:"image/png",layer:"ktw:RAILN_ZW1",projection:t,matrixSet:"EPSG:4490",tileGrid:new F["b"]({matrixIds:a,resolutions:i,origin:Object(P["C"])(e)}),tileLoadFunction:function(t,e){t.getImage().src=e}})})),r.push(new w["a"]({source:new L["a"]({style:"",wrapX:!1,url:"http://59.212.202.61:8020/hgis/wmts",format:"image/png",layer:"ktw:ROALN_ZW1",projection:t,matrixSet:"EPSG:4490",tileGrid:new F["b"]({matrixIds:a,resolutions:i,origin:Object(P["C"])(e)}),tileLoadFunction:function(t,e){t.getImage().src=e}})})),r.push(new w["a"]({source:new y["a"]({url:"http://59.212.202.61:8020/hgis/ows",params:{layers:"ktw:PLAPT_ZW",format:"image/png",styles:"PLAPT_ZW",service:"WMS",request:"GetMap",srs:"EPSG:4490",bbox:[108.61208399999998,9.72502128100001,114.69088676299998,20.16260576000002],width:800,height:600}})})),r},loadingMapChoose:function(t){for(var e in t){var o=this.modules[e].split("/").pop();o=o.replace(o[0],o[0].toUpperCase()),this.gisConstructor[o]=t[e]}this.view3=new h["a"]({projection:"EPSG:4326",center:[110.321533,20.036168],zoom:12,minZoom:6}),this.map3=new p["a"]({target:document.getElementById("rightMap"),view:this.view3}),this.vector3=new f["a"]({source:this.vectorSource3,style:this.style3}),this.map3.addLayer(new v["a"]({layers:this.layerData()})),this.map3.addLayer(this.vector3)},drawCircle:function(){var t=this,e=this;this.clearLayer(),this.draw2=new M["a"]({type:"Circle",source:this.vectorSource2,free:!1}),this.map2.addInteraction(this.draw2),this.draw2.on("drawend",(function(o){if(null!=o.feature){t.removeDraw(),console.log(o.feature.getGeometry().getCenter(),o.feature.getGeometry().getRadius());var i=o.feature.getGeometry().getCenter(),a=[o.feature.getGeometry().getRadius(),o.feature.getGeometry().getRadius()];e.coordinateList=[i[0],i[1],a[0],a[1]],console.log(e.coordinateList),console.log(o.feature.getGeometry().getFlatCoordinates())}}),this)},drawPolygon:function(){var t=this,e=this;this.clearLayer(),this.draw2=new M["a"]({type:"Polygon",source:this.vectorSource2,free:!1}),this.map2.addInteraction(this.draw2),this.draw2.on("drawend",(function(o){null!=o.feature&&(t.removeDraw(),e.coordinateList=o.feature.getGeometry().getFlatCoordinates(),console.log(e.coordinateList),console.log(o.feature.getGeometry().getCoordinates()))}),this)},removeDraw:function(){this.map2.removeInteraction(this.draw2)},clearLayer:function(){this.coordinateList=[],this.vector2.getSource().clear()},transPoint:function(t){var e=t.split(",");e=[parseFloat(e[0]),parseFloat(e[1])];var o=Object(j["d"])(e,"EPSG:4326","EPSG:3857");return o},drawPolygonEdit:function(t){var e=new g["a"],o="";o=2==t.length?new m["a"]({geometry:new R["a"](t[0],t[1][0])}):new m["a"]({geometry:new C["a"]([t])});var i=[new _["c"]({stroke:new b["a"]({color:"red",width:2})})];o.setStyle(i),e.addFeature(o);var a=new f["a"]({title:"equipment",source:e});return a},searchAdressDadian:function(){for(var t=[],e=0;e<this.searchAdressData.length;e++)if(e.id==this.regionNameAdressId)return t=[e.properties.LON,e.properties.LAT],void this.drawPoint(t)},drawPoint:function(t){console.log(t);var e=new g["a"];this.coordinatesData=[[110.320042,20.035132],[110.321533,20.036168],[110.320042,20.035132],[110.321533,20.036168]];var o=new m["a"]({geometry:new S["a"](t)}),i=[new _["c"]({image:new x["a"]({fill:new k["a"]({color:"#3399CC"}),stroke:new b["a"]({color:"#ffffff",width:1.25}),radius:5})})];o.setStyle(i),e.addFeature(o);var a=new f["a"]({title:"equipment",source:e});return a},loadingMapModal:function(t){for(var e in t){var o=this.modules[e].split("/").pop();o=o.replace(o[0],o[0].toUpperCase()),this.gisConstructor[o]=t[e]}this.view2=new h["a"]({projection:"EPSG:4326",center:[110.320042,20.035132],zoom:12,minZoom:6}),this.map2=new p["a"]({target:document.getElementById("modalShow"),view:this.view2}),this.vector2=new f["a"]({source:this.vectorSource2,style:this.style2}),this.map2.addLayer(new v["a"]({layers:this.layerData()})),this.map2.addLayer(this.vector2),this.modalShowFlag=1},clearArea:function(){this.coordinateList=[],this.isMarquee=!1,this.clearLayer()},getdata:function(t){var e=this;t.forEach((function(t){t.longitude,t.latitude;var o=new g["a"],i=new f["a"]({title:"equipment",source:o});e.map.addLayer(i)}))}}),mounted:function(){this.sjskRegionResults(),this.loadingMap(),this.loadingMapChoose()}},E=D,A=(o("4df1"),o("2877")),N=Object(A["a"])(E,i,a,!1,null,"3ac619f8",null);e["default"]=N.exports},d510:function(t,e,o){"use strict";var i=o("91b1"),a={KVP:"KVP",REST:"REST"},n=o("c721"),r=o("38f3"),s=(o("6ed8"),o("9cff")),l=(o("256f"),o("9f5e"),function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},t(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}()),c=function(t){function e(e){var o=this,i=void 0!==e.requestEncoding?e.requestEncoding:a.KVP,n=e.tileGrid,r=e.urls;return void 0===r&&void 0!==e.url&&(r=Object(s["c"])(e.url)),o=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,imageSmoothing:e.imageSmoothing,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this,o.version_=void 0!==e.version?e.version:"1.0.0",o.format_=void 0!==e.format?e.format:"image/jpeg",o.dimensions_=void 0!==e.dimensions?e.dimensions:{},o.layer_=e.layer,o.matrixSet_=e.matrixSet,o.style_=e.style,o.requestEncoding_=i,o.setKey(o.getKeyForDimensions_()),r&&r.length>0&&(o.tileUrlFunction=Object(s["b"])(r.map(o.createFromWMTSTemplate.bind(o)))),o}return l(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Object(s["b"])(t.map(this.createFromWMTSTemplate.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var o in this.dimensions_)e[t++]=o+"-"+this.dimensions_[o];return e.join("/")},e.prototype.updateDimensions=function(t){Object(r["a"])(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e.prototype.createFromWMTSTemplate=function(t){var e=this.requestEncoding_,o={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==a.KVP&&Object(r["a"])(o,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==a.KVP?Object(n["a"])(t,o):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in o?o[e.toLowerCase()]:t}));var i=this.tileGrid,s=this.dimensions_;return function(o,l,c){if(o){var u={TileMatrix:i.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object(r["a"])(u,s);var d=t;return d=e==a.KVP?Object(n["a"])(d,u):d.replace(/\{(\w+?)\}/g,(function(t,e){return u[e]})),d}}},e}(i["a"]);e["a"]=c}}]);