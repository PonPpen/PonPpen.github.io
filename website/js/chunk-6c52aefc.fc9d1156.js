(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c52aefc","chunk-1ed78467","chunk-1ed78467"],{"007b":function(e,t,a){"use strict";var n=a("a27e"),s={currentDepartmentTreeUrl:"/base-service/dept/currentDepartmentTree",getTrackSjskPersonList:"/person-service/sjskPerson/getTrackSjskPersonList"};t["a"]={getDepartmentTree:function(e){return Object(n["a"])({url:s.currentDepartmentTreeUrl,method:"GET",params:e})},getTrackSjskPersonList:function(e){return Object(n["a"])({url:s.getTrackSjskPersonList,method:"GET",params:e})}}},"0648":function(e,t,a){},"3a49":function(e,t,a){"use strict";var n=a("59e7");t["a"]=n["a"]},"59e7":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:!e.treeLoading}},[a("a-input-search",{staticStyle:{"margin-bottom":"8px"},attrs:{allowClear:"",placeholder:"请输入搜索内容"},on:{change:e.onChange},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),e.treeLoading?a("a-tree",{class:{activeEllipsis:e.isShowEllipsis},attrs:{loading:!0,selectedKeys:[e.defaultdKeys],expandedKeys:e.expandedKeys,defaultExpandAll:e.expandAllNode,autoExpandParent:e.autoExpandParent,treeData:e.treeData},on:{expand:e.onExpand,select:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(t){var n=t.title;return[a("a-tooltip",{attrs:{placement:"topLeft",title:n}},[n.indexOf(e.searchValue)>-1?a("span",[e._v(" "+e._s(n.substr(0,n.indexOf(e.searchValue)))+" "),a("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v(" "+e._s(n.substr(n.indexOf(e.searchValue)+e.searchValue.length))+" ")]):a("span",[e._v(e._s(n))])])]}}],null,!1,3746631401)}):a("a-skeleton",{attrs:{active:"",paragraph:{rows:14}}})],1)},s=[],i=(a("c975"),a("d81d"),a("ac1f"),a("1276"),{name:"SearchTree",props:{data:{type:Array,require:!0},defaultdKeys:{type:String,require:!1},isShowEllipsis:{type:Boolean,default:!0},expandAllNode:{type:Boolean,default:!1},expandKeys:{type:String,require:!1}},data:function(){return{searchValue:"",expandedKeys:[],autoExpandParent:!0,dataList:[],treeData:[],selectedKeys:[],selectedTitles:[],loadingBool:!1}},computed:{treeLoading:function(){return null!==this.treeData&&this.treeData.length>0}},watch:{data:{handler:function(e,t){this.dataList=[],null!==e&&(this.generateList(e),this.treeData=e,this.treeData.length>0&&(void 0!=this.expandKeys&&this.expandKeys.length>0?this.expandedKeys=this.expandKeys.substring(0,this.expandKeys.length-1).split(","):this.expandedKeys=[this.treeData[0].key]))},immediate:!0}},methods:{getSelectedKey:function(){return this.selectedKeys[0]||""},getSelectedKeys:function(){return this.selectedKeys},getSelectedTitle:function(){return this.selectedTitles[0]||""},getSelectedTitles:function(){return this.selectedTitles},onSelect:function(e,t){this.selectedKeys=e,this.selectedKeys.length>0&&(this.selectedTitles=t.selectedNodes.map((function(e){return e.data.props.dataRef.title})),this.$emit("selected",this.selectedKeys,this.selectedTitles,t.selectedNodes[0].data.props.dataRef))},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},generateList:function(e){for(var t=0;t<e.length;t++){var a=e[t];void 0===a.scopedSlots&&(a.scopedSlots={title:"title"}),this.dataList.push({key:a.key,parentId:a.parentId,extendData:a.extendData,title:a.title}),a.children&&this.generateList(a.children)}},onChange:function(e){var t=this,a=e.target.value;""!=a?a&&this.dataList.map((function(e){e.title.indexOf(a)>-1&&(t.expandedKeys=e.extendData.substring(0,e.extendData.length-1).split(","),console.log(t.expandedKeys))})):this.expandedKeys=[this.treeData[0].key]}}}),r=i,l=(a("70b7"),a("2877")),o=Object(l["a"])(r,n,s,!1,null,"52e9cd27",null);t["a"]=o.exports},"70b7":function(e,t,a){"use strict";var n=a("dfd7"),s=a.n(n);s.a},"8cc5":function(e,t,a){"use strict";var n=a("d41e"),s=a.n(n);s.a},"9dc1":function(e,t,a){"use strict";var n=a("a27e"),s={listUrl:"/manage-service/sjskSignPerson/list",signInUrl:"/manage-service/sjskSignPerson/signIn",detailUrl:"/manage-service/sjskSignPerson/detail"};t["a"]={list:function(e){return Object(n["a"])({url:s.listUrl,method:"POST",data:e})},signInList:function(e){return Object(n["a"])({url:s.signInUrl,method:"POST",data:e})},detail:function(e){return Object(n["a"])({url:s.detailUrl,method:"POST",data:e})}}},ac87:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PageView",[n("SplitLayout",{attrs:{leftWidth:"240px"}},[n("div",{staticClass:"left",attrs:{slot:"left"},slot:"left"},[n("SearchTree",{ref:"searchTree",staticStyle:{padding:"0 10px",overflow:"hidden"},attrs:{data:e.treeData,defaultdKeys:e.departmentId},on:{selected:e.onSelected}})],1),n("div",{staticClass:"header-top",attrs:{slot:"top"},slot:"top"},[n("SearchForm",{on:{query:e.onQuery,reset:e.onResetForm}},[n("SearchFormItem",{attrs:{label:"身份证号："}},[n("a-input",{attrs:{placeholder:"请输入身份证号"},model:{value:e.pageFilter.cerOrName,callback:function(t){e.$set(e.pageFilter,"cerOrName",t)},expression:"pageFilter.cerOrName"}})],1)],1)],1),n("div",{staticClass:"con-content"},[n("div",{staticClass:"con-content-top",attrs:{gutter:16}},[n("a-row",{attrs:{gutter:16}},[n("a-col",{staticClass:"gutter-row",attrs:{span:4}},[n("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:""},on:{change:e.yearChange},model:{value:e.pageFilter.year,callback:function(t){e.$set(e.pageFilter,"year",t)},expression:"pageFilter.year"}},e._l(e.yearDateArr,(function(t){return n("a-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),n("a-col",{staticClass:"gutter-row",attrs:{span:4}},[n("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:""},on:{change:e.monthChange},model:{value:e.pageFilter.month,callback:function(t){e.$set(e.pageFilter,"month",t)},expression:"pageFilter.month"}},e._l(e.monthDateArr,(function(t){return n("a-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1),n("div",{staticClass:"con-content-list"},[n("CustomTable",{attrs:{showAlert:!1,columns:e.columns,loading:e.loading,dataSource:e.pageData,showSelection:!1},on:{change:e.onTableChange},scopedSlots:e._u([{key:"order",fn:function(t,a,n){return[e._v(" "+e._s(n+1)+" ")]}},{key:"gender",fn:function(t){return["1"===t?n("span",[e._v("男")]):e._e(),"2"===t?n("span",[e._v("女")]):e._e()]}},{key:"action",fn:function(t){return[n("a",{staticStyle:{"margin-right":"16px"},on:{click:function(a){return e.showDrawer(t)}}},[e._v("签到详情")])]}}])}),n("a-drawer",{attrs:{title:"签到详情",width:900,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[n("div",{staticClass:"con-content-list"},[n("a-calendar",{on:{change:e.rangePickerChange},scopedSlots:e._u([{key:"dateCellRender",fn:function(t){return n("ul",{staticClass:"events"},e._l(e.getListData(t),(function(t){return n("li",{key:t.content},["error"!==t.type?n("a-badge",{class:"ant-badge-text-"+t.type,attrs:{status:t.type,text:t.content}}):n("div",{staticClass:"hand-status"},[n("p",[e._v(e._s(t.content))]),n("img",{attrs:{src:a("d142"),alt:"dark"}})])],1)})),0)}}]),model:{value:e.calendarValue,callback:function(t){e.calendarValue=t},expression:"calendarValue"}}),e.isShowsignInDel?n("div",[n("p",[n("span",{staticClass:"strong"},[e._v("签到情况：")]),n("span",[e._v(e._s(e.signInDel))])]),n("p",[n("span",{staticClass:"strong"},[e._v("签到时间：")]),n("span",[e._v(e._s(e.signInTime))])]),n("p",[n("span",{staticClass:"strong"},[e._v("签到地点：")]),n("span",[e._v(e._s(e.signInPlace))])])]):e._e()],1)])],1)])])],1)},s=[],i=(a("4160"),a("d3b7"),a("25f0"),a("159b"),a("5530")),r=a("cc33"),l=a("d99e"),o=a("007b"),c=a("9dc1"),d=a("bf11"),u=a("c1df"),h=a.n(u),g=(a("b1fe"),a("3a49")),p=l["a"].Item,f={name:"personelIntegralControl",components:{SearchForm:l["a"],SearchFormItem:p,CustomTable:d["a"],SearchTree:g["a"]},data:function(){return{visible:!1,calendarValue:"",dateFormat:"YYYY/MM/DD",isShowsignInDel:!1,signInDel:"",signInTime:"",signInPlace:"",yearDateArr:[],monthDateArr:[],departmentId:"",treeData:[],pageData:[],loading:!1,columns:[{title:"序号",dataIndex:"order",scopedSlots:{customRender:"order"}},{title:"姓名",dataIndex:"name"},{title:"性别",dataIndex:"gender",scopedSlots:{customRender:"gender"}},{title:"身份证号",dataIndex:"cer"},{title:"应签到天数",dataIndex:"fixDays",scopedSlots:{customRender:"fixDays"}},{title:"实签到天数",dataIndex:"actualDays",scopedSlots:{customRender:"actualDays"}},{title:"漏签到天数",dataIndex:"leakDays",scopedSlots:{customRender:"leakDays"}},{title:"实际签到率",dataIndex:"signInRatio",scopedSlots:{customRender:"signInRatio"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],pageFilter:{currentPage:1,pageSize:10,cerOrName:"",year:"",month:"",signAddress:""},pageFilterDel:{year:"",month:"",userId:""},SignInData:[]}},created:function(){this.initParam(),this.getDateArr(),this.getMonth();var e={};"POSITION_009"!==Object(r["f"])().jobName?e={deptKey:1}:(this.pageFilter.belongManagerId=Object(r["f"])().userId,e={deptKey:0}),this.getArea(e)},computed:{},methods:{initParam:function(){this.pageFilter.signAddress=Object(r["f"])().mainDeptId,this.pageFilter.currentPage=1,this.pageFilter.pageSize=10,this.pageFilter.cerOrName=""},getDateArr:function(){var e=(new Date).getFullYear();this.pageFilter.year=e;for(var t=0;t<5;t++)this.yearDateArr.push(e--)},getMonth:function(){var e=(new Date).getMonth()+1;this.pageFilter.month=e<10?"0"+e:e;var t=e;this.monthDateArr=[];for(var a=0;a<t;a++){var n=e--,s=n<10?"0"+n:n;this.monthDateArr.push(s)}},yearChange:function(e){(new Date).getFullYear()===e?this.getMonth():this.monthDateArr=["12","11","10","09","08","07","06","05","04","03","02","01"],this.pageFilter.year=e,this.refreshTable()},monthChange:function(e){this.pageFilter.month=e,this.refreshTable()},getArea:function(e){var t=this;o["a"].getDepartmentTree(e).then((function(e){t.treeData=e.data,t.departmentId=e.data[0].key,t.pageFilter.signAddress=e.data[0].key,t.refreshTable()})).catch((function(){}))},refreshTable:function(){this.loading=!0,this.getControllerInfoList(this.pageFilter)},onTableChange:function(e){this.pageFilter=Object(i["a"])(Object(i["a"])({},this.pageFilter),e),this.refreshTable()},getControllerInfoList:function(e){var t=this;c["a"].list(e).then((function(e){t.loading=!1,t.pageData=e.data})).catch((function(){}))},view:function(e){},onSelected:function(e,t,a){e.length>0&&(this.pageFilter.signAddress=e[0],this.departmentId=e[0],this.refreshTable())},resetAprama:function(){this.pageFilter.currentPage=1,this.pageFilter.pageSize=10,this.pageFilter.cerOrName=""},onResetForm:function(){this.initParam(),this.getDateArr(),this.resetAprama(),this.refreshTable()},onQuery:function(){this.refreshTable(),this.isShowsignInDel=!1},showDrawer:function(e){this.visible=!0,this.pageFilterDel.year=this.pageFilter.year,this.pageFilterDel.userId=e.userId,this.pageFilterDel.month=this.pageFilter.month;var t=(new Date).getDate()<10?"0"+(new Date).getDate():(new Date).getDate(),a=this.pageFilter.year.toString()+this.pageFilter.month.toString()+t.toString(),n=this.pageFilter.year+"-"+this.pageFilter.month+"-"+t;this.calendarValue=h()(a,this.dateFormat),this.isShowsignInDel=!1,this.SignInData=[],this.getControllerdetail1(n)},onClose:function(){this.visible=!1},getControllerdetail1:function(e){var t=this;c["a"].detail(this.pageFilterDel).then((function(a){t.SignInData=a.data,t.isShowsignInDel=!0,t.SignInData&&t.SignInData.forEach((function(a){a.signDate===e&&("1"===a.status?(t.signInDel="正常签到",t.signInTime=a.signTime,t.signInPlace=a.signPlace):"0"===a.status&&(t.signInDel="未签到",t.signInTime=a.signTime,t.signInPlace=a.signPlace))}))})).catch((function(){}))},getListData:function(e){var t,a="已签到",n="未签到";return this.SignInData.forEach((function(s){s.signDate===e.format("YYYY-MM-DD")&&("1"===s.status?t=[{type:"processing",content:a}]:"0"===s.status&&(t=[{type:"warning",content:n}]))})),t||[]},rangePickerChange:function(e){var t=this;this.isShowsignInDel=!0,this.SignInData.forEach((function(a){a.signDate===e.format("YYYY-MM-DD")&&("1"===a.status?(t.signInDel="正常签到",t.signInTime=a.signTime,t.signInPlace=a.signPlace):"0"===a.status&&(t.signInDel="未签到",t.signInTime=a.signTime,t.signInPlace=a.signPlace))}))}}},m=f,y=(a("c126"),a("2877")),v=Object(y["a"])(m,n,s,!1,null,"5de17174",null);t["default"]=v.exports},b1fe:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-drawer",{attrs:{title:e.title,width:e.width,maskClosable:!0,placement:"right",closable:!0,wrapClassName:"dwBox",visible:e.visible},on:{close:e.onClose}},[e._t("default")],2)],1)},s=[],i=(a("a9e3"),{name:"Drawer",props:{title:{type:String,default:"标题"},width:{type:Number,default:640}},data:function(){return{visible:!1}},created:function(){},mounted:function(){},methods:{show:function(){this.visible=!0},onClose:function(){this.visible=!1}}}),r=i,l=a("2877"),o=Object(l["a"])(r,n,s,!1,null,null,null);t["a"]=o.exports},c126:function(e,t,a){"use strict";var n=a("0648"),s=a.n(n);s.a},d142:function(e,t,a){e.exports=a.p+"img/hand.8d420d67.svg"},d41e:function(e,t,a){},d99e:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-wrapper"},[a("div",[a("a-row",{attrs:{gutter:56}},[e._t("default"),a("buttonBox",{style:e.advanced?{float:"right"}:{},on:{toggleAdvanced:e.toggleAdvanced,query:e.query,reset:e.reset}})],2)],1)])},s=[],i=(a("a9e3"),a("5530")),r={name:"SearchListItem",props:{label:{type:String,default:"",required:!1}},inject:{col:{type:Number}},render:function(){var e=arguments[0];return e("a-col",{class:"item-box",props:Object(i["a"])({},o[this.col])},[e("div",{class:"y-search-item"},[e("div",{class:"y-search-label"},[this.$props.label]),e("div",{class:"y-search-content"},[this.$slots.default])])])}},l={name:"buttonBox",data:function(){return{advanced:!1}},inject:{col:{type:Number}},methods:{toggleAdvanced:function(){this.advanced=!this.advanced,this.$emit("toggleAdvanced")},query:function(){this.$emit("query")},reset:function(){this.$emit("reset")}},render:function(){var e=arguments[0];return e("a-col",{props:Object(i["a"])({},o[this.col])},[e("span",{class:"table-page-search-submitButtons",style:"float: 'left', overflow: 'hidden'"},[e("a-button",{attrs:{type:"primary"},on:{click:this.query}},["查询"]),e("a-button",{style:"margin-left: 8px",on:{click:this.reset}},["重置"]),e("a",{attrs:{id:"advance-btn"},style:"margin-left: 8px",on:{click:this.toggleAdvanced}},[this.advanced?"收起":"展开",e("a-icon",{props:Object(i["a"])({},{type:this.advanced?"up":"down"})})])])])}},o={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{md:24,lg:12,xl:8,xxl:6}},c={name:"SearchForm",Item:r,components:{buttonBox:l},props:{col:{type:Number,required:!1,default:6}},provide:function(){return{col:this.col>4?4:this.col}},data:function(){return{advanced:!1,toplist:[],bottomList:[]}},methods:{toggleAdvanced:function(){this.advanced=!this.advanced,this.displayItem()},query:function(){this.$emit("query")},reset:function(){this.$emit("reset")},displayItem:function(){var e=this.$slots.default,t=this.col,a=e.length;if(a<t)document.getElementById("advance-btn").style.display="none";else for(var n=t-1;n<a;n++)e[n].elm.style.display=this.advanced?"":"none"}},mounted:function(){this.displayItem()}},d=c,u=(a("8cc5"),a("2877")),h=Object(u["a"])(d,n,s,!1,null,"359e9f37",null),g=h.exports;t["a"]=g},dfd7:function(e,t,a){}}]);