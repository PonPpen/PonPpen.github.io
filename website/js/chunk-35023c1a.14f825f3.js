(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35023c1a"],{"0710":function(t,e,n){"use strict";var i=n("e269"),o=n("592d"),a={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},s=n("cd7e"),r=n("0af5"),p=n("1e8d"),d=n("0999"),l=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},f=function(t){function e(e){var n=t.call(this)||this;n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+s["d"],n.element.style.position="absolute",n.element.style.pointerEvents="auto";var o=e.autoPan;return o&&"object"!==typeof o&&(o={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=o||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addEventListener(Object(i["b"])(c.ELEMENT),n.handleElementChanged),n.addEventListener(Object(i["b"])(c.MAP),n.handleMapChanged),n.addEventListener(Object(i["b"])(c.OFFSET),n.handleOffsetChanged),n.addEventListener(Object(i["b"])(c.POSITION),n.handlePositionChanged),n.addEventListener(Object(i["b"])(c.POSITIONING),n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:a.TOP_LEFT),void 0!==e.position&&n.setPosition(e.position),n}return l(e,t),e.prototype.getElement=function(){return this.get(c.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(c.MAP)},e.prototype.getOffset=function(){return this.get(c.OFFSET)},e.prototype.getPosition=function(){return this.get(c.POSITION)},e.prototype.getPositioning=function(){return this.get(c.POSITIONING)},e.prototype.handleElementChanged=function(){Object(d["d"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(d["e"])(this.element),Object(p["c"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(p["a"])(t,o["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(c.ELEMENT,t)},e.prototype.setMap=function(t){this.set(c.MAP,t)},e.prototype.setOffset=function(t){this.set(c.OFFSET,t)},e.prototype.setPosition=function(t){this.set(c.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(c.POSITION)){var n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),o=this.getRect(i,[Object(d["c"])(i),Object(d["b"])(i)]),a=t||{},s=void 0===a.margin?20:a.margin;if(!Object(r["g"])(n,o)){var p=o[0]-n[0],l=n[2]-o[2],f=o[1]-n[1],u=n[3]-o[3],h=[0,0];if(p<0?h[0]=p-s:l<0&&(h[0]=Math.abs(l)+s),f<0?h[1]=f-s:u<0&&(h[1]=Math.abs(u)+s),0!==h[0]||0!==h[1]){var g=e.getView().getCenterInternal(),m=e.getPixelFromCoordinateInternal(g),E=[m[0]+h[0],m[1]+h[1]],O=a.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(E),duration:O.duration,easing:O.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(c.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var s=Math.round(t[0]+i[0])+"px",r=Math.round(t[1]+i[1])+"px",p="0%",d="0%";o==a.BOTTOM_RIGHT||o==a.CENTER_RIGHT||o==a.TOP_RIGHT?p="-100%":o!=a.BOTTOM_CENTER&&o!=a.CENTER_CENTER&&o!=a.TOP_CENTER||(p="-50%"),o==a.BOTTOM_LEFT||o==a.BOTTOM_CENTER||o==a.BOTTOM_RIGHT?d="-100%":o!=a.CENTER_LEFT&&o!=a.CENTER_CENTER&&o!=a.CENTER_RIGHT||(d="-50%");var l="translate("+p+", "+d+") translate("+s+", "+r+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l,n.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(i["a"]);e["a"]=f},"29dc":function(t,e,n){t.exports=n.p+"img/map-red.7c05a19a.gif"},"33eb":function(t,e,n){t.exports=n.p+"img/map-blue.24473889.gif"},"4f50":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"map",attrs:{id:"map",data:t.data}})},o=[],a=(n("d81d"),n("5bc0"),n("a2c7")),s=n("5eee"),r=n("4cdf"),p=n("0710"),d=n("3e6b"),l=n("9c78"),c=n("480c"),f=n("f2f0"),u=n("5831"),h=n("f403"),g=n("256f"),m={name:"MapPath",props:{data:{type:Array}},data:function(){return{map:null,view:null,iconImg:{"红色预警":n("29dc"),"橙色预警":n("b41f"),"蓝色预警":n("33eb"),"黄色预警":n("d8ed")}}},mounted:function(){this.init(),this.addGif(this.map)},updated:function(){this.addGif(this.map)},methods:{init:function(t,e){this.view=new a["a"]({projection:"EPSG:4326",center:t||[110.320042,20.035132],zoom:e||12,minZoom:6}),console.log(this.view),this.map=new s["a"]({target:"map",view:this.view}),console.log(this.map),this.map.addLayer(new l["a"]({layers:this.layerData()}))},layerData:function(){var t=[];return t.push(new c["a"]({source:new f["a"](this.$globalConfig.mapConfig.PROPL_ZW)})),t.push(new c["a"]({source:new f["a"](this.$globalConfig.mapConfig.VEGPL_ZW)})),t.push(new c["a"]({source:new f["a"](this.$globalConfig.mapConfig.HYDPL_ZW)})),t.push(new c["a"]({source:new f["a"](this.$globalConfig.mapConfig.RESPL_ZW)})),t.push(new c["a"]({source:new f["a"](this.$globalConfig.mapConfig.RAILN_ZW)})),t.push(new c["a"]({source:new f["a"](this.$globalConfig.mapConfig.ROALN_ZW)})),t.push(new c["a"]({source:new f["a"](this.$globalConfig.mapConfig.PLAPT_ZW)})),t},drawPoint:function(){var t=this,e=new u["a"];console.log(this.data),this.data.map((function(n){var i=new r["a"]({geometry:new h["a"]([n.longitude,n.latitude])});console.log(t.iconImg[n.warnExtent]),e.addFeature(i)}));var n=new d["a"]({title:"equipment",source:e});return n},addGif:function(){for(var t=this,e=this,n=this.$refs.map,i=function(i){a=document.createElement("img"),console.log(document.getElementById("gif-"+i)),null!==document.getElementById("gif-"+i)&&document.getElementById("gif-"+i).remove(),a.id="gif-"+i,a.src=e.iconImg[e.data[i].warnExtent],a.style.width="40px",n.appendChild(a),t.$nextTick((function(){console.log(Object(g["d"])([e.data[i].longitude,e.data[i].latitude])),t.markerPoint=new p["a"]({position:[e.data[i].longitude,e.data[i].latitude],positioning:"center-center",element:document.getElementById("gif-"+i),stopEvent:!1}),t.map.addOverlay(t.markerPoint)}))},o=0;o<this.data.length;o++){var a;i(o)}},_moveCenter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[110.320042,20.035132],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.view.setZoom(e),this.view.animate({center:t,duration:0})}}},E=m,O=(n("6d0f"),n("2877")),P=Object(O["a"])(E,i,o,!1,null,"0dbefd54",null);e["default"]=P.exports},"6d0f":function(t,e,n){"use strict";var i=n("7e72"),o=n.n(i);o.a},"7e72":function(t,e,n){},b41f:function(t,e,n){t.exports=n.p+"img/map-orange.fc8e50d5.gif"},d8ed:function(t,e,n){t.exports=n.p+"img/map-yellow.b6ef7679.gif"}}]);