(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2306df"],{ebf2:function(t,e,a){"use strict";a.r(e);a("4160"),a("159b");var n=a("cc33"),i=a("d99e"),r=a("07cc"),o=a("007b"),s=a("1f84"),h=a("c1df"),c=a.n(h),u=a("16fe"),l=i["a"].Item;e["default"]={name:"Index",components:{SearchForm:i["a"],SearchFormItem:l,AnalysisCard:r["default"]},data:function(){return{rangePickerTime:[],areaModel:[],areaArray:[],options:[],form:{departmentId:null,endTime:"",startTime:"",sjskType:"",timeType:""},tabPosition1:"1",tabPosition:"1",dateFormat:"YYYY/MM/DD",PersonNumber1:"--",PersonNumber2:"--",PersonNumber3:"--",PersonNumber4:"--",PersonNumber5:"--",UrinalysisStatisticsData:[],TreatmentStatisticsData:[],BreachAgreementCountData:[],AbnormalNumberCountData:[],DrugTreatmentRehabilitationSQData:[]}},created:function(){var t={deptKey:1};this.getArea(t),this.initParam(),this.getPersonNumber(this.form),this.getUrinalysisStatistics(this.form),this.getTreatmentStatistics(this.form),this.getBreachAgreementCount(this.form),this.getAbnormalNumberCount(this.form),this.getDrugTreatmentRehabilitationSQ(this.form),this.getInstitutionCount1(),this.getMedicineNum1()},mounted:function(){},computed:{},methods:{initParam:function(){this.form.departmentId=Object(n["f"])().mainDeptId,this.areaModel=[this.form.departmentId],this.form.sjskType="",this.form.timeType=4;var t=Object(u["getTime"])();this.form.startTime=t,this.form.endTime=t,this.rangePickerTime=[c()(t,this.dateFormat),c()(t,this.dateFormat)],console.log("默认参数",this.form)},getArea:function(t){var e=this;o["a"].getDepartmentTree(t).then((function(t){null!==t&&(e.areaArray=t.data,e.areaArray.forEach((function(t,a){e.options.push({value:t.key,label:t.title,children:[]}),console.log("地址",e.areaArray,e.options),t.children&&0!==t.children.length&&t.children.forEach((function(t,n){e.options[a].children.push({value:t.key,label:t.title,children:[]}),t.children&&0!==t.children.length&&t.children.forEach((function(t,i){e.options[a].children[n].children.push({value:t.key,label:t.title,children:[]}),t.children&&t.children.length&&t.children.forEach((function(r,o){e.options[a].children[n].children[i].children.push({value:r.key,label:r.title,children:[]}),r.children&&r.children.length&&r.children.forEach((function(r,s){e.options[a].children[n].children[i].children[o].children.push({value:r.key,label:r.title,children:[]}),r.children&&r.children.length&&t.children.forEach((function(t){e.options[a].children[n].children[i].children[o].children[s].children.push({value:t.key,label:t.title,children:[]})}))}))}))}))}))})))})).catch((function(){}))},onAreaChange:function(t){this.form.departmentId=t[t.length-1],console.log(t[0],this.form.departmentId)},rangePickerChange:function(t){var e=t[0]["_d"].getMonth()+1>=10?t[0]["_d"].getMonth()+1:"0"+(t[0]["_d"].getMonth()+1),a=t[1]["_d"].getMonth()+1>=10?t[1]["_d"].getMonth()+1:"0"+(t[1]["_d"].getMonth()+1),n=t[0]["_d"].getDate()>=10?t[0]["_d"].getDate():"0"+t[0]["_d"].getDate(),i=t[1]["_d"].getDate()>=10?t[1]["_d"].getDate():"0"+t[1]["_d"].getDate();this.form.startTime=t[0]["_d"].getFullYear()+"-"+e+"-"+n,this.form.endTime=t[1]["_d"].getFullYear()+"-"+a+"-"+i},getPersonNumber:function(t){var e=this,a=Object.assign({},t);s["a"].getPersonNumber(a).then((function(t){if(null!==t){var a=t.data;console.log("各种人数统计",a),a.forEach((function(t){switch(t.typeName){case"今日尿检人数":e.PersonNumber1=null!=t.data?t.data:"--";break;case"终止/中止人数":e.PersonNumber4=null!=t.data?t.data:"--";break;case"超/严人数":e.PersonNumber5=null!=t.data?t.data:"--";break}}))}})).catch((function(){}))},getInstitutionCount1:function(){var t=this;s["a"].getInstitutionCount().then((function(e){if(null!==e){var a=e.data;t.PersonNumber3=null!=a?a:"--"}})).catch((function(){}))},getMedicineNum1:function(){var t=this,e=new Date,a=e.getMonth()+1,n=e.getFullYear()+"-"+a+"-"+e.getDate();console.log("时间",n),s["a"].getMedicineNum(n).then((function(e){if(null!==e){var a=e.data[0];t.PersonNumber2=null!=a?a:"--"}})).catch((function(){}))},getUrinalysisStatistics:function(t){var e=this,a=Object.assign({},t);s["a"].getUrinalysisStatistics(a).then((function(t){var a=[],n=[],i=[],r=[];if(null!==t){var o=t.data;e.UrinalysisStatisticsData=t.data,0!==o.length&&(o.forEach((function(t){a.push(e.getRealLength(t.urinalysisLocation,5)),r.push(t.urinalysisLocation),n.push(t.actualUrinalysisNum),i.push(t.shouldUrinalysisNum)})),e.Charts1(a,n,i,r))}}))},getTreatmentStatistics:function(t){var e=this,a=Object.assign({},t),n=[],i=[];this.TreatmentStatisticsData=[],s["a"].getTreatmentStatistics(a).then((function(t){if(null!==t){var a=t.data;e.TreatmentStatisticsData=t.data,0!==a.length&&(a.forEach((function(t){n.push(t.areaName),i.push(t.ratio)})),e.Charts2(n,i))}}))},getpsychotherapyRate:function(t){var e=this,a=Object.assign({},t),n=[],i=[];this.TreatmentStatisticsData=[],s["a"].getTreatmentStatistics(a).then((function(t){if(null!==t){var a=t.data;e.TreatmentStatisticsData=t.data,0!==a.length&&(a.forEach((function(t){n.push(t.areaName),i.push(t.ratio)})),e.Charts2(n,i))}}))},onRadioChange:function(t){"1"===this.tabPosition?this.getTreatmentStatistics(this.form):this.getpsychotherapyRate(this.form)},getBreachAgreementCount:function(t){var e=this,a=Object.assign({},t),n=[],i=[],r=[],o=[],h=[],c=[],u=[],l=[],m=[];this.BreachAgreementCountData=[],s["a"].getBreachAgreementCount(a).then((function(t){if(null!==t){var a=t.data;e.BreachAgreementCountData=t.data,0!==e.BreachAgreementCountData.length&&(a.forEach((function(t){switch(i.push(t.date),n.push(t.typeName),t.type){case 1:r.push(t.count);break;case 2:o.push(t.count);break;case 3:h.push(t.count);break;case 4:c.push(t.count);break;case 5:u.push(t.count);break;case 6:l.push(t.count);break}})),n.forEach((function(t,a){e.data.push({name:t,type:"line",data:m+a})})),e.Charts3(n,i,m))}}))},getAbnormalNumberCount:function(t){var e=this,a=[],n=[],i=[];this.AbnormalNumberCountData=[];var r=Object.assign({},t);r.abnormalType=this.tabPosition1,s["a"].getAbnormalNumber(r).then((function(t){if(null!==t){var r=t.data;e.AbnormalNumberCountData=t.data,0!==e.AbnormalNumberCountData.length&&(r.forEach((function(t){a.push(e.getRealLength(t.areaName,5)),i.push(t.areaName),n.push(t.count)})),e.Charts4(a,n,i))}}))},onRadioChange1:function(t){this.getAbnormalNumberCount(this.form)},getDrugTreatmentRehabilitationSQ:function(t){var e=this,a=Object.assign({},t);this.DrugTreatmentRehabilitationSQData=[];var n=[],i=[];s["a"].getDrugTreatmentRehabilitationSQ(a).then((function(t){if(null!==t){var a=t.data;e.DrugTreatmentRehabilitationSQData=t.data,0!==e.DrugTreatmentRehabilitationSQData.length&&(a.forEach((function(t){n.push(t.date),i.push(t.count)})),e.Charts5(n,i))}}))},onQuery:function(){this.getPersonNumber(this.form),this.getUrinalysisStatistics(this.form),this.getTreatmentStatistics(this.form),this.getBreachAgreementCount(this.form),this.getAbnormalNumberCount(this.form),this.getDrugTreatmentRehabilitationSQ(this.form),this.getInstitutionCount1(),this.getMedicineNum1()},onResetForm:function(){this.initParam()},radioOnChange:function(t){console.log(t.target.value)},getRealLength:function(t,e){var a,n=t.length,i=0,r="";if(n<=e)return t;for(var o=0;o<n;o++)if(a=t.charCodeAt(o),i+=a>=0&&a<=128?.5:1,i>=e){r=t.substring(0,o-1)+"...";break}return i<e&&(r=t),r},Charts1:function(t,e,a,n){var i=this.$echarts.init(document.getElementById("echarts1")),r=["应尿检人数","实际尿检人数"],o=[{name:"应尿检人数",type:"bar",barWidth:25,barCategoryGap:0,data:a,label:{normal:{show:!0,position:"top",fontSize:10,color:"#000"}}},{name:"实际尿检人数",type:"bar",barWidth:25,barGap:"-3%",barCategoryGap:0,data:e,label:{normal:{show:!0,position:"top",fontSize:10,color:"#000"}}}];Object(u["drawBar2Echarts"])(i,r,t,o,n)},Charts2:function(t,e){var a=this.$echarts.init(document.getElementById("echarts2"));Object(u["drawBarEcharts"])(a,t,e)},Charts3:function(t,e,a){var n=this.$echarts.init(document.getElementById("echarts3"));Object(u["drawLineEcharts"])(n,t,e,a)},Charts4:function(t,e,a){var n=this.$echarts.init(document.getElementById("echarts4"));Object(u["drawBarEcharts_xdata_format"])(n,t,e,"",a)},Charts5:function(t,e){var a=this.$echarts.init(document.getElementById("echarts5")),n=[""];Object(u["drawLine2Echarts"])(a,n,t,e)}}}}}]);