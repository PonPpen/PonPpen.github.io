webpackJsonp([378],{1148:function(n,l,u){"use strict";function t(n){return s._22(0,[(n()(),s.Z(0,0,null,null,1,"div",[["class","error-msg"]],null,null,null,null,null)),(n()(),s._20(-1,null,["手机号是必填项"]))],null,null)}function e(n){return s._22(0,[(n()(),s.Z(0,0,null,null,1,"div",[["class","error-msg"]],null,null,null,null,null)),(n()(),s._20(-1,null,["手机号码输入不合法"]))],null,null)}function o(n){return s._22(0,[(n()(),s.Z(0,0,null,null,7,"div",[["class","validation-failed"]],null,null,null,null,null)),(n()(),s._20(-1,null,["\n\t\t\t\t"])),(n()(),s.U(16777216,null,null,1,null,t)),s.Y(3,16384,null,0,k.j,[s.I,s.F],{ngIf:[0,"ngIf"]},null),(n()(),s._20(-1,null,["\n\t\t\t\t"])),(n()(),s.U(16777216,null,null,1,null,e)),s.Y(6,16384,null,0,k.j,[s.I,s.F],{ngIf:[0,"ngIf"]},null),(n()(),s._20(-1,null,["\n\t\t\t"]))],function(n,l){n(l,3,0,s._11(l.parent,30).errors.required);n(l,6,0,s._11(l.parent,30).errors.pattern)},null)}function a(n){return s._22(0,[(n()(),s.Z(0,0,null,null,1,"div",[["class","error-msg"]],null,null,null,null,null)),(n()(),s._20(-1,null,["验证码不能为空"]))],null,null)}function i(n){return s._22(0,[(n()(),s.Z(0,0,null,null,4,"div",[["class","validation-failed"]],null,null,null,null,null)),(n()(),s._20(-1,null,["\n\t\t\t\t"])),(n()(),s.U(16777216,null,null,1,null,a)),s.Y(3,16384,null,0,k.j,[s.I,s.F],{ngIf:[0,"ngIf"]},null),(n()(),s._20(-1,null,["\n\t\t\t"]))],function(n,l){n(l,3,0,s._11(l.parent,49).errors.required)},null)}function r(n){return s._22(0,[(n()(),s._20(-1,null,["\n"])),(n()(),s._20(-1,null,["\n\n\n"])),(n()(),s.Z(2,0,null,null,79,"ion-content",[["class","wx_verificationcode_login"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Z.b,Z.a)),s.Y(3,4374528,null,0,j.a,[P.a,S.a,T.a,s.j,s.z,q.a,U.a,s.u,[2,F.a],[2,z.a]],null,null),(n()(),s._20(-1,1,["\n\t"])),(n()(),s.Z(5,0,null,1,3,"div",[["class","wx_verificationcode_logo"]],null,null,null,null,null)),(n()(),s._20(-1,null,["\n\t\t"])),(n()(),s.Z(7,0,null,null,0,"img",[["src","../../assets/imgs/logobj_22.png"]],null,null,null,null,null)),(n()(),s._20(-1,null,["\n\t"])),(n()(),s._20(-1,1,["\n\t"])),(n()(),s.Z(10,0,null,1,55,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,u){var t=!0,e=n.component;if("submit"===l){t=!1!==s._11(n,12).onSubmit(u)&&t}if("reset"===l){t=!1!==s._11(n,12).onReset()&&t}if("ngSubmit"===l){t=!1!==e.onSubmit()&&t}return t},null,null)),s.Y(11,16384,null,0,V.y,[],null,null),s.Y(12,4210688,[["ngForm",4]],0,V.q,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),s._16(2048,null,V.b,null,[V.q]),s.Y(14,16384,null,0,V.p,[V.b],null,null),(n()(),s._20(-1,null,["\n\t\t"])),(n()(),s.Z(16,0,null,null,45,"ion-list",[],null,null,null,null,null)),s.Y(17,16384,null,0,A.a,[P.a,s.j,s.z,S.a,M.l,T.a],null,null),(n()(),s._20(-1,null,["\n\t\t\t"])),(n()(),s.Z(19,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,D.b,D.a)),s.Y(20,1097728,null,3,R.a,[B.a,P.a,s.j,s.z,[2,L.a]],null,null),s._18(335544320,1,{contentLabel:0}),s._18(603979776,2,{_buttons:1}),s._18(603979776,3,{_icons:1}),s.Y(24,16384,null,0,O.a,[],null,null),(n()(),s._20(-1,2,["\n\t\t\t"])),(n()(),s.Z(26,0,null,3,7,"ion-input",[["autocomplete","off"],["name","phone"],["pattern","1[0-9]{10}"],["placeholder","请输入手机号"],["required",""],["type","number"]],[[1,"required",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionChange"],[null,"ngModelChange"]],function(n,l,u){var t=!0,e=n.component;if("ionChange"===l){t=!1!==e.onchange()&&t}if("ngModelChange"===l){t=!1!==(e.userinfo.phone=u)&&t}return t},E.b,E.a)),s.Y(27,16384,null,0,V.u,[],{required:[0,"required"]},null),s.Y(28,540672,null,0,V.s,[],{pattern:[0,"pattern"]},null),s._16(1024,null,V.l,function(n,l){return[n,l]},[V.u,V.s]),s.Y(30,671744,[["phone",4]],0,V.r,[[2,V.b],[2,V.l],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),s._16(2048,null,V.n,null,[V.r]),s.Y(32,16384,null,0,V.o,[V.n],null,null),s.Y(33,5423104,null,0,K.a,[P.a,S.a,B.a,q.a,s.j,s.z,[2,j.a],[2,R.a],[2,V.n],T.a],{type:[0,"type"],autocomplete:[1,"autocomplete"],placeholder:[2,"placeholder"]},{ionChange:"ionChange"}),(n()(),s._20(-1,2,["\n\t\t\t"])),(n()(),s._20(-1,null,["\n\t\t\t"])),(n()(),s.U(16777216,null,null,1,null,o)),s.Y(37,16384,null,0,k.j,[s.I,s.F],{ngIf:[0,"ngIf"]},null),(n()(),s._20(-1,null,["\n      \t\t"])),(n()(),s.Z(39,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,D.b,D.a)),s.Y(40,1097728,null,3,R.a,[B.a,P.a,s.j,s.z,[2,L.a]],null,null),s._18(335544320,4,{contentLabel:0}),s._18(603979776,5,{_buttons:1}),s._18(603979776,6,{_icons:1}),s.Y(44,16384,null,0,O.a,[],null,null),(n()(),s._20(-1,2,["\n\t\t\t\t"])),(n()(),s.Z(46,0,null,3,6,"ion-input",[["name","verifyCode"],["placeholder","请输入验证码"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,u){var t=!0;if("ngModelChange"===l){t=!1!==(n.component.userinfo.verifyCode=u)&&t}return t},E.b,E.a)),s.Y(47,16384,null,0,V.u,[],{required:[0,"required"]},null),s._16(1024,null,V.l,function(n){return[n]},[V.u]),s.Y(49,671744,[["verifyCode",4]],0,V.r,[[2,V.b],[2,V.l],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),s._16(2048,null,V.n,null,[V.r]),s.Y(51,16384,null,0,V.o,[V.n],null,null),s.Y(52,5423104,null,0,K.a,[P.a,S.a,B.a,q.a,s.j,s.z,[2,j.a],[2,R.a],[2,V.n],T.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(n()(),s._20(-1,2,["\n        \t\t"])),(n()(),s.Z(54,0,null,4,2,"button",[["class","wx_yzmtp"],["ion-button",""],["item-end",""],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.sendVerify()&&t}return t},N.b,N.a)),s.Y(55,1097728,[[5,4]],0,X.a,[[8,""],P.a,s.j,s.z],null,null),(n()(),s._20(56,0,["",""])),(n()(),s._20(-1,2,["\n\t\t\t"])),(n()(),s._20(-1,null,["\n\t\t\t"])),(n()(),s.U(16777216,null,null,1,null,i)),s.Y(60,16384,null,0,k.j,[s.I,s.F],{ngIf:[0,"ngIf"]},null),(n()(),s._20(-1,null,["\n\t\t"])),(n()(),s._20(-1,null,["\n\t\t"])),(n()(),s.Z(63,0,null,null,1,"button",[["class","wx_verificationcode_Button"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(n()(),s._20(-1,null,["登 录"])),(n()(),s._20(-1,null,["\n\t"])),(n()(),s._20(-1,1,["\n\t"])),(n()(),s.Z(67,0,null,1,12,"p",[],null,null,null,null,null)),(n()(),s._20(-1,null,["\n\t\t"])),(n()(),s.Z(69,0,null,null,1,"a",[["href","javascript:void(0)"]],null,[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.forgetPassword()&&t}return t},null,null)),(n()(),s._20(-1,null,["忘记密码"])),(n()(),s._20(-1,null,["\n\t\t"])),(n()(),s.Z(72,0,null,null,1,"span",[["style","color:#999"]],null,null,null,null,null)),(n()(),s._20(-1,null,["|"])),(n()(),s._20(-1,null,["\n\t\t"])),(n()(),s.Z(75,0,null,null,3,"a",[["href","javascript:void(0)"],["navPop",""]],[[1,"href",4]],[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==s._11(n,76).onClick()&&t}return t},null,null)),s.Y(76,16384,null,0,J.a,[[2,z.a]],null,null),s.Y(77,1064960,null,0,W.a,[[2,J.a],G.a,[2,F.a]],null,null),(n()(),s._20(-1,null,["账号登录"])),(n()(),s._20(-1,null,["\n\t"])),(n()(),s._20(-1,1,["\n\t"])),(n()(),s._20(-1,1,["\n"])),(n()(),s._20(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,27,0,"");n(l,28,0,"1[0-9]{10}");n(l,30,0,"phone",u.userinfo.phone);n(l,33,0,"number","off","请输入手机号");n(l,37,0,s._11(l,30).invalid&&s._11(l,30).dirty);n(l,47,0,"");n(l,49,0,"verifyCode",u.userinfo.verifyCode);n(l,52,0,"text","请输入验证码");n(l,60,0,s._11(l,49).invalid&&s._11(l,49).dirty)},function(n,l){var u=l.component;n(l,2,0,s._11(l,3).statusbarPadding,s._11(l,3)._hasRefresher);n(l,10,0,s._11(l,14).ngClassUntouched,s._11(l,14).ngClassTouched,s._11(l,14).ngClassPristine,s._11(l,14).ngClassDirty,s._11(l,14).ngClassValid,s._11(l,14).ngClassInvalid,s._11(l,14).ngClassPending);n(l,26,0,s._11(l,27).required?"":null,s._11(l,28).pattern?s._11(l,28).pattern:null,s._11(l,32).ngClassUntouched,s._11(l,32).ngClassTouched,s._11(l,32).ngClassPristine,s._11(l,32).ngClassDirty,s._11(l,32).ngClassValid,s._11(l,32).ngClassInvalid,s._11(l,32).ngClassPending);n(l,46,0,s._11(l,47).required?"":null,s._11(l,51).ngClassUntouched,s._11(l,51).ngClassTouched,s._11(l,51).ngClassPristine,s._11(l,51).ngClassDirty,s._11(l,51).ngClassValid,s._11(l,51).ngClassInvalid,s._11(l,51).ngClassPending);n(l,54,0,u.Status);n(l,56,0,u.again);n(l,63,0,!s._11(l,12).form.valid);n(l,75,0,s._11(l,77)._href)})}Object.defineProperty(l,"__esModule",{value:!0});var s=u(1),c=(u(0),u(39),u(77)),d=u(269),f=u(49),p=u(43),_=u(255),g=function(){function n(n,l,u,t,e,o,a,i,r,s,c){this.events=n,this.navCtrl=l,this.navParams=u,this.alertCtrl=t,this.http=e,this.storage=o,this.toastprovider=a,this.wsService=i,this.app=r,this.modalCtrl=s,this.permission=c,this.history="",this.isDw=!1,this.again="获取验证码",this.userinfo={phone:"",verifyCode:""}}return n.prototype.onchange=function(){this.userinfo.verifyCode=""},n.prototype.onSubmit=function(){var n=this;this.toastprovider.showLoading("登录中...");this.http.login("loginAPI/checkVerifyCode",this.userinfo,function(l){n.toastprovider.hideLoading(),l.data.length>1?n.mAccounts(l.data):n.handToken(l.data[0].username)},function(n){})},n.prototype.mAccounts=function(n){var l=this,u=this.alertCtrl.create();u.setTitle("请选择一个账号登录！");for(var t=0;t<n.length;t++){var e=n[t];u.addInput({type:"radio",label:e.name,value:e.username,checked:n[t]==n[0]})}u.addButton({text:"取消",handler:function(n){l.userinfo.phone="",l.userinfo.verifyCode=""}}),u.addButton({text:"确定",handler:function(n){console.log("Radio username:",n),l.handToken(n),l.RadioOpen=!1,l.RadioResult=n}}),u.present().then(function(){l.RadioOpen=!0})},n.prototype.sendVerify=function(){var n=this;this.Status=!0,console.log(this.userinfo),this.http.login("loginAPI/loginSendVerifyCode",this.userinfo,function(l){200==l.code?(n.toastprovider.showToast(l.data),n.secondsEvent()):(n.toastprovider.showToast(l.error),n.Status=!1)},function(n){})},n.prototype.secondsEvent=function(){var n=this;this.seconds=180,this.Status=!0,this.again=this.seconds+"秒重新发送";var l=setInterval(function(){n.seconds-=1,n.again=n.seconds+"秒重新发送",0==n.seconds&&(n.Status=!1,n.again="获取验证码",clearInterval(l))},1e3)},n.prototype.handToken=function(n){var l=this;this.http.login("loginAPI/loginByPhone",{phone:this.userinfo.phone,username:n},function(n){var u=n.data;n.error?l.toastprovider.showToast(n.error):(l.storage.set("token",u),l.permission.getUserinfo(u,-1).subscribe(function(n){l.toastprovider.showToast("登录成功!"),l.connect(n.id),l.menu(n.groupId)}))},function(n){})},n.prototype.menu=function(n){var l=this;this.permission.getTabsList(n).subscribe(function(n){l.events.publish("user:Permission",n,Date.now()),l.storage.set("Permission",n),l.navCtrl.push("TabsPage")})},n.prototype.forgetPassword=function(){this.modalCtrl.create("ForgetPasswordPage").present()},n.prototype.connect=function(n){var l={tableId:"",fromUserId:n,fromName:"",message:"10001",toUserId:"",toName:"",businessId:"",buttonKey:"",module:"",moduleId:""};null===this.storage.get(n+"-heartData")&&this.storage.set(n+"-heartData",l),this.wsService.rconn()},n}(),h=function(){return function(){}}(),m=u(529),v=u(530),b=u(531),y=u(532),C=u(533),I=u(534),Y=u(535),w=u(536),x=u(537),k=u(37),Z=u(1515),j=u(48),P=u(4),S=u(8),T=u(17),q=u(16),U=u(68),F=u(9),z=u(44),V=u(31),A=u(109),M=u(15),D=u(538),R=u(38),B=u(35),L=u(78),O=u(160),E=u(1521),K=u(248),N=u(75),X=u(40),J=u(177),W=u(284),G=u(32),H=u(110),Q=u(21),$=u(161),nn=u(170),ln=s.X({encapsulation:2,styles:[],data:{}}),un=s.V("page-verificationcode",g,function(n){return s._22(0,[(n()(),s.Z(0,0,null,null,1,"page-verificationcode",[],null,null,null,r,ln)),s.Y(1,49152,null,0,g,[H.a,z.a,Q.a,$.a,c.a,f.a,p.a,d.a,q.a,nn.a,_.a],null,null)],null,null)},{},{},[]),tn=u(246),en=u(69);u.d(l,"VerificationcodePageModuleNgFactory",function(){return on});var on=s.W(h,[],function(n){return s._7([s._8(512,s.i,s.S,[[8,[m.a,v.a,b.a,y.a,C.a,I.a,Y.a,w.a,x.a,un]],[3,s.i],s.s]),s._8(4608,k.l,k.k,[s.r,[2,k.t]]),s._8(4608,V.z,V.z,[]),s._8(4608,V.d,V.d,[]),s._8(512,k.b,k.b,[]),s._8(512,V.w,V.w,[]),s._8(512,V.i,V.i,[]),s._8(512,V.t,V.t,[]),s._8(512,tn.a,tn.a,[]),s._8(512,tn.b,tn.b,[]),s._8(512,h,h,[]),s._8(256,en.a,g,[])])})},1515:function(n,l,u){"use strict";function t(n){return e._22(2,[e._18(402653184,1,{_fixedContent:0}),e._18(402653184,2,{_scrollContent:0}),(n()(),e.Z(2,0,[[1,0],["fixedContent",1]],null,1,"div",[["class","fixed-content"]],null,null,null,null,null)),e._10(null,0),(n()(),e.Z(4,0,[[2,0],["scrollContent",1]],null,1,"div",[["class","scroll-content"]],null,null,null,null,null)),e._10(null,1),e._10(null,2)],null,null)}u.d(l,"a",function(){return o}),l.b=t;var e=u(1),o=(u(4),u(8),u(17),u(68),u(9),u(44),e.X({encapsulation:2,styles:[],data:{}}))},1521:function(n,l,u){"use strict";function t(n){return r._22(0,[(n()(),r.Z(0,0,[[1,0],["textInput",1]],null,1,"input",[["class","text-input"],["dir","auto"]],[[8,"type",0],[1,"aria-labelledby",0],[1,"min",0],[1,"max",0],[1,"step",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(n,l,u){var t=!0,e=n.component;if("input"===l){t=!1!==e.onInput(u)&&t}if("blur"===l){t=!1!==e.onBlur(u)&&t}if("focus"===l){t=!1!==e.onFocus(u)&&t}if("keydown"===l){t=!1!==e.onKeydown(u)&&t}return t},null,null)),r.Y(1,278528,null,0,s.h,[r.p,r.q,r.j,r.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(n,l){n(l,1,0,"text-input","text-input-"+l.component._mode)},function(n,l){var u=l.component;n(l,0,0,u._type,u._labelId,u.min,u.max,u.step,u.autocomplete,u.autocorrect,u.placeholder,u._disabled,u._readonly)})}function e(n){return r._22(0,[(n()(),r.Z(0,0,[[1,0],["textInput",1]],null,1,"textarea",[["class","text-input"]],[[1,"aria-labelledby",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(n,l,u){var t=!0,e=n.component;if("input"===l){t=!1!==e.onInput(u)&&t}if("blur"===l){t=!1!==e.onBlur(u)&&t}if("focus"===l){t=!1!==e.onFocus(u)&&t}if("keydown"===l){t=!1!==e.onKeydown(u)&&t}return t},null,null)),r.Y(1,278528,null,0,s.h,[r.p,r.q,r.j,r.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(n,l){n(l,1,0,"text-input","text-input-"+l.component._mode)},function(n,l){var u=l.component;n(l,0,0,u._labelId,u.autocomplete,u.autocorrect,u.placeholder,u._disabled,u._readonly)})}function o(n){return r._22(0,[(n()(),r.Z(0,0,null,null,1,"button",[["class","text-input-clear-icon"],["clear",""],["ion-button",""],["tabindex","-1"],["type","button"]],null,[[null,"click"],[null,"mousedown"]],function(n,l,u){var t=!0,e=n.component;if("click"===l){t=!1!==e.clearTextInput(u)&&t}if("mousedown"===l){t=!1!==e.clearTextInput(u)&&t}return t},c.b,c.a)),r.Y(1,1097728,null,0,d.a,[[8,""],f.a,r.j,r.z],{clear:[0,"clear"]},null)],function(n,l){n(l,1,0,"")},null)}function a(n){return r._22(0,[(n()(),r.Z(0,0,null,null,0,"div",[["class","input-cover"]],null,[[null,"touchstart"],[null,"touchend"],[null,"mousedown"],[null,"mouseup"]],function(n,l,u){var t=!0,e=n.component;if("touchstart"===l){t=!1!==e._pointerStart(u)&&t}if("touchend"===l){t=!1!==e._pointerEnd(u)&&t}if("mousedown"===l){t=!1!==e._pointerStart(u)&&t}if("mouseup"===l){t=!1!==e._pointerEnd(u)&&t}return t},null,null))],null,null)}function i(n){return r._22(2,[r._18(671088640,1,{_native:0}),(n()(),r.U(16777216,null,null,1,null,t)),r.Y(2,16384,null,0,s.j,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r.U(16777216,null,null,1,null,e)),r.Y(4,16384,null,0,s.j,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r.U(16777216,null,null,1,null,o)),r.Y(6,16384,null,0,s.j,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r.U(16777216,null,null,1,null,a)),r.Y(8,16384,null,0,s.j,[r.I,r.F],{ngIf:[0,"ngIf"]},null)],function(n,l){var u=l.component;n(l,2,0,!u._isTextarea);n(l,4,0,u._isTextarea);n(l,6,0,u._clearInput);n(l,8,0,u._useAssist)},null)}u.d(l,"a",function(){return p}),l.b=i;var r=u(1),s=u(37),c=u(75),d=u(40),f=u(4),p=(u(8),u(35),u(17),r.X({encapsulation:2,styles:[],data:{}}))}});