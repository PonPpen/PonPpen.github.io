webpackJsonp([339],{1461:function(n,l,t){"use strict";function e(n){return i._22(0,[(n()(),i.Z(0,0,null,null,8,"div",[],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.isCheck(n.context.index,n.context.$implicit)&&e}return e},null,null)),i.Y(1,278528,null,0,b.h,[i.p,i.q,i.j,i.A],{ngClass:[0,"ngClass"]},null),(n()(),i._20(-1,null,["\n\t\t\t"])),(n()(),i.Z(3,0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),i._20(-1,null,["视频"])),(n()(),i._20(-1,null,["\n\t\t\t"])),(n()(),i.Z(6,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),i._20(7,null,["",".",""])),(n()(),i._20(-1,null,["\n\t\t"]))],function(n,l){n(l,1,0,l.component.cur==l.context.index?"active wx_coursedetailscontent_video":"wx_coursedetailscontent_video")},function(n,l){n(l,7,0,l.context.index+1,l.context.$implicit.name)})}function a(n){return i._22(0,[i._18(402653184,1,{video1:0}),(n()(),i._20(-1,null,["\n"])),(n()(),i.Z(2,0,null,null,10,"ion-header",[["class","whiteHeader"]],null,null,null,null,null)),i.Y(3,16384,null,0,S.a,[T.a,i.j,i.z,[2,k.a]],null,null),(n()(),i._20(-1,null,["\n\n\t"])),(n()(),i.Z(5,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,w.b,w.a)),i.Y(6,49152,null,0,y.a,[C.a,[2,k.a],[2,P.a],T.a,i.j,i.z],null,null),(n()(),i._20(-1,3,["\n\t\t"])),(n()(),i.Z(8,0,null,3,2,"ion-title",[],null,null,null,L.b,L.a)),i.Y(9,49152,null,0,Z.a,[T.a,i.j,i.z,[2,x.a],[2,y.a]],null,null),(n()(),i._20(-1,0,["课程详情"])),(n()(),i._20(-1,3,["\n\t"])),(n()(),i._20(-1,null,["\n\n"])),(n()(),i._20(-1,null,["\n\n\n"])),(n()(),i.Z(14,0,null,null,30,"ion-content",[["class","wx_coursedetailscontent"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,V.b,V.a)),i.Y(15,4374528,null,0,Y.a,[T.a,j.a,D.a,i.j,i.z,C.a,O.a,i.u,[2,k.a],[2,P.a]],null,null),(n()(),i._20(-1,1,["\n\t"])),(n()(),i.Z(17,0,[[1,0],["video1",1]],1,3,"video",[["controls",""],["height","240"],["width","100%"]],null,[[null,"play"],[null,"pause"],[null,"ended"],[null,"waiting"]],function(n,l,t){var e=!0,a=n.component;if("play"===l){e=!1!==a.videoPlayStarted()&&e}if("pause"===l){e=!1!==a.videoPlayPaused()&&e}if("ended"===l){e=!1!==a.videoPlayEnded()&&e}if("waiting"===l){e=!1!==a.videoOnWaiting()&&e}return e},null,null)),(n()(),i._20(-1,null,["\n\t\t\n\t\t"])),(n()(),i.Z(19,0,null,null,0,"source",[["type","video/mp4"]],[[8,"src",4]],null,null,null,null)),(n()(),i._20(-1,null,["\n\t"])),(n()(),i._20(-1,1,["\n\t\n\t"])),(n()(),i.Z(22,0,null,1,15,"div",[["class","wx_coursedetailscontent_middle"]],null,null,null,null,null)),(n()(),i._20(-1,null,["\n\t\t"])),(n()(),i.Z(24,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),i._20(25,null,["",""])),(n()(),i._20(-1,null,["\n\t\t"])),(n()(),i.Z(27,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),i._20(28,null,["",""])),(n()(),i._20(-1,null,["\n\t\t"])),(n()(),i.Z(30,0,null,null,6,"p",[],null,null,null,null,null)),(n()(),i.Z(31,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),i._20(32,null,["",""])),(n()(),i.Z(33,0,null,null,1,"span",[["class","division"]],null,null,null,null,null)),(n()(),i._20(-1,null,["|"])),(n()(),i.Z(35,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),i._20(36,null,["","节课程"])),(n()(),i._20(-1,null,["\n\t"])),(n()(),i._20(-1,1,["\n\t"])),(n()(),i.Z(39,0,null,1,4,"div",[["class","wx_coursedetailscontent_box"]],null,null,null,null,null)),(n()(),i._20(-1,null,["\n\t\t"])),(n()(),i.U(16777216,null,null,1,null,e)),i.Y(42,802816,null,0,b.i,[i.I,i.F,i.p],{ngForOf:[0,"ngForOf"]},null),(n()(),i._20(-1,null,["\n\t"])),(n()(),i._20(-1,1,["\n"])),(n()(),i._20(-1,null,["\n"]))],function(n,l){n(l,42,0,l.component.chapterInfo.coursewares)},function(n,l){var t=l.component;n(l,5,0,i._11(l,6)._hidden,i._11(l,6)._sbPadding);n(l,14,0,i._11(l,15).statusbarPadding,i._11(l,15)._hasRefresher);n(l,19,0,i._2(2,"",t.hup,"/courseware/selectFile?path=",t.coursewareInfo.attachment,""));n(l,25,0,t.courseInfo.name);n(l,28,0,t.courseInfo.introduction);n(l,32,0,t.courseInfo.categoryName);n(l,36,0,t.courseInfo.chapterNum)})}Object.defineProperty(l,"__esModule",{value:!0});var i=t(1),u=(t(0),t(39),t(77)),o=t(43),s=t(63),r=function(){function n(n,l,t,e,a){this.navCtrl=n,this.navParams=l,this.alertCtrl=t,this.http=e,this.toast=a,this.saveOnPause=!0,this.autoSave=3e5,this.autoSaveTimeout=null,this.cur=0,this.hup=s.f,this.courseInfo={hasLearning:!1},this.chapterInfo={id:null,lessonId:null,coursewares:[]},this.coursewareInfo={id:null,learnedTime:0},this.learningInfo={lessonId:null,chapterId:null,coursewareId:null,startTime:null,endTime:null,timeSegment:[],lastStartPoint:0,learnedTime:0,lastLearnedTime:0,dataState:0},this.popInfo={data:null},this.courseInfo=l.data.courseInfo,this.chapterInfo=l.data.chapterInfo,this.learningInfo.lessonId=this.chapterInfo.lessonId,this.learningInfo.chapterId=this.chapterInfo.id}return n.prototype.ionViewCanEnter=function(){return!0},n.prototype.ionViewDidLoad=function(){this.cur=0,this.chapterInfo.coursewares.length>this.cur&&(this.coursewareInfo=this.chapterInfo.coursewares[this.cur])},n.prototype.ionViewWillEnter=function(){this.popInfo={data:null}},n.prototype.ionViewDidEnter=function(){},n.prototype.ionViewCanLeave=function(){var n=this;return new Promise(function(l){if(n.checkDataState()<=0)return l(!0);n.saveOnPause=!1,n.video1.nativeElement.pause(),n.updateLocalTimeSegment(1),n.sumLearnedTime(),n.alertCtrl.create({title:"提示",message:"是否保存学习信息?",buttons:[{text:"保存",handler:function(){n.doCommitData(0,!1,!0),l(!1)}},{text:"离开",handler:function(){l(!0)}}]}).present()})},n.prototype.ionViewWillLeave=function(){this.popInfo.data&&"CoursedetailscontentPage"!=this.navCtrl.getPrevious().id&&(this.navCtrl.getPrevious().data.childPopInfo=this.popInfo),this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout)},n.prototype.ionViewDidLeave=function(){},n.prototype.ionViewWillUnload=function(){},n.prototype.isCheck=function(n,l){this.cur=n,this.coursewareInfo=l,this.learningInfo.coursewareId=this.coursewareInfo.id,this.learningInfo.startTime=null,this.learningInfo.endTime=null,this.learningInfo.timeSegment=[],this.learningInfo.lastStartPoint=0,this.learningInfo.learnedTime=0,this.learningInfo.lastLearnedTime=0,this.learningInfo.dataState=0},n.prototype.videoPlayStarted=function(){var n=this;this.courseInfo.hasLearning&&!this.learningInfo.endTime&&(this.learningInfo.startTime||(this.learningInfo.startTime=new Date,this.courseInfo.hasLearning&&(this.autoSaveTimeout=setTimeout(function(){n.updateLocalTimeSegment(2),n.saveVideoLearningInfo(0,!1)},this.autoSave))),this.learningInfo.lastStartPoint=this.video1.nativeElement.currentTime,this.learningInfo.dataState=1)},n.prototype.videoPlayPaused=function(){this.checkDataState()<0||(this.saveOnPause?(this.updateLocalTimeSegment(1),this.saveVideoLearningInfo(10,!0)):this.saveOnPause=!0)},n.prototype.videoPlayEnded=function(){this.checkDataState()<0||this.learningInfo.dataState<2&&this.saveVideoLearningInfo(0,!0)},n.prototype.videoOnWaiting=function(){},n.prototype.combineSegment=function(n){var l=[],t=[];for(var e in n){var a=n[e];0==l.length?l.push(t=a):t[1]>=a[0]?t[1]<a[1]&&(t[1]=a[1]):l.push(t=a)}return l},n.prototype.quickSort=function(n,l,t){var e,a,i,u;if(!(l>t)){for(e=l,a=t,i=n[l];e<a;){for(;i[0]<=n[a][0]&&e<a;)a--;for(;i[0]>=n[e][0]&&e<a;)e++;e<a&&(u=n[a],n[a]=n[e],n[e]=u)}n[l]=n[e],n[e]=i,this.quickSort(n,l,a-1),this.quickSort(n,a+1,t)}},n.prototype.saveVideoLearningInfo=function(n,l){this.sumLearnedTime(),this.autoCommit(),this.doCommitData(n,l,!1)},n.prototype.checkDataState=function(){return this.courseInfo.hasLearning?this.learningInfo.startTime?this.learningInfo.endTime?-3:0==this.learningInfo.dataState||3==this.learningInfo.dataState?0:1:-2:-1},n.prototype.updateLocalTimeSegment=function(n){var l=this.video1.nativeElement.currentTime;1==n?this.learningInfo.lastStartPoint<l&&(this.learningInfo.timeSegment.push([this.learningInfo.lastStartPoint,l]),this.learningInfo.dataState=1):2==n&&this.learningInfo.lastStartPoint<l&&(this.learningInfo.timeSegment.push([this.learningInfo.lastStartPoint,l]),this.learningInfo.lastStartPoint=l,this.learningInfo.dataState=1)},n.prototype.sumLearnedTime=function(){if(this.learningInfo.timeSegment.length>0){this.quickSort(this.learningInfo.timeSegment,0,this.learningInfo.timeSegment.length-1),this.learningInfo.timeSegment=this.combineSegment(this.learningInfo.timeSegment),this.learningInfo.learnedTime=0;for(var n in this.learningInfo.timeSegment){var l=this.learningInfo.timeSegment[n];this.learningInfo.learnedTime+=l[1]>l[0]?l[1]-l[0]:0}}},n.prototype.autoCommit=function(){var n=this;this.autoSaveTimeout&&(clearTimeout(this.autoSaveTimeout),this.learningInfo.endTime||(this.autoSaveTimeout=setTimeout(function(){n.updateLocalTimeSegment(2),n.saveVideoLearningInfo(0,!1)},this.autoSave)))},n.prototype.doCommitData=function(n,l,t){var e=this;if(this.learningInfo.coursewareId=this.coursewareInfo.id,!this.learningInfo.coursewareId||this.learningInfo.learnedTime-this.learningInfo.lastLearnedTime<n||this.checkDataState()<=0)t&&this.navCtrl.pop();else{this.learningInfo.learnedTime>.8*this.video1.nativeElement.duration&&!this.learningInfo.endTime&&(this.learningInfo.endTime=new Date);var a=JSON.parse(JSON.stringify(this.learningInfo));this.learningInfo.lastLearnedTime=this.learningInfo.learnedTime,this.learningInfo.dataState=2,this.http.httpPost("myLearn/saveVideoLearningInfoForApp",JSON.stringify(a),function(n){e.autoSaveTimeout&&e.learningInfo.endTime&&clearTimeout(e.autoSaveTimeout),200==n.code?(e.learningInfo.dataState=3,l&&n.data.message&&n.data.message.length>0&&e.toast.showToast(n.data.message),e.popInfo.data=n.data):e.toast.showToast(n.error),t&&e.navCtrl.pop()})}},n}(),c=function(){return function(){}}(),h=t(529),d=t(530),f=t(531),m=t(532),p=t(533),g=t(534),I=t(535),_=t(536),v=t(537),b=t(37),S=t(247),T=t(4),k=t(9),w=t(1516),y=t(74),C=t(16),P=t(44),L=t(1517),Z=t(244),x=t(108),V=t(1515),Y=t(48),j=t(8),D=t(17),O=t(68),q=t(21),E=t(161),z=i.X({encapsulation:2,styles:[],data:{}}),A=i.V("page-coursedetailscontent",r,function(n){return i._22(0,[(n()(),i.Z(0,0,null,null,1,"page-coursedetailscontent",[],null,null,null,a,z)),i.Y(1,49152,null,0,r,[P.a,q.a,E.a,u.a,o.a],null,null)],null,null)},{},{},[]),F=t(31),N=t(246),W=t(69);t.d(l,"CoursedetailscontentPageModuleNgFactory",function(){return J});var J=i.W(c,[],function(n){return i._7([i._8(512,i.i,i.S,[[8,[h.a,d.a,f.a,m.a,p.a,g.a,I.a,_.a,v.a,A]],[3,i.i],i.s]),i._8(4608,b.l,b.k,[i.r,[2,b.t]]),i._8(4608,F.z,F.z,[]),i._8(4608,F.d,F.d,[]),i._8(512,b.b,b.b,[]),i._8(512,F.w,F.w,[]),i._8(512,F.i,F.i,[]),i._8(512,F.t,F.t,[]),i._8(512,N.a,N.a,[]),i._8(512,N.b,N.b,[]),i._8(512,c,c,[]),i._8(256,W.a,r,[])])})},1515:function(n,l,t){"use strict";function e(n){return a._22(2,[a._18(402653184,1,{_fixedContent:0}),a._18(402653184,2,{_scrollContent:0}),(n()(),a.Z(2,0,[[1,0],["fixedContent",1]],null,1,"div",[["class","fixed-content"]],null,null,null,null,null)),a._10(null,0),(n()(),a.Z(4,0,[[2,0],["scrollContent",1]],null,1,"div",[["class","scroll-content"]],null,null,null,null,null)),a._10(null,1),a._10(null,2)],null,null)}t.d(l,"a",function(){return i}),l.b=e;var a=t(1),i=(t(4),t(8),t(17),t(68),t(9),t(44),a.X({encapsulation:2,styles:[],data:{}}))},1516:function(n,l,t){"use strict";function e(n){return a._22(0,[(n()(),a.Z(0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),a.Y(1,278528,null,0,i.h,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),a.Z(2,0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.backButtonClick(t)&&e}return e},u.b,u.a)),a.Y(3,278528,null,0,i.h,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a.Y(4,1097728,null,0,o.a,[[8,"bar-button"],s.a,a.j,a.z],null,null),(n()(),a.Z(5,0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a.Y(6,278528,null,0,i.h,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a.Y(7,147456,null,0,r.a,[s.a,a.j,a.z],{name:[0,"name"]},null),(n()(),a.Z(8,0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),a.Y(9,278528,null,0,i.h,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),a._20(10,null,["",""])),a._10(null,0),a._10(null,1),a._10(null,2),(n()(),a.Z(14,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),a.Y(15,278528,null,0,i.h,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a._10(null,3)],function(n,l){var t=l.component;n(l,1,0,"toolbar-background","toolbar-background-"+t._mode);n(l,3,0,"back-button","back-button-"+t._mode);n(l,6,0,"back-button-icon","back-button-icon-"+t._mode);n(l,7,0,t._bbIcon);n(l,9,0,"back-button-text","back-button-text-"+t._mode);n(l,15,0,"toolbar-content","toolbar-content-"+t._mode)},function(n,l){var t=l.component;n(l,2,0,t._hideBb);n(l,5,0,a._11(l,7)._hidden);n(l,10,0,t._backText)})}t.d(l,"a",function(){return c}),l.b=e;var a=t(1),i=t(37),u=t(75),o=t(40),s=t(4),r=t(76),c=(t(9),t(44),a.X({encapsulation:2,styles:[],data:{}}))},1517:function(n,l,t){"use strict";function e(n){return a._22(2,[(n()(),a.Z(0,0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),a.Y(1,278528,null,0,i.h,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a._10(null,0)],function(n,l){n(l,1,0,"toolbar-title","toolbar-title-"+l.component._mode)},null)}t.d(l,"a",function(){return u}),l.b=e;var a=t(1),i=t(37),u=(t(4),a.X({encapsulation:2,styles:[],data:{}}))}});